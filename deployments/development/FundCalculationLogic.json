{
  "address": "0xA0BA8709a5ce5A2d588fD441C8eF8b228468dC3f",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "previousRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "ratio",
          "type": "uint256"
        }
      ],
      "name": "UpdateOrderFeeRate",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_maturity",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateActualFutureValue",
      "outputs": [
        {
          "internalType": "int256",
          "name": "futureValue",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_maturity",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateActualPresentValue",
      "outputs": [
        {
          "internalType": "int256",
          "name": "presentValue",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateActualPresentValue",
      "outputs": [
        {
          "internalType": "int256",
          "name": "totalPresentValue",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_market",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateBorrowedFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "workingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "debtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "borrowedAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateBorrowedFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalWorkingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalDebtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalBorrowedAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateFunds",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "workingLendOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "claimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "collateralAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "workingBorrowOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "debtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "borrowedAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateLentFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalWorkingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalClaimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalLentAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_market",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateLentFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "workingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "claimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lentAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_maturity",
          "type": "uint256"
        }
      ],
      "name": "calculateOrderFeeAmount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "orderFeeAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "_depositCcy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_depositAmount",
          "type": "uint256"
        }
      ],
      "name": "calculateTotalFundsInETH",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalWorkingLendOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalClaimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalCollateralAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalLentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalWorkingBorrowOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalDebtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalBorrowedAmount",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isEnoughDeposit",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x4fe85f19779002c3e79a4094eba8b2e41132a4a3a6794b6b674ac31b20c2c7f1",
  "receipt": {
    "to": null,
    "from": "0xDBA767F3DFF3835BEf5dE1eDEe91A9901402AB21",
    "contractAddress": "0xA0BA8709a5ce5A2d588fD441C8eF8b228468dC3f",
    "transactionIndex": 25,
    "gasUsed": "2989111",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xdfba34a8748acef8d2e3daee957d03b0cd3b3de43ac26a32600479f1b1d99387",
    "transactionHash": "0x4fe85f19779002c3e79a4094eba8b2e41132a4a3a6794b6b674ac31b20c2c7f1",
    "logs": [],
    "blockNumber": 8453610,
    "cumulativeGasUsed": "14142374",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "2225947d2231d9adab80ce5665db23e3",
  "metadata": "{\"compiler\":{\"version\":\"0.8.9+commit.e5eed63a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"previousRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"ratio\",\"type\":\"uint256\"}],\"name\":\"UpdateOrderFeeRate\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_maturity\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateActualFutureValue\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"futureValue\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_maturity\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateActualPresentValue\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"presentValue\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateActualPresentValue\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"totalPresentValue\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_market\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateBorrowedFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"workingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"borrowedAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateBorrowedFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"totalWorkingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalDebtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalBorrowedAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateFunds\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"workingLendOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"claimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateralAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"workingBorrowOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"borrowedAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateLentFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"totalWorkingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalClaimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalLentAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_market\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateLentFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"workingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"claimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lentAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_maturity\",\"type\":\"uint256\"}],\"name\":\"calculateOrderFeeAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"orderFeeAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_depositCcy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_depositAmount\",\"type\":\"uint256\"}],\"name\":\"calculateTotalFundsInETH\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"totalWorkingLendOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalClaimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalCollateralAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalLentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalWorkingBorrowOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalDebtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalBorrowedAmount\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isEnoughDeposit\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/libraries/logics/FundCalculationLogic.sol\":\"FundCalculationLogic\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\ninterface AggregatorV3Interface {\\n  function decimals() external view returns (uint8);\\n\\n  function description() external view returns (string memory);\\n\\n  function version() external view returns (uint256);\\n\\n  // getRoundData and latestRoundData should both raise \\\"No data present\\\"\\n  // if they do not have data to report, instead of returning unset values\\n  // which could be misinterpreted as actual reported values.\\n  function getRoundData(uint80 _roundId)\\n    external\\n    view\\n    returns (\\n      uint80 roundId,\\n      int256 answer,\\n      uint256 startedAt,\\n      uint256 updatedAt,\\n      uint80 answeredInRound\\n    );\\n\\n  function latestRoundData()\\n    external\\n    view\\n    returns (\\n      uint80 roundId,\\n      int256 answer,\\n      uint256 startedAt,\\n      uint256 updatedAt,\\n      uint80 answeredInRound\\n    );\\n}\\n\",\"keccak256\":\"0xf2b6c9adb3552254df1445b73563cf014434ff5e78663e9b961b6c059506ceb5\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (utils/structs/EnumerableSet.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Library for managing\\n * https://en.wikipedia.org/wiki/Set_(abstract_data_type)[sets] of primitive\\n * types.\\n *\\n * Sets have the following properties:\\n *\\n * - Elements are added, removed, and checked for existence in constant time\\n * (O(1)).\\n * - Elements are enumerated in O(n). No guarantees are made on the ordering.\\n *\\n * ```\\n * contract Example {\\n *     // Add the library methods\\n *     using EnumerableSet for EnumerableSet.AddressSet;\\n *\\n *     // Declare a set state variable\\n *     EnumerableSet.AddressSet private mySet;\\n * }\\n * ```\\n *\\n * As of v3.3.0, sets of type `bytes32` (`Bytes32Set`), `address` (`AddressSet`)\\n * and `uint256` (`UintSet`) are supported.\\n *\\n * [WARNING]\\n * ====\\n *  Trying to delete such a structure from storage will likely result in data corruption, rendering the structure unusable.\\n *  See https://github.com/ethereum/solidity/pull/11843[ethereum/solidity#11843] for more info.\\n *\\n *  In order to clean an EnumerableSet, you can either remove all elements one by one or create a fresh instance using an array of EnumerableSet.\\n * ====\\n */\\nlibrary EnumerableSet {\\n    // To implement this library for multiple types with as little code\\n    // repetition as possible, we write it in terms of a generic Set type with\\n    // bytes32 values.\\n    // The Set implementation uses private functions, and user-facing\\n    // implementations (such as AddressSet) are just wrappers around the\\n    // underlying Set.\\n    // This means that we can only create new EnumerableSets for types that fit\\n    // in bytes32.\\n\\n    struct Set {\\n        // Storage of set values\\n        bytes32[] _values;\\n        // Position of the value in the `values` array, plus 1 because index 0\\n        // means a value is not in the set.\\n        mapping(bytes32 => uint256) _indexes;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function _add(Set storage set, bytes32 value) private returns (bool) {\\n        if (!_contains(set, value)) {\\n            set._values.push(value);\\n            // The value is stored at length-1, but we add 1 to all indexes\\n            // and use 0 as a sentinel value\\n            set._indexes[value] = set._values.length;\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function _remove(Set storage set, bytes32 value) private returns (bool) {\\n        // We read and store the value's index to prevent multiple reads from the same storage slot\\n        uint256 valueIndex = set._indexes[value];\\n\\n        if (valueIndex != 0) {\\n            // Equivalent to contains(set, value)\\n            // To delete an element from the _values array in O(1), we swap the element to delete with the last one in\\n            // the array, and then remove the last element (sometimes called as 'swap and pop').\\n            // This modifies the order of the array, as noted in {at}.\\n\\n            uint256 toDeleteIndex = valueIndex - 1;\\n            uint256 lastIndex = set._values.length - 1;\\n\\n            if (lastIndex != toDeleteIndex) {\\n                bytes32 lastValue = set._values[lastIndex];\\n\\n                // Move the last value to the index where the value to delete is\\n                set._values[toDeleteIndex] = lastValue;\\n                // Update the index for the moved value\\n                set._indexes[lastValue] = valueIndex; // Replace lastValue's index to valueIndex\\n            }\\n\\n            // Delete the slot where the moved value was stored\\n            set._values.pop();\\n\\n            // Delete the index for the deleted slot\\n            delete set._indexes[value];\\n\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function _contains(Set storage set, bytes32 value) private view returns (bool) {\\n        return set._indexes[value] != 0;\\n    }\\n\\n    /**\\n     * @dev Returns the number of values on the set. O(1).\\n     */\\n    function _length(Set storage set) private view returns (uint256) {\\n        return set._values.length;\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function _at(Set storage set, uint256 index) private view returns (bytes32) {\\n        return set._values[index];\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function _values(Set storage set) private view returns (bytes32[] memory) {\\n        return set._values;\\n    }\\n\\n    // Bytes32Set\\n\\n    struct Bytes32Set {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        return _add(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        return _remove(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(Bytes32Set storage set, bytes32 value) internal view returns (bool) {\\n        return _contains(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Returns the number of values in the set. O(1).\\n     */\\n    function length(Bytes32Set storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(Bytes32Set storage set, uint256 index) internal view returns (bytes32) {\\n        return _at(set._inner, index);\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(Bytes32Set storage set) internal view returns (bytes32[] memory) {\\n        return _values(set._inner);\\n    }\\n\\n    // AddressSet\\n\\n    struct AddressSet {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(AddressSet storage set, address value) internal returns (bool) {\\n        return _add(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(AddressSet storage set, address value) internal returns (bool) {\\n        return _remove(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(AddressSet storage set, address value) internal view returns (bool) {\\n        return _contains(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Returns the number of values in the set. O(1).\\n     */\\n    function length(AddressSet storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(AddressSet storage set, uint256 index) internal view returns (address) {\\n        return address(uint160(uint256(_at(set._inner, index))));\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(AddressSet storage set) internal view returns (address[] memory) {\\n        bytes32[] memory store = _values(set._inner);\\n        address[] memory result;\\n\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            result := store\\n        }\\n\\n        return result;\\n    }\\n\\n    // UintSet\\n\\n    struct UintSet {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(UintSet storage set, uint256 value) internal returns (bool) {\\n        return _add(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(UintSet storage set, uint256 value) internal returns (bool) {\\n        return _remove(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(UintSet storage set, uint256 value) internal view returns (bool) {\\n        return _contains(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Returns the number of values on the set. O(1).\\n     */\\n    function length(UintSet storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(UintSet storage set, uint256 index) internal view returns (uint256) {\\n        return uint256(_at(set._inner, index));\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(UintSet storage set) internal view returns (uint256[] memory) {\\n        bytes32[] memory store = _values(set._inner);\\n        uint256[] memory result;\\n\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            result := store\\n        }\\n\\n        return result;\\n    }\\n}\\n\",\"keccak256\":\"0x5050943b32b6a8f282573d166b2e9d87ab7eb4dbba4ab6acf36ecb54fe6995e4\",\"license\":\"MIT\"},\"contracts/interfaces/IAddressResolver.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IAddressResolver {\\n    event AddressImported(bytes32 name, address destination);\\n\\n    function getAddress(bytes32 name, string calldata reason) external view returns (address);\\n\\n    function getAddress(bytes32 name) external view returns (address);\\n\\n    function getAddresses() external view returns (address[] memory);\\n}\\n\",\"keccak256\":\"0x85fea92a32d4ac0f08532d339ceeef07a468748ab7628bd2fd60980090e53a5d\",\"license\":\"MIT\"},\"contracts/interfaces/IBeaconProxyController.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IBeaconProxyController {\\n    event BeaconProxyCreated(\\n        bytes32 indexed id,\\n        address indexed proxyAddress,\\n        address indexed implementationAddress\\n    );\\n\\n    event BeaconProxyUpdated(\\n        bytes32 indexed id,\\n        address indexed proxyAddress,\\n        address indexed newImplementationAddress,\\n        address oldImplementationAddress\\n    );\\n\\n    function getBeaconProxyAddress(bytes32 beaconName) external view returns (address);\\n\\n    function setFutureValueVaultImpl(address newImpl) external;\\n\\n    function setLendingMarketImpl(address newImpl) external;\\n\\n    function deployFutureValueVault() external returns (address futureValueVault);\\n\\n    function deployLendingMarket(\\n        bytes32 _ccy,\\n        uint256 _genesisDate,\\n        uint256 _maturity\\n    ) external returns (address market);\\n}\\n\",\"keccak256\":\"0xc92a3f5ea6c065590788e5d3d7f259790c4f403e8f50af20ff1ea633badfd8e5\",\"license\":\"MIT\"},\"contracts/interfaces/ICurrencyController.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {Currency} from \\\"../storages/CurrencyControllerStorage.sol\\\";\\n\\n/**\\n * @dev Currency Controller contract is responsible for managing supported\\n * currencies in Secured Finance Protocol\\n *\\n * Contract links new currencies to ETH Chainlink price feeds, without existing price feed\\n * contract owner is not able to add a new currency into the protocol\\n */\\ninterface ICurrencyController {\\n    event AddCurrency(bytes32 indexed ccy, uint256 haircut);\\n    event RemoveCurrency(bytes32 indexed ccy);\\n\\n    event UpdateHaircut(bytes32 indexed ccy, uint256 haircut);\\n\\n    event AddPriceFeed(bytes32 ccy, string secondCcy, address indexed priceFeed);\\n    event RemovePriceFeed(bytes32 ccy, string secondCcy, address indexed priceFeed);\\n\\n    function convertFromETH(bytes32 _ccy, uint256 _amountETH)\\n        external\\n        view\\n        returns (uint256 amount);\\n\\n    function convertToETH(bytes32 _ccy, uint256 _amount) external view returns (uint256 amount);\\n\\n    function convertToETH(bytes32 _ccy, int256 _amount) external view returns (int256 amount);\\n\\n    function convertToETH(bytes32 _ccy, uint256[] memory _amounts)\\n        external\\n        view\\n        returns (uint256[] memory amounts);\\n\\n    function getEthDecimals(bytes32) external view returns (uint8);\\n\\n    function getUsdDecimals(bytes32) external view returns (uint8);\\n\\n    function getCurrencies() external view returns (bytes32[] memory);\\n\\n    function getHaircut(bytes32 _ccy) external view returns (uint256);\\n\\n    function getHistoricalETHPrice(bytes32 _ccy, uint80 _roundId) external view returns (int256);\\n\\n    function getHistoricalUSDPrice(bytes32 _ccy, uint80 _roundId) external view returns (int256);\\n\\n    function getLastETHPrice(bytes32 _ccy) external view returns (int256);\\n\\n    function getLastUSDPrice(bytes32 _ccy) external view returns (int256);\\n\\n    function currencyExists(bytes32 _ccy) external view returns (bool);\\n\\n    function linkPriceFeed(\\n        bytes32 _ccy,\\n        address _priceFeedAddr,\\n        bool _isEthPriceFeed\\n    ) external returns (bool);\\n\\n    function removePriceFeed(bytes32 _ccy, bool _isEthPriceFeed) external;\\n\\n    function addCurrency(\\n        bytes32 _ccy,\\n        address _ethPriceFeed,\\n        uint256 _haircut\\n    ) external;\\n\\n    function updateHaircut(bytes32 _ccy, uint256 _haircut) external;\\n\\n    function removeCurrency(bytes32 _ccy) external;\\n}\\n\",\"keccak256\":\"0xa06fb4afa7c9577db3b943b6abe5d4e297ef202cc72d8941ab150e708963e351\",\"license\":\"MIT\"},\"contracts/interfaces/IFutureValueVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IFutureValueVault {\\n    event Transfer(address indexed from, address indexed to, int256 value);\\n\\n    function getTotalLendingSupply(uint256 _maturity) external view returns (uint256);\\n\\n    function getTotalBorrowingSupply(uint256 _maturity) external view returns (uint256);\\n\\n    function getFutureValue(address _user)\\n        external\\n        view\\n        returns (int256 futureValue, uint256 maturity);\\n\\n    function hasFutureValueInPastMaturity(address _user, uint256 _maturity)\\n        external\\n        view\\n        returns (bool);\\n\\n    function addLendFutureValue(\\n        address _user,\\n        uint256 _amount,\\n        uint256 _maturity\\n    ) external returns (bool);\\n\\n    function addBorrowFutureValue(\\n        address _user,\\n        uint256 _amount,\\n        uint256 _maturity\\n    ) external returns (bool);\\n\\n    function removeFutureValue(address _user, uint256 _maturity)\\n        external\\n        returns (\\n            int256 removedAmount,\\n            int256 currentAmount,\\n            uint256 maturity\\n        );\\n}\\n\",\"keccak256\":\"0xb1b5c4dc86b463b0952f2c902a5bbe0dbeb83df579a02a3f34d51d74e28f36bd\",\"license\":\"MIT\"},\"contracts/interfaces/IGenesisValueVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {MaturityUnitPrice} from \\\"../storages/GenesisValueVaultStorage.sol\\\";\\n\\ninterface IGenesisValueVault {\\n    event Transfer(bytes32 indexed ccy, address indexed from, address indexed to, int256 value);\\n    event CompoundFactorUpdated(\\n        bytes32 indexed ccy,\\n        uint256 compoundFactor,\\n        uint256 unitPrice,\\n        uint256 currentMaturity,\\n        uint256 previousMaturity\\n    );\\n\\n    function isInitialized(bytes32 ccy) external view returns (bool);\\n\\n    function decimals(bytes32 ccy) external view returns (uint8);\\n\\n    function getTotalLendingSupply(bytes32 ccy) external view returns (uint256);\\n\\n    function getTotalBorrowingSupply(bytes32 ccy) external view returns (uint256);\\n\\n    function getGenesisValue(bytes32 ccy, address user) external view returns (int256);\\n\\n    function getCurrentMaturity(bytes32 ccy) external view returns (uint256);\\n\\n    function getCompoundFactor(bytes32 ccy) external view returns (uint256);\\n\\n    function getMaturityUnitPrice(bytes32 ccy, uint256 maturity)\\n        external\\n        view\\n        returns (MaturityUnitPrice memory);\\n\\n    function getGenesisValueInFutureValue(bytes32 ccy, address user) external view returns (int256);\\n\\n    function calculateCurrentFVFromFVInMaturity(\\n        bytes32 _ccy,\\n        uint256 _basisMaturity,\\n        int256 _futureValue\\n    ) external view returns (int256);\\n\\n    function calculateGVFromFV(\\n        bytes32 ccy,\\n        uint256 basisMaturity,\\n        int256 futureValue\\n    ) external view returns (int256);\\n\\n    function calculateFVFromGV(\\n        bytes32 ccy,\\n        uint256 basisMaturity,\\n        int256 genesisValue\\n    ) external view returns (int256);\\n\\n    function initialize(\\n        bytes32 ccy,\\n        uint8 decimals,\\n        uint256 compoundFactor,\\n        uint256 maturity\\n    ) external;\\n\\n    function updateCompoundFactor(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 nextMaturity,\\n        uint256 unitPrice\\n    ) external;\\n\\n    function addGenesisValue(\\n        bytes32 ccy,\\n        address user,\\n        uint256 basisMaturity,\\n        int256 futureValue\\n    ) external returns (bool);\\n\\n    function addGenesisValue(\\n        bytes32 ccy,\\n        address user,\\n        int256 amount\\n    ) external returns (bool);\\n}\\n\",\"keccak256\":\"0xf54297e7f9ab7be473c244b3c85c68c54124f4ff69867f54f6e5ce93dc536213\",\"license\":\"MIT\"},\"contracts/interfaces/ILendingMarket.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"../types/ProtocolTypes.sol\\\";\\nimport {MarketOrder} from \\\"../storages/LendingMarketStorage.sol\\\";\\n\\ninterface ILendingMarket {\\n    event CancelOrder(\\n        uint48 orderId,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 unitPrice\\n    );\\n    event MakeOrder(\\n        uint48 orderId,\\n        uint48 originalOrderId,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 unitPrice\\n    );\\n    event TakeOrders(\\n        address indexed taker,\\n        ProtocolTypes.Side side,\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 filledAmount,\\n        uint256 unitPrice,\\n        uint256 filledFutureValue\\n    );\\n\\n    event CleanOrders(\\n        uint48[] orderIds,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 indexed ccy,\\n        uint256 maturity\\n    );\\n\\n    event OpenMarket(uint256 maturity, uint256 prevMaturity);\\n\\n    struct Market {\\n        bytes32 ccy;\\n        uint256 maturity;\\n        uint256 genesisDate;\\n        uint256 borrowUnitPrice;\\n        uint256 lendUnitPrice;\\n        uint256 midUnitPrice;\\n    }\\n\\n    function getMarket() external view returns (Market memory);\\n\\n    function getBorrowUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getLendUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getMidUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getBorrowOrderBook(uint256 limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getLendOrderBook(uint256 limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getMaturity() external view returns (uint256);\\n\\n    function getCurrency() external view returns (bytes32);\\n\\n    function isMatured() external view returns (bool);\\n\\n    function isOpened() external view returns (bool);\\n\\n    function getOrder(uint48 _orderId)\\n        external\\n        view\\n        returns (\\n            ProtocolTypes.Side,\\n            uint256 unitPrice,\\n            uint256 maturity,\\n            address maker,\\n            uint256 amount,\\n            uint256 timestamp\\n        );\\n\\n    function getTotalAmountFromLendOrders(address _user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        );\\n\\n    function getTotalAmountFromBorrowOrders(address _user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        );\\n\\n    function getActiveLendOrderIds(address _user)\\n        external\\n        view\\n        returns (uint48[] memory activeOrderIds);\\n\\n    function getActiveBorrowOrderIds(address _user)\\n        external\\n        view\\n        returns (uint48[] memory activeOrderIds);\\n\\n    function estimateFilledAmount(ProtocolTypes.Side _side, uint256 _futureValue)\\n        external\\n        view\\n        returns (uint256 amount);\\n\\n    function openMarket(uint256 maturity) external returns (uint256);\\n\\n    function cancelOrder(address user, uint48 orderId)\\n        external\\n        returns (\\n            ProtocolTypes.Side,\\n            uint256,\\n            uint256\\n        );\\n\\n    function cleanOrders(address _user)\\n        external\\n        returns (\\n            uint256 activeLendOrderCount,\\n            uint256 activeBorrowOrderCount,\\n            uint256 removedLendOrderFutureValue,\\n            uint256 removedBorrowOrderFutureValue,\\n            uint256 removedLendOrderAmount,\\n            uint256 removedBorrowOrderAmount,\\n            uint256 maturity\\n        );\\n\\n    function createOrder(\\n        ProtocolTypes.Side side,\\n        address account,\\n        uint256 amount,\\n        uint256 unitPrice,\\n        bool ignoreRemainingAmount\\n    ) external returns (uint256 executedRate, uint256 remainingAmount);\\n\\n    function pauseMarket() external;\\n\\n    function unpauseMarket() external;\\n}\\n\",\"keccak256\":\"0xdaddf47c580c339bc1ffe7cb8f2990b1d93c0831b896d1d2ce18d56473b3a821\",\"license\":\"MIT\"},\"contracts/interfaces/ILendingMarketController.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"../types/ProtocolTypes.sol\\\";\\n\\ninterface ILendingMarketController {\\n    event CreateLendingMarket(\\n        bytes32 indexed ccy,\\n        address indexed marketAddr,\\n        address futureValueVault,\\n        uint256 index,\\n        uint256 maturity\\n    );\\n    event RotateLendingMarkets(bytes32 ccy, uint256 oldMaturity, uint256 newMaturity);\\n    event FillOrder(\\n        address indexed taker,\\n        bytes32 indexed ccy,\\n        ProtocolTypes.Side side,\\n        uint256 indexed maturity,\\n        uint256 amount,\\n        uint256 unitPrice,\\n        uint256 filledFutureValue\\n    );\\n    event FillOrdersAsync(\\n        address indexed taker,\\n        bytes32 indexed ccy,\\n        ProtocolTypes.Side side,\\n        uint256 indexed maturity,\\n        uint256 filledFutureValue\\n    );\\n    event CancelOrder(\\n        uint48 orderId,\\n        address indexed maker,\\n        bytes32 indexed ccy,\\n        ProtocolTypes.Side side,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 unitPrice\\n    );\\n    event Liquidate(\\n        address indexed user,\\n        bytes32 collateralCcy,\\n        bytes32 indexed debtCcy,\\n        uint256 indexed debtMaturity,\\n        uint256 amount\\n    );\\n\\n    function isLiquidator(address user) external view returns (bool);\\n\\n    function getGenesisDate(bytes32 ccy) external view returns (uint256);\\n\\n    function getLendingMarkets(bytes32 ccy) external view returns (address[] memory);\\n\\n    function getLendingMarket(bytes32 ccy, uint256 maturity) external view returns (address);\\n\\n    function getFutureValueVault(bytes32 ccy, uint256 maturity) external view returns (address);\\n\\n    function getBorrowUnitPrices(bytes32 ccy) external view returns (uint256[] memory unitPrices);\\n\\n    function getLendUnitPrices(bytes32 ccy) external view returns (uint256[] memory unitPrices);\\n\\n    function getMidUnitPrices(bytes32 ccy) external view returns (uint256[] memory unitPrices);\\n\\n    function getBorrowOrderBook(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 limit\\n    )\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getLendOrderBook(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 limit\\n    )\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getMaturities(bytes32 ccy) external view returns (uint256[] memory);\\n\\n    function getUsedCurrencies(address user) external view returns (bytes32[] memory);\\n\\n    function getFutureValue(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        address user\\n    ) external view returns (int256 futureValue);\\n\\n    function getPresentValue(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        address user\\n    ) external view returns (int256 presentValue);\\n\\n    function getTotalPresentValue(bytes32 ccy, address user) external view returns (int256);\\n\\n    function getTotalPresentValueInETH(address user)\\n        external\\n        view\\n        returns (int256 totalPresentValue);\\n\\n    function getOrderFeeRate(bytes32 ccy) external view returns (uint256);\\n\\n    function calculateLentFundsFromOrders(bytes32 ccy, address user)\\n        external\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 lentAmount\\n        );\\n\\n    function calculateBorrowedFundsFromOrders(bytes32 ccy, address user)\\n        external\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        );\\n\\n    function calculateFunds(bytes32 ccy, address user)\\n        external\\n        view\\n        returns (\\n            uint256 workingLendOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 collateralAmount,\\n            uint256 lentAmount,\\n            uint256 workingBorrowOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        );\\n\\n    function calculateTotalFundsInETH(\\n        address user,\\n        bytes32 depositCcy,\\n        uint256 depositAmount\\n    )\\n        external\\n        view\\n        returns (\\n            uint256 totalWorkingLendOrdersAmount,\\n            uint256 totalClaimableAmount,\\n            uint256 totalCollateralAmount,\\n            uint256 totalLentAmount,\\n            uint256 totalWorkingBorrowOrdersAmount,\\n            uint256 totalDebtAmount,\\n            uint256 totalBorrowedAmount,\\n            bool isEnoughDeposit\\n        );\\n\\n    function isInitializedLendingMarket(bytes32 ccy) external view returns (bool);\\n\\n    function initializeLendingMarket(\\n        bytes32 ccy,\\n        uint256 genesisDate,\\n        uint256 compoundFactor,\\n        uint256 orderFeeRate\\n    ) external;\\n\\n    function createLendingMarket(bytes32 ccy)\\n        external\\n        returns (address market, address futureValue);\\n\\n    function createOrder(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        ProtocolTypes.Side side,\\n        uint256 amount,\\n        uint256 unitPrice\\n    ) external returns (bool);\\n\\n    function depositAndCreateOrder(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        ProtocolTypes.Side side,\\n        uint256 amount,\\n        uint256 unitPrice\\n    ) external payable returns (bool);\\n\\n    function executeLiquidationCall(\\n        bytes32 collateralCcy,\\n        bytes32 debtCcy,\\n        uint256 debtMaturity,\\n        address user,\\n        uint24 poolFee\\n    ) external returns (bool);\\n\\n    function registerLiquidator(bool isLiquidator) external;\\n\\n    function cancelOrder(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint48 orderId\\n    ) external returns (bool);\\n\\n    function rotateLendingMarkets(bytes32 ccy) external;\\n\\n    function pauseLendingMarkets(bytes32 ccy) external returns (bool);\\n\\n    function unpauseLendingMarkets(bytes32 ccy) external returns (bool);\\n\\n    function updateOrderFeeRate(bytes32 ccy, uint256 orderFeeRate) external;\\n\\n    function cleanAllOrders(address user) external;\\n\\n    function cleanOrders(bytes32 ccy, address user) external returns (uint256 activeOrderCount);\\n}\\n\",\"keccak256\":\"0xdd7d9976197d82239f32cc436c37556b9ceb335d56c50c37aed2ce33efce1084\",\"license\":\"MIT\"},\"contracts/interfaces/IReserveFund.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IReserveFund {\\n    event Pause(address account);\\n    event Unpause(address account);\\n\\n    function isPaused() external view returns (bool);\\n\\n    function pause() external;\\n\\n    function unpause() external;\\n\\n    function deposit(bytes32 ccy, uint256 amount) external payable;\\n\\n    function withdraw(bytes32 ccy, uint256 amount) external;\\n}\\n\",\"keccak256\":\"0xa2a6df7a095ca8f8874d26672f75fe1f09c45caf041cb27d5e265bcb974a9754\",\"license\":\"MIT\"},\"contracts/interfaces/ITokenVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {ProtocolTypes} from \\\"../types/ProtocolTypes.sol\\\";\\n\\ninterface ITokenVault {\\n    event Deposit(address indexed user, bytes32 ccy, uint256 amount);\\n    event Withdraw(address indexed user, bytes32 ccy, uint256 amount);\\n    event RegisterCurrency(bytes32 ccy, address tokenAddress, bool isCollateral);\\n    event UpdateCurrency(bytes32 ccy, bool isCollateral);\\n    event Swap(\\n        address indexed user,\\n        bytes32 ccyIn,\\n        bytes32 ccyOut,\\n        uint256 amountIn,\\n        uint256 amountOut,\\n        uint256 liquidatorFee,\\n        uint256 protocolFee\\n    );\\n\\n    function isCovered(\\n        address user,\\n        bytes32 ccy,\\n        uint256 unsettledExp,\\n        ProtocolTypes.Side unsettledOrderSide\\n    ) external view returns (bool);\\n\\n    function isCovered(address user) external view returns (bool);\\n\\n    function isCollateral(bytes32 _ccy) external view returns (bool);\\n\\n    function isCollateral(bytes32[] calldata _ccys)\\n        external\\n        view\\n        returns (bool[] memory isCollateralCurrencies);\\n\\n    function isRegisteredCurrency(bytes32 ccy) external view returns (bool);\\n\\n    function getTokenAddress(bytes32 ccy) external view returns (address);\\n\\n    function getCollateralCurrencies() external view returns (bytes32[] memory);\\n\\n    function getWithdrawableCollateral(address user) external view returns (uint256 maxWithdraw);\\n\\n    function getCoverage(address user) external view returns (uint256 coverage);\\n\\n    function getUnusedCollateral(address user) external view returns (uint256);\\n\\n    function getTotalCollateralAmount(address party) external view returns (uint256);\\n\\n    function getLiquidationAmount(address user) external view returns (uint256 liquidationAmount);\\n\\n    function getTotalDepositAmount(bytes32 _ccy) external view returns (uint256);\\n\\n    function getDepositAmount(address user, bytes32 ccy) external view returns (uint256);\\n\\n    function getUsedCurrencies(address user) external view returns (bytes32[] memory);\\n\\n    function getCollateralParameters()\\n        external\\n        view\\n        returns (\\n            uint256 liquidationThresholdRate,\\n            uint256 liquidationProtocolFeeRate,\\n            uint256 liquidatorFeeRate,\\n            address uniswapRouter,\\n            address uniswapQuoter\\n        );\\n\\n    function setCollateralParameters(\\n        uint256 liquidationThresholdRate,\\n        uint256 liquidationProtocolFeeRate,\\n        uint256 liquidatorFeeRate,\\n        address uniswapRouter,\\n        address uniswapQuoter\\n    ) external;\\n\\n    function deposit(bytes32 ccy, uint256 amount) external payable;\\n\\n    function depositFrom(\\n        address user,\\n        bytes32 ccy,\\n        uint256 amount\\n    ) external payable;\\n\\n    function withdraw(bytes32 ccy, uint256 amount) external;\\n\\n    function addDepositAmount(\\n        address user,\\n        bytes32 ccy,\\n        uint256 amount\\n    ) external;\\n\\n    function removeDepositAmount(\\n        address user,\\n        bytes32 ccy,\\n        uint256 amount\\n    ) external;\\n\\n    function swapDepositAmounts(\\n        address liquidator,\\n        address user,\\n        bytes32 ccyFrom,\\n        bytes32 ccyTo,\\n        uint256 amountOut,\\n        uint24 poolFee,\\n        uint256 offsetAmount\\n    ) external returns (uint256 amountIn);\\n}\\n\",\"keccak256\":\"0xde1b9f00071f44b49b3787878e42b762e5102f4461cba69eb5b2f758e2ebb026\",\"license\":\"MIT\"},\"contracts/libraries/AddressResolverLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {Contracts} from \\\"../libraries/Contracts.sol\\\";\\nimport {IBeaconProxyController} from \\\"../interfaces/IBeaconProxyController.sol\\\";\\nimport {ICurrencyController} from \\\"../interfaces/ICurrencyController.sol\\\";\\nimport {IGenesisValueVault} from \\\"../interfaces/IGenesisValueVault.sol\\\";\\nimport {ILendingMarketController} from \\\"../interfaces/ILendingMarketController.sol\\\";\\nimport {IReserveFund} from \\\"../interfaces/IReserveFund.sol\\\";\\nimport {ITokenVault} from \\\"../interfaces/ITokenVault.sol\\\";\\nimport {MixinAddressResolverStorage as Storage} from \\\"../storages/MixinAddressResolverStorage.sol\\\";\\n\\nlibrary AddressResolverLib {\\n    function getAddress(bytes32 name) internal view returns (address) {\\n        address _foundAddress = Storage.slot().addressCache[name];\\n        require(_foundAddress != address(0), string(abi.encodePacked(\\\"Missing address: \\\", name)));\\n        return _foundAddress;\\n    }\\n\\n    function beaconProxyController() internal view returns (IBeaconProxyController) {\\n        return IBeaconProxyController(getAddress(Contracts.BEACON_PROXY_CONTROLLER));\\n    }\\n\\n    function currencyController() internal view returns (ICurrencyController) {\\n        return ICurrencyController(getAddress(Contracts.CURRENCY_CONTROLLER));\\n    }\\n\\n    function genesisValueVault() internal view returns (IGenesisValueVault) {\\n        return IGenesisValueVault(getAddress(Contracts.GENESIS_VALUE_VAULT));\\n    }\\n\\n    function lendingMarketController() internal view returns (ILendingMarketController) {\\n        return ILendingMarketController(getAddress(Contracts.LENDING_MARKET_CONTROLLER));\\n    }\\n\\n    function reserveFund() internal view returns (IReserveFund) {\\n        return IReserveFund(getAddress(Contracts.RESERVE_FUND));\\n    }\\n\\n    function tokenVault() internal view returns (ITokenVault) {\\n        return ITokenVault(getAddress(Contracts.TOKEN_VAULT));\\n    }\\n}\\n\",\"keccak256\":\"0x65d55399d6c8b753ddaa36c1370fae1c68dfbfb8b6b2d09b1717ba037b079998\",\"license\":\"MIT\"},\"contracts/libraries/Contracts.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nlibrary Contracts {\\n    bytes32 internal constant BEACON_PROXY_CONTROLLER = \\\"BeaconProxyController\\\";\\n    bytes32 internal constant CURRENCY_CONTROLLER = \\\"CurrencyController\\\";\\n    bytes32 internal constant GENESIS_VALUE_VAULT = \\\"GenesisValueVault\\\";\\n    bytes32 internal constant LENDING_MARKET_CONTROLLER = \\\"LendingMarketController\\\";\\n    bytes32 internal constant RESERVE_FUND = \\\"ReserveFund\\\";\\n    bytes32 internal constant TOKEN_VAULT = \\\"TokenVault\\\";\\n}\\n\\nlibrary BeaconContracts {\\n    bytes32 internal constant FUTURE_VALUE_VAULT = \\\"FutureValueVault\\\";\\n    bytes32 internal constant LENDING_MARKET = \\\"LendingMarket\\\";\\n}\\n\",\"keccak256\":\"0x8e73eead72efa03bcc03c1cdf72cdcebed0f7e6f5a58cda1fd74e0fc03f356e6\",\"license\":\"MIT\"},\"contracts/libraries/OrderStatisticsTreeLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\n// types\\nimport {ProtocolTypes} from \\\"../types/ProtocolTypes.sol\\\";\\n\\nstruct RemainingOrder {\\n    uint48 orderId;\\n    address maker;\\n    uint256 amount;\\n    uint256 unitPrice;\\n}\\n\\nstruct OrderItem {\\n    uint48 orderId;\\n    uint48 next;\\n    uint48 prev;\\n    address maker;\\n    uint256 timestamp;\\n    uint256 amount;\\n}\\n\\n/**\\n * @notice OrderStatisticsTreeLib is a Red-Black Tree binary search library\\n * based on the following library that is extended to manage order data.\\n *\\n * https://github.com/rob-Hitchens/OrderStatisticsTree\\n *\\n */\\nlibrary OrderStatisticsTreeLib {\\n    uint256 private constant EMPTY = 0;\\n\\n    struct Node {\\n        uint256 parent;\\n        uint256 left;\\n        uint256 right;\\n        bool red;\\n        uint48 head;\\n        uint48 tail;\\n        uint256 orderCounter;\\n        uint256 orderTotalAmount;\\n        mapping(uint256 => OrderItem) orders;\\n    }\\n\\n    struct Tree {\\n        uint256 root;\\n        mapping(uint256 => Node) nodes;\\n    }\\n\\n    function first(Tree storage self) internal view returns (uint256 _value) {\\n        _value = self.root;\\n        if (_value == EMPTY) return 0;\\n        while (self.nodes[_value].left != EMPTY) {\\n            _value = self.nodes[_value].left;\\n        }\\n    }\\n\\n    function last(Tree storage self) internal view returns (uint256 _value) {\\n        _value = self.root;\\n        if (_value == EMPTY) return 0;\\n        while (self.nodes[_value].right != EMPTY) {\\n            _value = self.nodes[_value].right;\\n        }\\n    }\\n\\n    function next(Tree storage self, uint256 value) internal view returns (uint256 _cursor) {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(401) - Starting value cannot be zero\\\");\\n        if (self.nodes[value].right != EMPTY) {\\n            _cursor = treeMinimum(self, self.nodes[value].right);\\n        } else {\\n            _cursor = self.nodes[value].parent;\\n            while (_cursor != EMPTY && value == self.nodes[_cursor].right) {\\n                value = _cursor;\\n                _cursor = self.nodes[_cursor].parent;\\n            }\\n        }\\n    }\\n\\n    function prev(Tree storage self, uint256 value) internal view returns (uint256 _cursor) {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(402) - Starting value cannot be zero\\\");\\n        if (self.nodes[value].left != EMPTY) {\\n            _cursor = treeMaximum(self, self.nodes[value].left);\\n        } else {\\n            _cursor = self.nodes[value].parent;\\n            while (_cursor != EMPTY && value == self.nodes[_cursor].left) {\\n                value = _cursor;\\n                _cursor = self.nodes[_cursor].parent;\\n            }\\n        }\\n    }\\n\\n    function exists(Tree storage self, uint256 value) internal view returns (bool _exists) {\\n        if (value == EMPTY) return false;\\n        if (value == self.root) return true;\\n        // if (self.nodes[value].parent != EMPTY) return true;\\n        uint256 cursor = value;\\n        while (self.nodes[cursor].parent != EMPTY) {\\n            uint256 parent = self.nodes[cursor].parent;\\n            if (self.nodes[parent].left != cursor && self.nodes[parent].right != cursor) {\\n                return false;\\n            }\\n            if (parent == self.root) {\\n                return true;\\n            }\\n            cursor = self.nodes[cursor].parent;\\n        }\\n        return false;\\n    }\\n\\n    function isActiveOrderId(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (bool) {\\n        return orderIdExists(self, value, orderId) && exists(self, value);\\n    }\\n\\n    function getNode(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (\\n            uint256,\\n            uint256,\\n            uint256,\\n            bool,\\n            uint256,\\n            uint256,\\n            uint256,\\n            uint256\\n        )\\n    {\\n        require(exists(self, value), \\\"OrderStatisticsTree(403) - Value does not exist.\\\");\\n        Node storage gn = self.nodes[value];\\n        return (\\n            gn.parent,\\n            gn.left,\\n            gn.right,\\n            gn.red,\\n            gn.head,\\n            gn.tail,\\n            gn.orderCounter,\\n            gn.orderTotalAmount\\n        );\\n    }\\n\\n    function getNodeCount(Tree storage self, uint256 value) internal view returns (uint256) {\\n        Node storage gn = self.nodes[value];\\n        return gn.orderCounter;\\n    }\\n\\n    function getNodeTotalAmount(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (uint256 totalAmount)\\n    {\\n        return self.nodes[value].orderTotalAmount;\\n    }\\n\\n    function getNodeOrderIds(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (uint48[] memory orderIds)\\n    {\\n        Node storage gn = self.nodes[value];\\n        OrderItem memory order = gn.orders[gn.head];\\n        orderIds = new uint48[](gn.orderCounter);\\n\\n        for (uint256 i = 0; i < gn.orderCounter; i++) {\\n            orderIds[i] = order.orderId;\\n            order = gn.orders[order.next];\\n        }\\n    }\\n\\n    function count(Tree storage self) internal view returns (uint256 _count) {\\n        return getNodeCount(self, self.root);\\n    }\\n\\n    function insert(Tree storage self, uint256 value) internal {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(405) - Value to insert cannot be zero\\\");\\n        uint256 cursor;\\n        uint256 probe = self.root;\\n        while (probe != EMPTY) {\\n            cursor = probe;\\n            if (value < probe) {\\n                probe = self.nodes[probe].left;\\n            } else if (value > probe) {\\n                probe = self.nodes[probe].right;\\n            } else if (value == probe) {\\n                return;\\n            }\\n        }\\n\\n        Node storage nValue = self.nodes[value];\\n        // Update order info as a new one if there is already an old node\\n        if (\\n            self.root == EMPTY ||\\n            (self.nodes[cursor].left != value && self.nodes[cursor].right != value)\\n        ) {\\n            nValue.orderCounter = 0;\\n            nValue.orderTotalAmount = 0;\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        }\\n        nValue.parent = cursor;\\n        nValue.left = EMPTY;\\n        nValue.right = EMPTY;\\n        nValue.red = true;\\n\\n        if (cursor == EMPTY) {\\n            self.root = value;\\n        } else if (value < cursor) {\\n            self.nodes[cursor].left = value;\\n        } else {\\n            self.nodes[cursor].right = value;\\n        }\\n        insertFixup(self, value);\\n    }\\n\\n    function remove(Tree storage self, uint256 value) internal {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(407) - Value to delete cannot be zero\\\");\\n        Node storage nValue = self.nodes[value];\\n        uint256 probe;\\n        uint256 cursor;\\n        if (nValue.orderCounter == 0) {\\n            if (self.nodes[value].left == EMPTY || self.nodes[value].right == EMPTY) {\\n                cursor = value;\\n            } else {\\n                cursor = self.nodes[value].right;\\n                while (self.nodes[cursor].left != EMPTY) {\\n                    cursor = self.nodes[cursor].left;\\n                }\\n            }\\n            if (self.nodes[cursor].left != EMPTY) {\\n                probe = self.nodes[cursor].left;\\n            } else {\\n                probe = self.nodes[cursor].right;\\n            }\\n            uint256 cursorParent = self.nodes[cursor].parent;\\n            self.nodes[probe].parent = cursorParent;\\n            if (cursorParent != EMPTY) {\\n                if (cursor == self.nodes[cursorParent].left) {\\n                    self.nodes[cursorParent].left = probe;\\n                } else {\\n                    self.nodes[cursorParent].right = probe;\\n                }\\n            } else {\\n                self.root = probe;\\n            }\\n            bool doFixup = !self.nodes[cursor].red;\\n            if (cursor != value) {\\n                replaceParent(self, cursor, value);\\n                self.nodes[cursor].left = self.nodes[value].left;\\n                self.nodes[self.nodes[cursor].left].parent = cursor;\\n                self.nodes[cursor].right = self.nodes[value].right;\\n                self.nodes[self.nodes[cursor].right].parent = cursor;\\n                self.nodes[cursor].red = self.nodes[value].red;\\n                (cursor, value) = (value, cursor);\\n            }\\n            if (doFixup) {\\n                removeFixup(self, probe);\\n            }\\n            delete self.nodes[cursor];\\n        }\\n    }\\n\\n    function treeMinimum(Tree storage self, uint256 value) private view returns (uint256) {\\n        while (self.nodes[value].left != EMPTY) {\\n            value = self.nodes[value].left;\\n        }\\n        return value;\\n    }\\n\\n    function treeMaximum(Tree storage self, uint256 value) private view returns (uint256) {\\n        while (self.nodes[value].right != EMPTY) {\\n            value = self.nodes[value].right;\\n        }\\n        return value;\\n    }\\n\\n    function rotateLeft(Tree storage self, uint256 value) private {\\n        uint256 cursor = self.nodes[value].right;\\n        uint256 parent = self.nodes[value].parent;\\n        uint256 cursorLeft = self.nodes[cursor].left;\\n        self.nodes[value].right = cursorLeft;\\n        if (cursorLeft != EMPTY) {\\n            self.nodes[cursorLeft].parent = value;\\n        }\\n        self.nodes[cursor].parent = parent;\\n        if (parent == EMPTY) {\\n            self.root = cursor;\\n        } else if (value == self.nodes[parent].left) {\\n            self.nodes[parent].left = cursor;\\n        } else {\\n            self.nodes[parent].right = cursor;\\n        }\\n        self.nodes[cursor].left = value;\\n        self.nodes[value].parent = cursor;\\n    }\\n\\n    function rotateRight(Tree storage self, uint256 value) private {\\n        uint256 cursor = self.nodes[value].left;\\n        uint256 parent = self.nodes[value].parent;\\n        uint256 cursorRight = self.nodes[cursor].right;\\n        self.nodes[value].left = cursorRight;\\n        if (cursorRight != EMPTY) {\\n            self.nodes[cursorRight].parent = value;\\n        }\\n        self.nodes[cursor].parent = parent;\\n        if (parent == EMPTY) {\\n            self.root = cursor;\\n        } else if (value == self.nodes[parent].right) {\\n            self.nodes[parent].right = cursor;\\n        } else {\\n            self.nodes[parent].left = cursor;\\n        }\\n        self.nodes[cursor].right = value;\\n        self.nodes[value].parent = cursor;\\n    }\\n\\n    function insertFixup(Tree storage self, uint256 value) private {\\n        uint256 cursor;\\n        while (value != self.root && self.nodes[self.nodes[value].parent].red) {\\n            uint256 valueParent = self.nodes[value].parent;\\n            if (valueParent == self.nodes[self.nodes[valueParent].parent].left) {\\n                cursor = self.nodes[self.nodes[valueParent].parent].right;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    value = self.nodes[valueParent].parent;\\n                } else {\\n                    if (value == self.nodes[valueParent].right) {\\n                        value = valueParent;\\n                        rotateLeft(self, value);\\n                    }\\n                    valueParent = self.nodes[value].parent;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    rotateRight(self, self.nodes[valueParent].parent);\\n                }\\n            } else {\\n                cursor = self.nodes[self.nodes[valueParent].parent].left;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    value = self.nodes[valueParent].parent;\\n                } else {\\n                    if (value == self.nodes[valueParent].left) {\\n                        value = valueParent;\\n                        rotateRight(self, value);\\n                    }\\n                    valueParent = self.nodes[value].parent;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    rotateLeft(self, self.nodes[valueParent].parent);\\n                }\\n            }\\n        }\\n        self.nodes[self.root].red = false;\\n    }\\n\\n    function replaceParent(\\n        Tree storage self,\\n        uint256 a,\\n        uint256 b\\n    ) private {\\n        uint256 bParent = self.nodes[b].parent;\\n        self.nodes[a].parent = bParent;\\n        if (bParent == EMPTY) {\\n            self.root = a;\\n        } else {\\n            if (b == self.nodes[bParent].left) {\\n                self.nodes[bParent].left = a;\\n            } else {\\n                self.nodes[bParent].right = a;\\n            }\\n        }\\n    }\\n\\n    function removeFixup(Tree storage self, uint256 value) private {\\n        uint256 cursor;\\n        while (value != self.root && !self.nodes[value].red) {\\n            uint256 valueParent = self.nodes[value].parent;\\n            if (value == self.nodes[valueParent].left) {\\n                cursor = self.nodes[valueParent].right;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[valueParent].red = true;\\n                    rotateLeft(self, valueParent);\\n                    cursor = self.nodes[valueParent].right;\\n                }\\n                if (\\n                    !self.nodes[self.nodes[cursor].left].red &&\\n                    !self.nodes[self.nodes[cursor].right].red\\n                ) {\\n                    self.nodes[cursor].red = true;\\n                    value = valueParent;\\n                } else {\\n                    if (!self.nodes[self.nodes[cursor].right].red) {\\n                        self.nodes[self.nodes[cursor].left].red = false;\\n                        self.nodes[cursor].red = true;\\n                        rotateRight(self, cursor);\\n                        cursor = self.nodes[valueParent].right;\\n                    }\\n                    self.nodes[cursor].red = self.nodes[valueParent].red;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[cursor].right].red = false;\\n                    rotateLeft(self, valueParent);\\n                    value = self.root;\\n                }\\n            } else {\\n                cursor = self.nodes[valueParent].left;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[valueParent].red = true;\\n                    rotateRight(self, valueParent);\\n                    cursor = self.nodes[valueParent].left;\\n                }\\n                if (\\n                    !self.nodes[self.nodes[cursor].right].red &&\\n                    !self.nodes[self.nodes[cursor].left].red\\n                ) {\\n                    self.nodes[cursor].red = true;\\n                    value = valueParent;\\n                } else {\\n                    if (!self.nodes[self.nodes[cursor].left].red) {\\n                        self.nodes[self.nodes[cursor].right].red = false;\\n                        self.nodes[cursor].red = true;\\n                        rotateLeft(self, cursor);\\n                        cursor = self.nodes[valueParent].left;\\n                    }\\n                    self.nodes[cursor].red = self.nodes[valueParent].red;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[cursor].left].red = false;\\n                    rotateRight(self, valueParent);\\n                    value = self.root;\\n                }\\n            }\\n        }\\n        self.nodes[value].red = false;\\n    }\\n\\n    function estimateDroppedAmountFromLeft(Tree storage self, uint256 targetFutureValue)\\n        internal\\n        view\\n        returns (uint256 droppedAmount)\\n    {\\n        uint256 cursor = first(self);\\n        uint256 totalDroppedAmountInFV = 0;\\n        droppedAmount = 0;\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (totalDroppedAmountInFV < targetFutureValue && cursor != EMPTY) {\\n            uint256 cursorNodeAmountInPV = self.nodes[cursor].orderTotalAmount;\\n\\n            uint256 cursorNodeAmountInFV = _calculateFutureValue(cursor, cursorNodeAmountInPV);\\n            totalDroppedAmountInFV += cursorNodeAmountInFV;\\n\\n            if (totalDroppedAmountInFV > targetFutureValue) {\\n                uint256 filledAmountInFV = cursorNodeAmountInFV -\\n                    (totalDroppedAmountInFV - targetFutureValue);\\n                droppedAmount += (cursorNodeAmountInPV * filledAmountInFV) / cursorNodeAmountInFV;\\n            } else {\\n                droppedAmount += cursorNodeAmountInPV;\\n            }\\n\\n            cursor = next(self, cursor);\\n        }\\n    }\\n\\n    function estimateDroppedAmountFromRight(Tree storage self, uint256 targetFutureValue)\\n        internal\\n        view\\n        returns (uint256 droppedAmount)\\n    {\\n        uint256 cursor = last(self);\\n        uint256 totalDroppedAmountInFV = 0;\\n        droppedAmount = 0;\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (totalDroppedAmountInFV < targetFutureValue && cursor != EMPTY) {\\n            uint256 cursorNodeAmountInPV = self.nodes[cursor].orderTotalAmount;\\n\\n            uint256 cursorNodeAmountInFV = _calculateFutureValue(cursor, cursorNodeAmountInPV);\\n            totalDroppedAmountInFV += cursorNodeAmountInFV;\\n\\n            if (totalDroppedAmountInFV > targetFutureValue) {\\n                uint256 filledAmountInFV = cursorNodeAmountInFV -\\n                    (totalDroppedAmountInFV - targetFutureValue);\\n                droppedAmount += (cursorNodeAmountInPV * filledAmountInFV) / cursorNodeAmountInFV;\\n            } else {\\n                droppedAmount += cursorNodeAmountInPV;\\n            }\\n\\n            cursor = prev(self, cursor);\\n        }\\n    }\\n\\n    function dropLeft(\\n        Tree storage self,\\n        uint256 amount,\\n        uint256 limitValue\\n    )\\n        internal\\n        returns (\\n            uint256 filledFutureValue,\\n            uint256 remainingAmount,\\n            RemainingOrder memory remainingOrder\\n        )\\n    {\\n        require(amount != EMPTY, \\\"OrderStatisticsTree(408) - Amount to drop cannot be zero\\\");\\n        uint256 value;\\n        uint256 cursor = first(self);\\n        uint256 lastNode = last(self);\\n        uint256 cursorNodeAmount = 0;\\n        uint256 totalAmount = 0;\\n\\n        require(cursor <= limitValue || limitValue == 0, \\\"Insufficient limit value\\\");\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (\\n            totalAmount < amount && cursor != EMPTY && (limitValue == 0 || cursor <= limitValue)\\n        ) {\\n            cursorNodeAmount = self.nodes[cursor].orderTotalAmount;\\n            totalAmount += cursorNodeAmount;\\n            value = cursor;\\n\\n            uint256 filledAmount = cursorNodeAmount -\\n                (totalAmount > amount ? totalAmount - amount : 0);\\n            filledFutureValue += _calculateFutureValue(cursor, filledAmount);\\n\\n            cursor = next(self, cursor);\\n        }\\n\\n        if (totalAmount >= amount || value == limitValue) {\\n            if (totalAmount > amount) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                uint256 filledNodeAmount = cursorNodeAmount - (totalAmount - amount);\\n                remainingOrder = fillOrders(self, cursor, filledNodeAmount);\\n            }\\n\\n            self.nodes[cursor].left = 0;\\n\\n            uint256 parent = self.nodes[cursor].parent;\\n\\n            while (parent != EMPTY) {\\n                if (parent > cursor) {\\n                    // Relink the nodes\\n                    if (self.nodes[cursor].parent != parent) {\\n                        self.nodes[cursor].parent = parent;\\n                        self.nodes[parent].left = cursor;\\n                    }\\n\\n                    cursor = parent;\\n                }\\n\\n                parent = self.nodes[parent].parent;\\n            }\\n        }\\n\\n        if (amount > totalAmount) {\\n            remainingAmount = amount - totalAmount;\\n        }\\n\\n        if (lastNode == value && self.nodes[lastNode].orderTotalAmount == 0) {\\n            // The case that all node is dropped.\\n            self.root = EMPTY;\\n        } else if (value > self.root || (value == self.root && amount >= totalAmount)) {\\n            // The case that the root node is dropped\\n            self.root = cursor;\\n            self.nodes[cursor].parent = 0;\\n        }\\n\\n        if (self.nodes[self.root].left == 0 && self.nodes[self.root].right != 0) {\\n            if (self.nodes[self.nodes[self.root].right].left != 0) {\\n                rotateRight(self, self.nodes[self.root].right);\\n            }\\n            rotateLeft(self, self.root);\\n        }\\n\\n        if (self.nodes[self.root].red) {\\n            self.nodes[self.root].red = false;\\n        }\\n    }\\n\\n    function dropRight(\\n        Tree storage self,\\n        uint256 amount,\\n        uint256 limitValue\\n    )\\n        internal\\n        returns (\\n            uint256 filledFutureValue,\\n            uint256 remainingAmount,\\n            RemainingOrder memory remainingOrder\\n        )\\n    {\\n        require(amount != EMPTY, \\\"OrderStatisticsTree(408) - Amount to drop cannot be zero\\\");\\n        uint256 value;\\n        uint256 cursor = last(self);\\n        uint256 firstNode = first(self);\\n        uint256 cursorNodeAmount = 0;\\n        uint256 totalAmount = 0;\\n\\n        require(cursor >= limitValue || limitValue == 0, \\\"Insufficient limit value\\\");\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (\\n            totalAmount < amount && cursor != EMPTY && (limitValue == 0 || cursor >= limitValue)\\n        ) {\\n            cursorNodeAmount = self.nodes[cursor].orderTotalAmount;\\n            totalAmount += cursorNodeAmount;\\n            value = cursor;\\n\\n            uint256 filledAmount = cursorNodeAmount -\\n                (totalAmount > amount ? totalAmount - amount : 0);\\n            filledFutureValue += _calculateFutureValue(cursor, filledAmount);\\n\\n            cursor = prev(self, cursor);\\n        }\\n\\n        if (totalAmount >= amount || value == limitValue) {\\n            if (totalAmount > amount) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                uint256 filledNodeAmount = cursorNodeAmount - (totalAmount - amount);\\n                remainingOrder = fillOrders(self, cursor, filledNodeAmount);\\n            }\\n\\n            self.nodes[cursor].right = 0;\\n\\n            uint256 parent = self.nodes[cursor].parent;\\n\\n            while (parent != EMPTY) {\\n                if (parent < cursor) {\\n                    // Relink the nodes\\n                    if (self.nodes[cursor].parent != parent) {\\n                        self.nodes[cursor].parent = parent;\\n                        self.nodes[parent].right = cursor;\\n                    }\\n\\n                    cursor = parent;\\n                }\\n\\n                parent = self.nodes[parent].parent;\\n            }\\n        }\\n\\n        if (amount > totalAmount) {\\n            remainingAmount = amount - totalAmount;\\n        }\\n\\n        if (firstNode == value && self.nodes[firstNode].orderTotalAmount == 0) {\\n            // The case that all node is dropped.\\n            self.root = EMPTY;\\n        } else if (value < self.root || (value == self.root && amount >= totalAmount)) {\\n            // The case that the root node is dropped\\n            self.root = cursor;\\n            self.nodes[cursor].parent = 0;\\n        }\\n\\n        if (self.nodes[self.root].right == 0 && self.nodes[self.root].left != 0) {\\n            if (self.nodes[self.nodes[self.root].left].right != 0) {\\n                rotateLeft(self, self.nodes[self.root].left);\\n            }\\n            rotateRight(self, self.root);\\n        }\\n\\n        if (self.nodes[self.root].red) {\\n            self.nodes[self.root].red = false;\\n        }\\n    }\\n\\n    function getFutureValue(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (uint256) {\\n        return _calculateFutureValue(value, self.nodes[value].orders[orderId].amount);\\n    }\\n\\n    // Double linked list functions\\n    /**\\n     * @dev Retrieves the Object denoted by `_id`.\\n     */\\n    function getOrderById(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (OrderItem memory) {\\n        Node storage gn = self.nodes[value];\\n        return gn.orders[orderId];\\n    }\\n\\n    /**\\n     * @dev Return boolean if value, amount and orderId exist in doubly linked list\\n     */\\n    function orderIdExists(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (bool) {\\n        uint48 cursor = orderId;\\n        Node storage gn = self.nodes[value];\\n        OrderItem memory order = gn.orders[cursor];\\n\\n        if (order.orderId != cursor) {\\n            return false;\\n        }\\n\\n        while (order.prev != EMPTY) {\\n            cursor = order.prev;\\n            order = gn.orders[cursor];\\n        }\\n\\n        return cursor == gn.head;\\n    }\\n\\n    function insertOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId,\\n        address user,\\n        uint256 amount,\\n        bool isInterruption\\n    ) internal {\\n        require(amount > 0, \\\"Insufficient amount\\\");\\n        require(value <= ProtocolTypes.PRICE_DIGIT, \\\"Insufficient value\\\");\\n        insert(self, value);\\n\\n        if (isInterruption) {\\n            addHead(self, value, orderId, user, amount);\\n        } else {\\n            addTail(self, value, orderId, user, amount);\\n        }\\n    }\\n\\n    function removeOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        amount = _removeOrder(self, value, orderId);\\n        remove(self, value);\\n    }\\n\\n    /**\\n     * @dev Reduces order amount once market order taken.\\n     */\\n    function fillOrders(\\n        Tree storage self,\\n        uint256 value,\\n        uint256 _amount\\n    ) internal returns (RemainingOrder memory remainingOrder) {\\n        Node storage gn = self.nodes[value];\\n\\n        require(\\n            gn.orderTotalAmount >= _amount,\\n            \\\"OrderStatisticsTree(410) - Amount to fill is insufficient\\\"\\n        );\\n\\n        uint256 remainingAmount = _amount;\\n        uint256 filledCount = 0;\\n        OrderItem memory currentOrder = gn.orders[gn.head];\\n        uint48 orderId = gn.head;\\n\\n        while (orderId != 0 && remainingAmount != 0) {\\n            currentOrder = gn.orders[orderId];\\n\\n            if (currentOrder.amount <= remainingAmount) {\\n                remainingAmount -= currentOrder.amount;\\n                orderId = currentOrder.next;\\n            } else {\\n                remainingOrder = RemainingOrder(\\n                    currentOrder.orderId,\\n                    currentOrder.maker,\\n                    currentOrder.amount - remainingAmount,\\n                    value\\n                );\\n                remainingAmount = 0;\\n            }\\n\\n            filledCount++;\\n        }\\n\\n        _dropOrders(self, value, currentOrder.orderId);\\n\\n        if (remainingOrder.amount > 0) {\\n            // NOTE: This order that the filled partially was dropped from a node, and the unfilled amount\\n            // will be inserted newly as a new orders.\\n            // However, that filled order amount is used when future value is calculated from inactive order.\\n            // For that calculation, this order amount needs to be updated by an actual filled amount at this point.\\n            OrderItem storage order = self.nodes[value].orders[currentOrder.orderId];\\n            order.amount -= remainingOrder.amount;\\n        }\\n    }\\n\\n    /**\\n     * @dev Insert a new OrderItem as the new Head with `_amount` in the amount field, and orderId.\\n     */\\n    function addHead(\\n        Tree storage self,\\n        uint256 _value,\\n        uint48 _orderId,\\n        address _user,\\n        uint256 _amount\\n    ) internal {\\n        Node storage gn = self.nodes[_value];\\n        uint48 orderId = _createOrder(self, _value, _orderId, _user, _amount);\\n        _link(self, _value, orderId, gn.head);\\n        _setHead(self, _value, orderId);\\n        if (gn.tail == 0) _setTail(self, _value, orderId);\\n    }\\n\\n    /**\\n     * @dev Insert a new OrderItem as the new Tail with `_amount` in the amount field, and orderId.\\n     */\\n    function addTail(\\n        Tree storage self,\\n        uint256 _value,\\n        uint48 _orderId,\\n        address _user,\\n        uint256 _amount\\n    ) internal {\\n        Node storage gn = self.nodes[_value];\\n\\n        if (gn.head == 0) {\\n            addHead(self, _value, _orderId, _user, _amount);\\n        } else {\\n            uint48 orderId = _createOrder(self, _value, _orderId, _user, _amount);\\n            _link(self, _value, gn.tail, orderId);\\n            _setTail(self, _value, orderId);\\n        }\\n    }\\n\\n    /**\\n     * @dev Internal function to create an unlinked Order.\\n     */\\n    function _createOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId,\\n        address user,\\n        uint256 amount\\n    ) internal returns (uint48) {\\n        Node storage gn = self.nodes[value];\\n        require(\\n            gn.orders[orderId].timestamp == 0,\\n            \\\"OrderStatisticsTree(409) - Order id already exist.\\\"\\n        );\\n\\n        gn.orderCounter += 1;\\n        gn.orderTotalAmount += amount;\\n        OrderItem memory order = OrderItem(orderId, 0, 0, user, block.timestamp, amount);\\n        gn.orders[orderId] = order;\\n        return order.orderId;\\n    }\\n\\n    /**\\n     * @dev Remove the OrderItem denoted by `_id` from the list.\\n     */\\n    function _removeOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        Node storage gn = self.nodes[value];\\n\\n        OrderItem memory order = gn.orders[orderId];\\n        amount = order.amount;\\n\\n        if (gn.head == orderId && gn.tail == orderId) {\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        } else if (gn.head == orderId) {\\n            _setHead(self, value, order.next);\\n            gn.orders[order.next].prev = 0;\\n        } else if (gn.tail == orderId) {\\n            _setTail(self, value, order.prev);\\n            gn.orders[order.prev].next = 0;\\n        } else {\\n            _link(self, value, order.prev, order.next);\\n        }\\n        delete gn.orders[order.orderId];\\n        gn.orderCounter -= 1;\\n        gn.orderTotalAmount -= order.amount;\\n    }\\n\\n    /**\\n     * @dev Drop the OrderItems older than or equal `orderId` from the list\\n     */\\n    function _dropOrders(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        Node storage gn = self.nodes[value];\\n\\n        OrderItem memory order = gn.orders[orderId];\\n        amount = order.amount;\\n        uint256 cursor = gn.head;\\n        uint256 removedCount = 1;\\n        uint256 removedAmount = gn.orders[cursor].amount;\\n\\n        while (cursor != orderId) {\\n            cursor = gn.orders[cursor].next;\\n            removedCount++;\\n            removedAmount += gn.orders[cursor].amount;\\n        }\\n\\n        if (gn.tail == orderId) {\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        } else {\\n            _setHead(self, value, order.next);\\n            gn.orders[order.next].prev = 0;\\n        }\\n\\n        gn.orderCounter -= removedCount;\\n        gn.orderTotalAmount -= removedAmount;\\n    }\\n\\n    /**\\n     * @dev Internal function to update the Head pointer.\\n     */\\n    function _setHead(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.head = orderId;\\n    }\\n\\n    /**\\n     * @dev Internal function to update the Tail pointer.\\n     */\\n    function _setTail(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.tail = orderId;\\n    }\\n\\n    /**\\n     * @dev Internal function to link an Object to another.\\n     */\\n    function _link(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 _prevId,\\n        uint48 _nextId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.orders[_prevId].next = _nextId;\\n        gn.orders[_nextId].prev = _prevId;\\n    }\\n\\n    function _calculateFutureValue(uint256 unitPrice, uint256 amount)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        return (amount * ProtocolTypes.PRICE_DIGIT) / unitPrice;\\n    }\\n}\\n\",\"keccak256\":\"0x50a2b1c27ae2a7bb2177421283c1157065f53e826fd46863e5ec18d8aa0ecd57\",\"license\":\"MIT\"},\"contracts/libraries/logics/FundCalculationLogic.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {EnumerableSet} from \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\n// interfaces\\nimport {ILendingMarket} from \\\"../../interfaces/ILendingMarket.sol\\\";\\nimport {IFutureValueVault} from \\\"../../interfaces/IFutureValueVault.sol\\\";\\n// libraries\\nimport {AddressResolverLib} from \\\"../AddressResolverLib.sol\\\";\\n// types\\nimport {ProtocolTypes} from \\\"../../types/ProtocolTypes.sol\\\";\\n// storages\\nimport {LendingMarketControllerStorage as Storage} from \\\"../../storages/LendingMarketControllerStorage.sol\\\";\\n\\nlibrary FundCalculationLogic {\\n    using EnumerableSet for EnumerableSet.Bytes32Set;\\n\\n    event UpdateOrderFeeRate(uint256 previousRate, uint256 ratio);\\n\\n    struct CalculatedAmountVars {\\n        address debtMarket;\\n        uint256 debtFVAmount;\\n        uint256 debtPVAmount;\\n        uint256 estimatedDebtPVAmount;\\n        uint256 liquidationPVAmount;\\n    }\\n\\n    struct CalculatedTotalFundInETHVars {\\n        bool[] isCollateral;\\n        bytes32 ccy;\\n        uint256[] amounts;\\n        uint256[] amountsInETH;\\n        uint256 plusDepositAmount;\\n        uint256 minusDepositAmount;\\n    }\\n\\n    function updateOrderFeeRate(bytes32 _ccy, uint256 _orderFeeRate) internal {\\n        require(_orderFeeRate <= ProtocolTypes.PCT_DIGIT, \\\"Invalid order fee rate\\\");\\n\\n        if (_orderFeeRate != Storage.slot().orderFeeRates[_ccy]) {\\n            emit UpdateOrderFeeRate(Storage.slot().orderFeeRates[_ccy], _orderFeeRate);\\n            Storage.slot().orderFeeRates[_ccy] = _orderFeeRate;\\n        }\\n    }\\n\\n    function calculateOrderFeeAmount(\\n        bytes32 _ccy,\\n        uint256 _amount,\\n        uint256 _maturity\\n    ) public view returns (uint256 orderFeeAmount) {\\n        require(block.timestamp < _maturity, \\\"Invalid maturity\\\");\\n        uint256 currentMaturity = _maturity - block.timestamp;\\n\\n        // NOTE: The formula is:\\n        // actualRate = feeRate * (currentMaturity / SECONDS_IN_YEAR)\\n        // orderFeeAmount = amount * actualRate\\n        orderFeeAmount =\\n            (Storage.slot().orderFeeRates[_ccy] * currentMaturity * _amount) /\\n            (ProtocolTypes.SECONDS_IN_YEAR * ProtocolTypes.PCT_DIGIT);\\n    }\\n\\n    function convertToLiquidationAmountFromCollateral(\\n        address _liquidator,\\n        address _user,\\n        bytes32 _collateralCcy,\\n        bytes32 _debtCcy,\\n        uint256 _debtMaturity,\\n        uint24 _poolFee\\n    ) public returns (uint256 liquidationPVAmount, uint256 offsetPVAmount) {\\n        CalculatedAmountVars memory vars;\\n\\n        uint256 liquidationPVAmountInETH = AddressResolverLib.tokenVault().getLiquidationAmount(\\n            _user\\n        );\\n        require(liquidationPVAmountInETH != 0, \\\"User has enough collateral\\\");\\n\\n        int256 futureValueAmount = calculateActualFutureValue(_debtCcy, _debtMaturity, _user);\\n        require(futureValueAmount < 0, \\\"No debt in the selected maturity\\\");\\n\\n        vars.debtMarket = Storage.slot().maturityLendingMarkets[_debtCcy][_debtMaturity];\\n        vars.debtFVAmount = uint256(-futureValueAmount);\\n        vars.debtPVAmount = uint256(\\n            _calculatePVFromFVInMaturity(\\n                _debtCcy,\\n                _debtMaturity,\\n                -futureValueAmount,\\n                vars.debtMarket\\n            )\\n        );\\n\\n        vars.liquidationPVAmount = AddressResolverLib.currencyController().convertFromETH(\\n            _debtCcy,\\n            liquidationPVAmountInETH\\n        );\\n\\n        // If the debt amount is less than the liquidation amount, the debt amount is used as the liquidation amount.\\n        // In that case, the actual liquidation ratio is under the liquidation threshold ratio.\\n        vars.liquidationPVAmount = vars.liquidationPVAmount > vars.debtPVAmount\\n            ? vars.debtPVAmount\\n            : vars.liquidationPVAmount;\\n\\n        if (!AddressResolverLib.reserveFund().isPaused()) {\\n            // Offset the user's debt using the future value amount and the genesis value amount hold by the reserve fund contract.\\n            // Before this step, the target user's order must be cleaned up by `LendingMarketController#cleanOrders` function.\\n            // If the target market is the nearest market(default market), the genesis value is used for the offset.\\n            bool isDefaultMarket = Storage.slot().maturityLendingMarkets[_debtCcy][_debtMaturity] ==\\n                Storage.slot().lendingMarkets[_debtCcy][0];\\n\\n            if (isDefaultMarket) {\\n                int256 offsetGVAmount = _offsetGenesisValue(\\n                    _debtCcy,\\n                    address(AddressResolverLib.reserveFund()),\\n                    _user,\\n                    AddressResolverLib.genesisValueVault().calculateGVFromFV(\\n                        _debtCcy,\\n                        _debtMaturity,\\n                        int256(vars.liquidationPVAmount)\\n                    )\\n                );\\n\\n                if (offsetGVAmount > 0) {\\n                    offsetPVAmount = uint256(\\n                        _calculatePVFromFVInMaturity(\\n                            _debtCcy,\\n                            _debtMaturity,\\n                            AddressResolverLib.genesisValueVault().calculateFVFromGV(\\n                                _debtCcy,\\n                                _debtMaturity,\\n                                offsetGVAmount\\n                            ),\\n                            vars.debtMarket\\n                        )\\n                    );\\n                }\\n            }\\n\\n            uint256 offsetFVAmount = _offsetFutureValue(\\n                _debtCcy,\\n                _debtMaturity,\\n                address(AddressResolverLib.reserveFund()),\\n                _user,\\n                _calculateFVFromPV(\\n                    _debtCcy,\\n                    _debtMaturity,\\n                    vars.liquidationPVAmount - offsetPVAmount\\n                )\\n            );\\n\\n            if (offsetFVAmount > 0) {\\n                offsetPVAmount += uint256(\\n                    _calculatePVFromFVInMaturity(\\n                        _debtCcy,\\n                        _debtMaturity,\\n                        int256(offsetFVAmount),\\n                        vars.debtMarket\\n                    )\\n                );\\n            }\\n        }\\n\\n        // Estimate the filled amount from actual orders in the order book using the future value of user debt.\\n        // If the estimated amount is less than the liquidation amount, the estimated amount is used as\\n        // the liquidation amount.\\n        vars.estimatedDebtPVAmount = ILendingMarket(\\n            Storage.slot().maturityLendingMarkets[_debtCcy][_debtMaturity]\\n        ).estimateFilledAmount(ProtocolTypes.Side.LEND, vars.debtFVAmount);\\n\\n        uint256 swapPVAmount = vars.liquidationPVAmount > vars.estimatedDebtPVAmount\\n            ? vars.estimatedDebtPVAmount\\n            : vars.liquidationPVAmount;\\n\\n        // Swap collateral from deposited currency to debt currency using Uniswap.\\n        // This swapped collateral is used to unwind the debt.\\n        liquidationPVAmount = AddressResolverLib.tokenVault().swapDepositAmounts(\\n            _liquidator,\\n            _user,\\n            _collateralCcy,\\n            _debtCcy,\\n            swapPVAmount,\\n            _poolFee,\\n            offsetPVAmount\\n        );\\n    }\\n\\n    function calculateActualFutureValue(\\n        bytes32 _ccy,\\n        uint256 _maturity,\\n        address _user\\n    ) public view returns (int256 futureValue) {\\n        address market = Storage.slot().maturityLendingMarkets[_ccy][_maturity];\\n        bool isDefaultMarket = market == Storage.slot().lendingMarkets[_ccy][0];\\n\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address currentMarket = Storage.slot().lendingMarkets[_ccy][i];\\n            uint256 currentMaturity = ILendingMarket(currentMarket).getMaturity();\\n\\n            if (isDefaultMarket || currentMarket == market) {\\n                // Get FV from Future Value Vault\\n                (int256 futureValueInMaturity, uint256 fvMaturity) = IFutureValueVault(\\n                    Storage.slot().futureValueVaults[_ccy][currentMarket]\\n                ).getFutureValue(_user);\\n\\n                if (isDefaultMarket && (i == 0 || currentMaturity != fvMaturity)) {\\n                    futureValue += _calculateCurrentFVFromFVInMaturity(\\n                        _ccy,\\n                        fvMaturity,\\n                        futureValueInMaturity,\\n                        currentMarket\\n                    );\\n                } else if (!isDefaultMarket && currentMaturity == fvMaturity) {\\n                    futureValue += futureValueInMaturity;\\n                }\\n\\n                // Get FV from inactive borrow orders\\n                (, , uint256 borrowFVInMaturity, uint256 borrowOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromBorrowOrders(_user);\\n\\n                if (isDefaultMarket && (i == 0 || currentMaturity != borrowOrdersMaturity)) {\\n                    futureValue -= _calculateCurrentFVFromFVInMaturity(\\n                        _ccy,\\n                        borrowOrdersMaturity,\\n                        int256(borrowFVInMaturity),\\n                        currentMarket\\n                    );\\n                } else if (!isDefaultMarket && currentMaturity == borrowOrdersMaturity) {\\n                    futureValue -= int256(borrowFVInMaturity);\\n                }\\n\\n                // Get FV from inactive lend orders\\n                (, , uint256 lendFVInMaturity, uint256 lendOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromLendOrders(_user);\\n\\n                if ((isDefaultMarket && (i == 0 || currentMaturity != lendOrdersMaturity))) {\\n                    futureValue += _calculateCurrentFVFromFVInMaturity(\\n                        _ccy,\\n                        lendOrdersMaturity,\\n                        int256(lendFVInMaturity),\\n                        currentMarket\\n                    );\\n                } else if (!isDefaultMarket && currentMaturity == lendOrdersMaturity) {\\n                    futureValue += int256(lendFVInMaturity);\\n                }\\n            }\\n        }\\n\\n        // Add FV from Genesis Value Vault if the market is that the lending position is rolled to.\\n        if (isDefaultMarket) {\\n            futureValue += AddressResolverLib.genesisValueVault().getGenesisValueInFutureValue(\\n                _ccy,\\n                _user\\n            );\\n        }\\n    }\\n\\n    function calculateActualPresentValue(\\n        bytes32 _ccy,\\n        uint256 _maturity,\\n        address _user\\n    ) public view returns (int256 presentValue) {\\n        address market = Storage.slot().maturityLendingMarkets[_ccy][_maturity];\\n        bool isDefaultMarket = market == Storage.slot().lendingMarkets[_ccy][0];\\n\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address currentMarket = Storage.slot().lendingMarkets[_ccy][i];\\n            uint256 currentMaturity = ILendingMarket(currentMarket).getMaturity();\\n\\n            if (isDefaultMarket || currentMarket == market) {\\n                // Get PV from Future Value Vault\\n                (int256 futureValueInMaturity, uint256 fvMaturity) = IFutureValueVault(\\n                    Storage.slot().futureValueVaults[_ccy][currentMarket]\\n                ).getFutureValue(_user);\\n\\n                if (\\n                    (isDefaultMarket && (i == 0 || currentMaturity != fvMaturity)) ||\\n                    (!isDefaultMarket && currentMaturity == fvMaturity)\\n                ) {\\n                    presentValue += _calculatePVFromFVInMaturity(\\n                        _ccy,\\n                        fvMaturity,\\n                        futureValueInMaturity,\\n                        currentMarket\\n                    );\\n                }\\n\\n                // Get PV from inactive borrow orders\\n                (, , uint256 borrowFVInMaturity, uint256 borrowOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromBorrowOrders(_user);\\n\\n                if (\\n                    (isDefaultMarket && (i == 0 || currentMaturity != borrowOrdersMaturity)) ||\\n                    (!isDefaultMarket && currentMaturity == borrowOrdersMaturity)\\n                ) {\\n                    presentValue -= _calculatePVFromFVInMaturity(\\n                        _ccy,\\n                        borrowOrdersMaturity,\\n                        int256(borrowFVInMaturity),\\n                        currentMarket\\n                    );\\n                }\\n\\n                // Get PV from inactive lend orders\\n                (, , uint256 lendFVInMaturity, uint256 lendOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromLendOrders(_user);\\n\\n                if (\\n                    (isDefaultMarket && (i == 0 || currentMaturity != lendOrdersMaturity)) ||\\n                    (!isDefaultMarket && currentMaturity == lendOrdersMaturity)\\n                ) {\\n                    presentValue += _calculatePVFromFVInMaturity(\\n                        _ccy,\\n                        lendOrdersMaturity,\\n                        int256(lendFVInMaturity),\\n                        currentMarket\\n                    );\\n                }\\n            }\\n        }\\n\\n        // Add PV from Genesis Value Vault if the market is that the lending position is rolled to.\\n        if (isDefaultMarket) {\\n            presentValue += _calculatePVFromFV(\\n                AddressResolverLib.genesisValueVault().getGenesisValueInFutureValue(_ccy, _user),\\n                ILendingMarket(Storage.slot().lendingMarkets[_ccy][0]).getMidUnitPrice()\\n            );\\n        }\\n    }\\n\\n    function calculateActualPresentValue(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (int256 totalPresentValue)\\n    {\\n        // Get PV from Future Value Vault and Genesis Value Vault.\\n        totalPresentValue = _getTotalPresentValue(_ccy, _user);\\n\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address market = Storage.slot().lendingMarkets[_ccy][i];\\n\\n            // Get PV from inactive borrow orders\\n            (, , uint256 borrowFVInMaturity, uint256 borrowOrdersMaturity) = ILendingMarket(market)\\n                .getTotalAmountFromBorrowOrders(_user);\\n\\n            totalPresentValue -= _calculatePVFromFVInMaturity(\\n                _ccy,\\n                borrowOrdersMaturity,\\n                int256(borrowFVInMaturity),\\n                market\\n            );\\n\\n            // Get PV from inactive lend orders\\n            (, , uint256 lendFVInMaturity, uint256 lendOrdersMaturity) = ILendingMarket(market)\\n                .getTotalAmountFromLendOrders(_user);\\n\\n            totalPresentValue += _calculatePVFromFVInMaturity(\\n                _ccy,\\n                lendOrdersMaturity,\\n                int256(lendFVInMaturity),\\n                market\\n            );\\n        }\\n    }\\n\\n    function calculateLentFundsFromOrders(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (\\n            uint256 totalWorkingOrdersAmount,\\n            uint256 totalClaimableAmount,\\n            uint256 totalLentAmount\\n        )\\n    {\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            (\\n                uint256 workingOrdersAmount,\\n                uint256 claimableAmount,\\n                uint256 lentAmount\\n            ) = _calculateLentFundsFromOrders(_ccy, Storage.slot().lendingMarkets[_ccy][i], _user);\\n\\n            totalWorkingOrdersAmount += workingOrdersAmount;\\n            totalClaimableAmount += claimableAmount;\\n            totalLentAmount += lentAmount;\\n        }\\n    }\\n\\n    function calculateBorrowedFundsFromOrders(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (\\n            uint256 totalWorkingOrdersAmount,\\n            uint256 totalDebtAmount,\\n            uint256 totalBorrowedAmount\\n        )\\n    {\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            (\\n                uint256 workingOrdersAmount,\\n                uint256 debtAmount,\\n                uint256 borrowedAmount\\n            ) = _calculateBorrowedFundsFromOrders(\\n                    _ccy,\\n                    Storage.slot().lendingMarkets[_ccy][i],\\n                    _user\\n                );\\n\\n            totalWorkingOrdersAmount += workingOrdersAmount;\\n            totalDebtAmount += debtAmount;\\n            totalBorrowedAmount += borrowedAmount;\\n        }\\n    }\\n\\n    function calculateLentFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        public\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 lentAmount\\n        )\\n    {\\n        return _calculateLentFundsFromOrders(_ccy, _market, _user);\\n    }\\n\\n    function calculateBorrowedFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        public\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        )\\n    {\\n        return _calculateBorrowedFundsFromOrders(_ccy, _market, _user);\\n    }\\n\\n    function calculateFunds(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (\\n            uint256 workingLendOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 collateralAmount,\\n            uint256 lentAmount,\\n            uint256 workingBorrowOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        )\\n    {\\n        (workingLendOrdersAmount, claimableAmount, lentAmount) = calculateLentFundsFromOrders(\\n            _ccy,\\n            _user\\n        );\\n        (workingBorrowOrdersAmount, debtAmount, borrowedAmount) = calculateBorrowedFundsFromOrders(\\n            _ccy,\\n            _user\\n        );\\n        collateralAmount = claimableAmount;\\n\\n        // Calculate total present value from Future Value Vault and Genesis Value Vault.\\n        int256 totalPresentValue = _getTotalPresentValue(_ccy, _user);\\n        if (totalPresentValue >= 0) {\\n            // Add to claimableAmount\\n            claimableAmount += uint256(totalPresentValue);\\n        } else {\\n            // Add to debtAmount\\n            debtAmount += uint256(-totalPresentValue);\\n        }\\n\\n        if (claimableAmount > 0) {\\n            uint256 haircut = AddressResolverLib.currencyController().getHaircut(_ccy);\\n            collateralAmount = (claimableAmount * haircut) / ProtocolTypes.PCT_DIGIT;\\n        }\\n    }\\n\\n    function calculateTotalFundsInETH(\\n        address _user,\\n        bytes32 _depositCcy,\\n        uint256 _depositAmount\\n    )\\n        external\\n        view\\n        returns (\\n            uint256 totalWorkingLendOrdersAmount,\\n            uint256 totalClaimableAmount,\\n            uint256 totalCollateralAmount,\\n            uint256 totalLentAmount,\\n            uint256 totalWorkingBorrowOrdersAmount,\\n            uint256 totalDebtAmount,\\n            uint256 totalBorrowedAmount,\\n            bool isEnoughDeposit\\n        )\\n    {\\n        EnumerableSet.Bytes32Set storage currencySet = Storage.slot().usedCurrencies[_user];\\n        CalculatedTotalFundInETHVars memory vars;\\n\\n        vars.isCollateral = AddressResolverLib.tokenVault().isCollateral(currencySet.values());\\n        vars.plusDepositAmount = _depositAmount;\\n\\n        // Calculate total funds from the user's order list\\n        for (uint256 i = 0; i < currencySet.length(); i++) {\\n            vars.ccy = currencySet.at(i);\\n            vars.amounts = new uint256[](7);\\n\\n            // 0: workingLendOrdersAmount\\n            // 1: claimableAmount\\n            // 2: collateralAmount\\n            // 3: lentAmount\\n            // 4: workingBorrowOrdersAmount\\n            // 5: debtAmount\\n            // 6: borrowedAmount\\n            (\\n                vars.amounts[0],\\n                vars.amounts[1],\\n                vars.amounts[2],\\n                vars.amounts[3],\\n                vars.amounts[4],\\n                vars.amounts[5],\\n                vars.amounts[6]\\n            ) = calculateFunds(vars.ccy, _user);\\n\\n            if (vars.ccy == _depositCcy) {\\n                // plusDepositAmount: depositAmount + borrowedAmount\\n                // minusDepositAmount: workingLendOrdersAmount + lentAmount;\\n                vars.plusDepositAmount += vars.amounts[6];\\n                vars.minusDepositAmount += vars.amounts[0] + vars.amounts[3];\\n            }\\n\\n            vars.amountsInETH = AddressResolverLib.currencyController().convertToETH(\\n                vars.ccy,\\n                vars.amounts\\n            );\\n\\n            totalWorkingLendOrdersAmount += vars.amountsInETH[0];\\n            totalClaimableAmount += vars.amountsInETH[1];\\n            totalCollateralAmount += vars.amountsInETH[2];\\n            totalWorkingBorrowOrdersAmount += vars.amountsInETH[4];\\n            totalDebtAmount += vars.amountsInETH[5];\\n\\n            if (vars.isCollateral[i]) {\\n                totalLentAmount += vars.amountsInETH[3];\\n                totalBorrowedAmount += vars.amountsInETH[6];\\n            }\\n        }\\n\\n        isEnoughDeposit = vars.plusDepositAmount >= vars.minusDepositAmount;\\n    }\\n\\n    function _calculateCurrentFVFromFVInMaturity(\\n        bytes32 _ccy,\\n        uint256 maturity,\\n        int256 futureValueInMaturity,\\n        address lendingMarketInMaturity\\n    ) internal view returns (int256 futureValue) {\\n        if (\\n            AddressResolverLib\\n                .genesisValueVault()\\n                .getMaturityUnitPrice(_ccy, maturity)\\n                .compoundFactor == 0\\n        ) {\\n            uint256 unitPriceInMaturity = ILendingMarket(lendingMarketInMaturity).getMidUnitPrice();\\n            int256 presetValue = _calculatePVFromFV(futureValueInMaturity, unitPriceInMaturity);\\n            uint256 currentUnitPrice = ILendingMarket(Storage.slot().lendingMarkets[_ccy][0])\\n                .getMidUnitPrice();\\n\\n            futureValue =\\n                (presetValue * int256(ProtocolTypes.PRICE_DIGIT)) /\\n                int256(currentUnitPrice);\\n        } else {\\n            futureValue = AddressResolverLib.genesisValueVault().calculateCurrentFVFromFVInMaturity(\\n                    _ccy,\\n                    maturity,\\n                    futureValueInMaturity\\n                );\\n        }\\n    }\\n\\n    function _calculateFVFromPV(\\n        bytes32 _ccy,\\n        uint256 _maturity,\\n        uint256 _presentValue\\n    ) internal view returns (uint256) {\\n        uint256 unitPrice = ILendingMarket(Storage.slot().maturityLendingMarkets[_ccy][_maturity])\\n            .getMidUnitPrice();\\n\\n        // NOTE: The formula is: futureValue = presentValue / unitPrice.\\n        return (_presentValue * ProtocolTypes.PRICE_DIGIT) / unitPrice;\\n    }\\n\\n    function _calculatePVFromFVInMaturity(\\n        bytes32 _ccy,\\n        uint256 maturity,\\n        int256 futureValueInMaturity,\\n        address lendingMarketInMaturity\\n    ) internal view returns (int256 totalPresentValue) {\\n        uint256 compoundFactorInMaturity = AddressResolverLib\\n            .genesisValueVault()\\n            .getMaturityUnitPrice(_ccy, maturity)\\n            .compoundFactor;\\n        int256 futureValue;\\n        uint256 unitPrice;\\n\\n        if (compoundFactorInMaturity == 0) {\\n            futureValue = futureValueInMaturity;\\n            unitPrice = ILendingMarket(lendingMarketInMaturity).getMidUnitPrice();\\n        } else {\\n            futureValue = AddressResolverLib.genesisValueVault().calculateCurrentFVFromFVInMaturity(\\n                    _ccy,\\n                    maturity,\\n                    futureValueInMaturity\\n                );\\n            unitPrice = ILendingMarket(Storage.slot().lendingMarkets[_ccy][0]).getMidUnitPrice();\\n        }\\n\\n        return _calculatePVFromFV(futureValue, unitPrice);\\n    }\\n\\n    function _calculatePVFromFV(int256 _futureValue, uint256 _unitPrice)\\n        internal\\n        pure\\n        returns (int256)\\n    {\\n        // NOTE: The formula is: presentValue = futureValue * unitPrice.\\n        return (_futureValue * int256(_unitPrice)) / int256(ProtocolTypes.PRICE_DIGIT);\\n    }\\n\\n    function _getTotalPresentValue(bytes32 _ccy, address _user)\\n        internal\\n        view\\n        returns (int256 totalPresentValue)\\n    {\\n        // Get PV from Future Value Vault\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address marketAddr = Storage.slot().lendingMarkets[_ccy][i];\\n            (int256 futureValueInMaturity, uint256 maturity) = IFutureValueVault(\\n                Storage.slot().futureValueVaults[_ccy][marketAddr]\\n            ).getFutureValue(_user);\\n\\n            totalPresentValue += _calculatePVFromFVInMaturity(\\n                _ccy,\\n                maturity,\\n                futureValueInMaturity,\\n                Storage.slot().lendingMarkets[_ccy][i]\\n            );\\n        }\\n\\n        // Get PV from Genesis Value Vault\\n        totalPresentValue += _calculatePVFromFV(\\n            AddressResolverLib.genesisValueVault().getGenesisValueInFutureValue(_ccy, _user),\\n            ILendingMarket(Storage.slot().lendingMarkets[_ccy][0]).getMidUnitPrice()\\n        );\\n    }\\n\\n    function _calculateLentFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        internal\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 lentAmount\\n        )\\n    {\\n        (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValueInMaturity,\\n            uint256 maturity\\n        ) = ILendingMarket(_market).getTotalAmountFromLendOrders(_user);\\n\\n        workingOrdersAmount = activeAmount;\\n        claimableAmount = uint256(\\n            _calculatePVFromFVInMaturity(\\n                _ccy,\\n                maturity,\\n                int256(inactiveFutureValueInMaturity),\\n                _market\\n            )\\n        );\\n        lentAmount = inactiveAmount;\\n    }\\n\\n    function _calculateBorrowedFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        internal\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        )\\n    {\\n        (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValueInMaturity,\\n            uint256 maturity\\n        ) = ILendingMarket(_market).getTotalAmountFromBorrowOrders(_user);\\n\\n        workingOrdersAmount = activeAmount;\\n        debtAmount = uint256(\\n            _calculatePVFromFVInMaturity(\\n                _ccy,\\n                maturity,\\n                int256(inactiveFutureValueInMaturity),\\n                _market\\n            )\\n        );\\n        borrowedAmount = inactiveAmount;\\n    }\\n\\n    function _offsetFutureValue(\\n        bytes32 _ccy,\\n        uint256 _maturity,\\n        address _lender,\\n        address _borrower,\\n        uint256 _maximumFVAmount\\n    ) internal returns (uint256 offsetAmount) {\\n        address market = Storage.slot().maturityLendingMarkets[_ccy][_maturity];\\n        address futureValueVault = Storage.slot().futureValueVaults[_ccy][market];\\n\\n        (int256 lenderFVAmount, uint256 lenderMaturity) = IFutureValueVault(futureValueVault)\\n            .getFutureValue(_lender);\\n        (int256 borrowerFVAmount, uint256 borrowerMaturity) = IFutureValueVault(futureValueVault)\\n            .getFutureValue(_borrower);\\n\\n        if (lenderFVAmount <= 0 || borrowerFVAmount >= 0) {\\n            return 0;\\n        }\\n\\n        if (lenderMaturity == borrowerMaturity) {\\n            offsetAmount = uint256(lenderFVAmount);\\n\\n            if (-borrowerFVAmount < lenderFVAmount) {\\n                offsetAmount = uint256(-borrowerFVAmount);\\n            }\\n\\n            if (_maximumFVAmount != 0 && offsetAmount > _maximumFVAmount) {\\n                offsetAmount = _maximumFVAmount;\\n            }\\n\\n            IFutureValueVault(futureValueVault).addBorrowFutureValue(\\n                _lender,\\n                offsetAmount,\\n                lenderMaturity\\n            );\\n\\n            IFutureValueVault(futureValueVault).addLendFutureValue(\\n                _borrower,\\n                offsetAmount,\\n                borrowerMaturity\\n            );\\n        }\\n    }\\n\\n    function _offsetGenesisValue(\\n        bytes32 _ccy,\\n        address _lender,\\n        address _borrower,\\n        int256 _maximumGVAmount\\n    ) internal returns (int256 offsetAmount) {\\n        int256 lenderGVAmount = AddressResolverLib.genesisValueVault().getGenesisValue(\\n            _ccy,\\n            _lender\\n        );\\n        int256 borrowerGVAmount = AddressResolverLib.genesisValueVault().getGenesisValue(\\n            _ccy,\\n            _borrower\\n        );\\n\\n        if (lenderGVAmount <= 0 || borrowerGVAmount >= 0) {\\n            return 0;\\n        } else {\\n            offsetAmount = lenderGVAmount;\\n        }\\n\\n        if (-borrowerGVAmount < lenderGVAmount) {\\n            offsetAmount = -borrowerGVAmount;\\n        }\\n\\n        if (_maximumGVAmount != 0 && offsetAmount > _maximumGVAmount) {\\n            offsetAmount = _maximumGVAmount;\\n        }\\n\\n        AddressResolverLib.genesisValueVault().addGenesisValue(_ccy, _lender, -offsetAmount);\\n        AddressResolverLib.genesisValueVault().addGenesisValue(_ccy, _borrower, offsetAmount);\\n    }\\n}\\n\",\"keccak256\":\"0x2588c3c46a8f7d77d3e06abe32753d51a78d3857f4d6ab752e755f187f153200\",\"license\":\"MIT\"},\"contracts/storages/CurrencyControllerStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol\\\";\\nimport \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\n\\nstruct Currency {\\n    bool isSupported;\\n    string name;\\n}\\n\\nlibrary CurrencyControllerStorage {\\n    using EnumerableSet for EnumerableSet.Bytes32Set;\\n\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.currencyController\\\");\\n\\n    struct Storage {\\n        // Protocol currencies\\n        EnumerableSet.Bytes32Set currencies;\\n        mapping(bytes32 => uint256) haircuts;\\n        // PriceFeed\\n        mapping(bytes32 => AggregatorV3Interface) usdPriceFeeds;\\n        mapping(bytes32 => AggregatorV3Interface) ethPriceFeeds;\\n        mapping(bytes32 => uint8) usdDecimals;\\n        mapping(bytes32 => uint8) ethDecimals;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x318293c6e7a2b9129e4c4e05a873c772e3a0cc4a92b40cc88749586f716c6643\",\"license\":\"MIT\"},\"contracts/storages/GenesisValueVaultStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nstruct MaturityUnitPrice {\\n    uint256 unitPrice;\\n    uint256 compoundFactor;\\n    uint256 next;\\n    uint256 prev;\\n}\\n\\nlibrary GenesisValueVaultStorage {\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.genesisValueVault\\\");\\n\\n    struct Storage {\\n        mapping(bytes32 => bool) isInitialized;\\n        mapping(bytes32 => uint256) initialCompoundFactors;\\n        mapping(bytes32 => uint256) compoundFactors;\\n        mapping(bytes32 => uint256) currentMaturity;\\n        mapping(bytes32 => uint8) decimals;\\n        // Mapping from user to balance per currency\\n        mapping(bytes32 => mapping(address => int256)) balances;\\n        mapping(bytes32 => uint256) totalLendingSupplies;\\n        mapping(bytes32 => uint256) totalBorrowingSupplies;\\n        // Mapping from maturity to rate per currency\\n        mapping(bytes32 => mapping(uint256 => MaturityUnitPrice)) maturityUnitPrices;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x54db3779bbc12fa6f080e017f07334f6f846739b8b3648d56b113f67bec3e48d\",\"license\":\"MIT\"},\"contracts/storages/LendingMarketControllerStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\n\\nlibrary LendingMarketControllerStorage {\\n    using EnumerableSet for EnumerableSet.Bytes32Set;\\n\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.lendingMarketController\\\");\\n\\n    struct Storage {\\n        // Mapping from currency to lending market contract addresses\\n        mapping(bytes32 => address[]) lendingMarkets;\\n        // Mapping from lending market contract address to future value vault contract address per currency\\n        mapping(bytes32 => mapping(address => address)) futureValueVaults;\\n        // Mapping from maturity to lending market contract address per currency\\n        mapping(bytes32 => mapping(uint256 => address)) maturityLendingMarkets;\\n        // Mapping from currency to genesis date in the lending market\\n        mapping(bytes32 => uint256) genesisDates;\\n        // Mapping from user to used currency\\n        mapping(address => EnumerableSet.Bytes32Set) usedCurrencies;\\n        // Mapping from user to active order existence per currency and maturity\\n        mapping(address => mapping(bytes32 => mapping(uint256 => bool))) activeOrderExistences;\\n        // Mapping from currency to order fee rate received by protocol (in basis point)\\n        mapping(bytes32 => uint256) orderFeeRates;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x7ac15ce0b9a7c4630500f73bfa748dafe15899bbf5bfdc74f082c0853dc918ea\",\"license\":\"MIT\"},\"contracts/storages/LendingMarketStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"../types/ProtocolTypes.sol\\\";\\nimport \\\"../libraries/OrderStatisticsTreeLib.sol\\\";\\n\\nstruct MarketOrder {\\n    ProtocolTypes.Side side;\\n    uint256 unitPrice; // in basis points\\n    uint256 maturity;\\n    uint256 timestamp;\\n}\\n\\nlibrary LendingMarketStorage {\\n    using OrderStatisticsTreeLib for OrderStatisticsTreeLib.Tree;\\n\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.lendingMarket\\\");\\n\\n    struct Storage {\\n        uint48 lastOrderId;\\n        bytes32 ccy;\\n        uint256 genesisDate;\\n        uint256 maturity;\\n        // Mapping from user to active lend order ids\\n        mapping(address => uint48[]) activeLendOrderIds;\\n        // Mapping from user to active borrow order ids\\n        mapping(address => uint48[]) activeBorrowOrderIds;\\n        // Mapping from user to current maturity\\n        mapping(address => uint256) userCurrentMaturities;\\n        // Mapping from orderId to order\\n        mapping(uint256 => MarketOrder) orders;\\n        // Mapping from maturity to lending orders\\n        mapping(uint256 => OrderStatisticsTreeLib.Tree) lendOrders;\\n        // Mapping from maturity to borrowing orders\\n        mapping(uint256 => OrderStatisticsTreeLib.Tree) borrowOrders;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x853ba93239853c61035a10d0b2dc1249039b33fba8f29d4a9dbd7601ec55216b\",\"license\":\"MIT\"},\"contracts/storages/MixinAddressResolverStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {IAddressResolver} from \\\"../interfaces/IAddressResolver.sol\\\";\\n\\nlibrary MixinAddressResolverStorage {\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.mixinAddressResolver\\\");\\n\\n    struct Storage {\\n        IAddressResolver resolver;\\n        mapping(bytes32 => address) addressCache;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x852b885b6264a58930a0945c68842717e19f954eaefc0137235e6f263e17fa9d\",\"license\":\"MIT\"},\"contracts/types/ProtocolTypes.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\n/**\\n * @dev ProtocolTypes is a base-level contract that holds common Secured Finance protocol types\\n * @author Secured Finance\\n */\\nlibrary ProtocolTypes {\\n    // Constant values\\n    uint256 public constant PRICE_DIGIT = 10000; // price digit in the basis (10000 -> 1)\\n    uint256 public constant PCT_DIGIT = 10000; // percentage digit in the basis (10000 -> 100%)\\n\\n    uint256 internal constant DAYS_IN_YEAR = 365;\\n    uint256 internal constant SECONDS_IN_MONTH = 2592000; // 60 * 60 * 24 * 30 * 12\\n    uint256 internal constant SECONDS_IN_YEAR = 31536000; // 60 * 60 * 24 * 365\\n\\n    // Lending market common types\\n    enum Side {\\n        LEND,\\n        BORROW\\n    }\\n}\\n\",\"keccak256\":\"0xb4f718379c4b1a90400813f4789e853dccb1e474697282e4ed5e36c0d0bd385b\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x61351e61003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100b35760003560e01c80637dfeb4511161007b5780637dfeb451146101b75780637e609715146101ca57806385f33967146101dd5780638ba14e38146101f05780639c599f8b146102035780639d3fc35d1461023857600080fd5b80630312b528146100b85780631ce4ded41461010d5780635c3477651461013b57806371eb43531461018357806373bb3b09146101a4575b600080fd5b6100cb6100c6366004612dd6565b61024b565b604080519889526020890197909752958701949094526060860192909252608085015260a084015260c0830152151560e0820152610100015b60405180910390f35b61012061011b366004612e09565b610758565b60408051938452602084019290925290820152606001610104565b61014e610149366004612e45565b610777565b604080519788526020880196909652948601939093526060850191909152608084015260a083015260c082015260e001610104565b610196610191366004612e71565b61089b565b604051908152602001610104565b6101206101b2366004612e45565b610dfb565b6101966101c5366004612e71565b610eb6565b6101206101d8366004612e09565b61137f565b6101966101eb366004612e45565b61138f565b6101966101fe366004612e9d565b61154f565b81801561020f57600080fd5b5061022361021e366004612ec9565b6115fa565b60408051928352602083019190915201610104565b610120610246366004612e45565b611ca9565b6000806000806000806000806000610261611d5c565b60040160008d6001600160a01b03166001600160a01b0316815260200190815260200160002090506102c56040518060c001604052806060815260200160008019168152602001606081526020016060815260200160008152602001600081525090565b6102cd611d80565b6001600160a01b0316633f90a08e6102e484611d9d565b6040518263ffffffff1660e01b81526004016103009190612f34565b60006040518083038186803b15801561031857600080fd5b505afa15801561032c573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526103549190810190612ff3565b8152608081018b905260005b61036983611dae565b81101561073a5761037a8382611db8565b6020830152604080516007808252610100820190925290816020016020820280368337505050604083015260208201516103b4908f610777565b88604001516000815181106103cb576103cb613090565b6020026020010189604001516001815181106103e9576103e9613090565b602002602001018a6040015160028151811061040757610407613090565b602002602001018b6040015160038151811061042557610425613090565b602002602001018c6040015160048151811061044357610443613090565b602002602001018d6040015160058151811061046157610461613090565b602002602001018e6040015160068151811061047f5761047f613090565b6020908102919091018101979097529690965295909452949093529390529290529190528201518d141561053e5781604001516006815181106104c4576104c4613090565b6020026020010151826080018181516104dd91906130bc565b9052506040820151805160039081106104f8576104f8613090565b6020026020010151826040015160008151811061051757610517613090565b602002602001015161052991906130bc565b8260a00181815161053a91906130bc565b9052505b610546611dcb565b6001600160a01b031663939fe622836020015184604001516040518363ffffffff1660e01b815260040161057b9291906130d4565b60006040518083038186803b15801561059357600080fd5b505afa1580156105a7573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105cf9190810190613122565b6060830181905280516000906105e7576105e7613090565b60200260200101518b6105fa91906130bc565b9a50816060015160018151811061061357610613613090565b60200260200101518a61062691906130bc565b9950816060015160028151811061063f5761063f613090565b60200260200101518961065291906130bc565b9850816060015160048151811061066b5761066b613090565b60200260200101518761067e91906130bc565b9650816060015160058151811061069757610697613090565b6020026020010151866106aa91906130bc565b9550816000015181815181106106c2576106c2613090565b6020026020010151156107285781606001516003815181106106e6576106e6613090565b6020026020010151886106f991906130bc565b9750816060015160068151811061071257610712613090565b60200260200101518561072591906130bc565b94505b80610732816131a8565b915050610360565b508060a0015181608001511015925050509397509397509397509397565b6000806000610768868686611deb565b92509250925093509350939050565b600080600080600080600061078c8989610dfb565b9198509650935061079d8989611ca9565b8897509194509250905060006107b38a8a611eaa565b9050600081126107ce576107c781886130bc565b96506107e4565b6107d7816131c3565b6107e190846130bc565b92505b861561088e5760006107f4611dcb565b6001600160a01b0316639abdb38a8c6040518263ffffffff1660e01b815260040161082191815260200190565b60206040518083038186803b15801561083957600080fd5b505afa15801561084d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061087191906131e0565b9050612710610880828a6131f9565b61088a919061322e565b9650505b5092959891949750929550565b6000806108a6611d5c565b6000868152600291909101602090815260408083208784529091528120546001600160a01b031691506108d7611d5c565b60008781526020919091526040812080549091906108f7576108f7613090565b60009182526020822001546001600160a01b0384811691161491505b61091b611d5c565b60008881526020919091526040902054811015610ca357600061093c611d5c565b60008981526020919091526040902080548390811061095d5761095d613090565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b1580156109aa57600080fd5b505afa1580156109be573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109e291906131e0565b90508380610a015750846001600160a01b0316826001600160a01b0316145b15610c8e57600080610a11611d5c565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b158015610a7157600080fd5b505afa158015610a85573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610aa99190613242565b91509150858015610ac25750841580610ac25750808314155b80610ad5575085158015610ad557508083145b15610af357610ae68b8284876120de565b610af09089613266565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b158015610b3957600080fd5b505afa158015610b4d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b7191906132a7565b935093505050878015610b8c5750861580610b8c5750808514155b80610b9f575087158015610b9f57508085145b15610bbd57610bb08d8284896120de565b610bba908b6132dd565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b158015610c0357600080fd5b505afa158015610c17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3b91906132a7565b935093505050898015610c565750881580610c565750808714155b80610c69575089158015610c6957508087145b15610c8757610c7a8f82848b6120de565b610c84908d613266565b9b505b5050505050505b50508080610c9b906131a8565b915050610913565b508015610df257610de5610cb5612349565b60405163c3e7a7ad60e01b8152600481018990526001600160a01b038781166024830152919091169063c3e7a7ad9060440160206040518083038186803b158015610cff57600080fd5b505afa158015610d13573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d3791906131e0565b610d3f611d5c565b6000898152602091909152604081208054909190610d5f57610d5f613090565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b158015610da857600080fd5b505afa158015610dbc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610de091906131e0565b612368565b610def9084613266565b92505b50509392505050565b60008080805b610e09611d5c565b60008781526020919091526040902054811015610eae576000806000610e6d89610e31611d5c565b60008c815260209190915260409020805487908110610e5257610e52613090565b6000918252602090912001546001600160a01b03168a612381565b91945092509050610e7e83886130bc565b9650610e8a82876130bc565b9550610e9681866130bc565b94505050508080610ea6906131a8565b915050610e01565b509250925092565b600080610ec1611d5c565b6000868152600291909101602090815260408083208784529091528120546001600160a01b03169150610ef2611d5c565b6000878152602091909152604081208054909190610f1257610f12613090565b60009182526020822001546001600160a01b0384811691161491505b610f36611d5c565b600088815260209190915260409020548110156112ee576000610f57611d5c565b600089815260209190915260409020805483908110610f7857610f78613090565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b158015610fc557600080fd5b505afa158015610fd9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ffd91906131e0565b9050838061101c5750846001600160a01b0316826001600160a01b0316145b156112d95760008061102c611d5c565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b15801561108c57600080fd5b505afa1580156110a0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110c49190613242565b915091508580156110dd57508415806110dd5750808314155b156110ff576110ee8b8284876123c7565b6110f89089613266565b975061111e565b8515801561110c57508083145b1561111e5761111b8289613266565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b15801561116457600080fd5b505afa158015611178573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061119c91906132a7565b9350935050508780156111b757508615806111b75750808514155b156111d9576111c88d8284896123c7565b6111d2908b6132dd565b99506111f8565b871580156111e657508085145b156111f8576111f5828b6132dd565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b15801561123e57600080fd5b505afa158015611252573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061127691906132a7565b93509350505089801561129157508815806112915750808714155b156112b3576112a28f82848b6123c7565b6112ac908d613266565b9b506112d2565b891580156112c057508087145b156112d2576112cf828d613266565b9b505b5050505050505b505080806112e6906131a8565b915050610f2e565b508015610df2576112fd612349565b60405163c3e7a7ad60e01b8152600481018890526001600160a01b038681166024830152919091169063c3e7a7ad9060440160206040518083038186803b15801561134757600080fd5b505afa15801561135b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610de591906131e0565b6000806000610768868686612381565b600061139b8383611eaa565b905060005b6113a8611d5c565b600085815260209190915260409020548110156115485760006113c9611d5c565b6000868152602091909152604090208054839081106113ea576113ea613090565b6000918252602082200154604051631c7b209b60e31b81526001600160a01b03878116600483015290911692508190839063e3d904d89060240160806040518083038186803b15801561143c57600080fd5b505afa158015611450573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061147491906132a7565b935093505050611486878284866120de565b61149090866132dd565b6040516339f7dda360e21b81526001600160a01b03888116600483015291965060009182919086169063e7df768c9060240160806040518083038186803b1580156114da57600080fd5b505afa1580156114ee573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061151291906132a7565b935093505050611524898284886120de565b61152e9088613266565b965050505050508080611540906131a8565b9150506113a0565b5092915050565b60008142106115985760405162461bcd60e51b815260206004820152601060248201526f496e76616c6964206d6174757269747960801b60448201526064015b60405180910390fd5b60006115a4428461331c565b90506115b66127106301e133806131f9565b84826115c0611d5c565b600089815260069190910160205260409020546115dd91906131f9565b6115e791906131f9565b6115f1919061322e565b95945050505050565b6000806116386040518060a0016040528060006001600160a01b03168152602001600081526020016000815260200160008152602001600081525090565b6000611642611d80565b60405163afe8efcf60e01b81526001600160a01b038b81166004830152919091169063afe8efcf9060240160206040518083038186803b15801561168557600080fd5b505afa158015611699573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906116bd91906131e0565b90508061170c5760405162461bcd60e51b815260206004820152601a60248201527f557365722068617320656e6f75676820636f6c6c61746572616c000000000000604482015260640161158f565b600061171988888c610eb6565b90506000811261176b5760405162461bcd60e51b815260206004820181905260248201527f4e6f206465627420696e207468652073656c6563746564206d61747572697479604482015260640161158f565b611773611d5c565b6000898152600291909101602090815260408083208a84529091529020546001600160a01b031683526117a5816131c3565b60208401526117bf88886117b8846131c3565b86516120de565b60408401526117cc611dcb565b6040516306d062ad60e01b8152600481018a9052602481018490526001600160a01b0391909116906306d062ad9060440160206040518083038186803b15801561181557600080fd5b505afa158015611829573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061184d91906131e0565b6080840181905260408401511061186857826080015161186e565b82604001515b608084015261187b61263b565b6001600160a01b031663b187bd266040518163ffffffff1660e01b815260040160206040518083038186803b1580156118b357600080fd5b505afa1580156118c7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118eb9190613333565b611b195760006118f9611d5c565b60008a815260209190915260408120805490919061191957611919613090565b6000918252602090912001546001600160a01b0316611936611d5c565b60008b8152600291909101602090815260408083208c84529091529020546001600160a01b03161490508015611ac2576000611a168a61197461263b565b8e61197d612349565b6001600160a01b03166318612e328f8f8c608001516040518463ffffffff1660e01b81526004016119c1939291909283526020830191909152604082015260600190565b60206040518083038186803b1580156119d957600080fd5b505afa1580156119ed573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a1191906131e0565b612654565b90506000811315611ac057611abd8a8a611a2e612349565b604051637636e94160e01b8152600481018f9052602481018e9052604481018690526001600160a01b039190911690637636e9419060640160206040518083038186803b158015611a7e57600080fd5b505afa158015611a92573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ab691906131e0565b88516120de565b95505b505b6000611af18a8a611ad161263b565b8f611aec8f8f8d8d60800151611ae7919061331c565b61290e565b6129bb565b90508015611b1657611b098a8a8388600001516120de565b611b1390876130bc565b95505b50505b611b21611d5c565b6000898152600291909101602090815260408083208a8452825280832054918601519051631e007d1d60e01b81526001600160a01b0390921692631e007d1d92611b6e929060040161334e565b60206040518083038186803b158015611b8657600080fd5b505afa158015611b9a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611bbe91906131e0565b60608401819052608084015160009110611bdc578360800151611be2565b83606001515b9050611bec611d80565b60405163ab2a077760e01b81526001600160a01b038e811660048301528d81166024830152604482018d9052606482018c90526084820184905262ffffff8a1660a483015260c48201889052919091169063ab2a07779060e401602060405180830381600087803b158015611c6057600080fd5b505af1158015611c74573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9891906131e0565b955050505050965096945050505050565b60008080805b611cb7611d5c565b60008781526020919091526040902054811015610eae576000806000611d1b89611cdf611d5c565b60008c815260209190915260409020805487908110611d0057611d00613090565b6000918252602090912001546001600160a01b03168a611deb565b91945092509050611d2c83886130bc565b9650611d3882876130bc565b9550611d4481866130bc565b94505050508080611d54906131a8565b915050611caf565b7f8041b8421ebd495cc61f38c788c9eb100daccf9bd36aa0bb920b7a15b2e0496590565b6000611d9869151bdad95b95985d5b1d60b21b612ca3565b905090565b6060611da882612d34565b92915050565b6000611da8825490565b6000611dc48383612d90565b9392505050565b6000611d987121bab93932b731bca1b7b73a3937b63632b960711b612ca3565b6000806000806000806000886001600160a01b031663e3d904d8896040518263ffffffff1660e01b8152600401611e3191906001600160a01b0391909116815260200190565b60806040518083038186803b158015611e4957600080fd5b505afa158015611e5d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611e8191906132a7565b9350935093509350839650611e988a82848c6120de565b95508294505050505093509350939050565b6000805b611eb6611d5c565b6000858152602091909152604090205481101561201e576000611ed7611d5c565b600086815260209190915260409020805483908110611ef857611ef8613090565b60009182526020822001546001600160a01b0316915080611f17611d5c565b6000888152600191909101602090815260408083206001600160a01b03878116855292529182902054915163070da1af60e11b81528882166004820152911690630e1b435e90602401604080518083038186803b158015611f7757600080fd5b505afa158015611f8b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611faf9190613242565b91509150611ffc878284611fc1611d5c565b60008c815260209190915260409020805489908110611fe257611fe2613090565b6000918252602090912001546001600160a01b03166120de565b6120069086613266565b94505050508080612016906131a8565b915050611eae565b506120d461202a612349565b60405163c3e7a7ad60e01b8152600481018690526001600160a01b038581166024830152919091169063c3e7a7ad9060440160206040518083038186803b15801561207457600080fd5b505afa158015612088573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120ac91906131e0565b6120b4611d5c565b6000868152602091909152604081208054909190610d5f57610d5f613090565b611dc49082613266565b6000806120e9612349565b6040516302b6878160e11b815260048101889052602481018790526001600160a01b03919091169063056d0f029060440160806040518083038186803b15801561213257600080fd5b505afa158015612146573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061216a919061337a565b602001519050600080826121f357859150846001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b1580156121b457600080fd5b505afa1580156121c8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121ec91906131e0565b9050612331565b6121fb612349565b60405163aab8a1b360e01b8152600481018a905260248101899052604481018890526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b15801561224b57600080fd5b505afa15801561225f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061228391906131e0565b915061228d611d5c565b60008981526020919091526040812080549091906122ad576122ad613090565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b1580156122f657600080fd5b505afa15801561230a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061232e91906131e0565b90505b61233b8282612368565b93505050505b949350505050565b6000611d987011d95b995cda5cd5985b1d5955985d5b1d607a1b612ca3565b600061271061237783856133e0565b611dc49190613465565b6000806000806000806000886001600160a01b031663e7df768c896040518263ffffffff1660e01b8152600401611e3191906001600160a01b0391909116815260200190565b60006123d1612349565b6040516302b6878160e11b815260048101879052602481018690526001600160a01b03919091169063056d0f029060440160806040518083038186803b15801561241a57600080fd5b505afa15801561242e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612452919061337a565b602001516125ab576000826001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b15801561249557600080fd5b505afa1580156124a9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124cd91906131e0565b905060006124db8583612368565b905060006124e7611d5c565b600089815260209190915260408120805490919061250757612507613090565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b15801561255057600080fd5b505afa158015612564573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061258891906131e0565b905080612597612710846133e0565b6125a19190613465565b9350505050612341565b6125b3612349565b60405163aab8a1b360e01b81526004810187905260248101869052604481018590526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b15801561260357600080fd5b505afa158015612617573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115f191906131e0565b6000611d986a14995cd95c9d99519d5b9960aa1b612ca3565b60008061265f612349565b60405163386320d360e11b8152600481018890526001600160a01b03878116602483015291909116906370c641a69060440160206040518083038186803b1580156126a957600080fd5b505afa1580156126bd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906126e191906131e0565b905060006126ed612349565b60405163386320d360e11b8152600481018990526001600160a01b03878116602483015291909116906370c641a69060440160206040518083038186803b15801561273757600080fd5b505afa15801561274b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061276f91906131e0565b9050600082131580612782575060008112155b1561279257600092505050612341565b8192508161279f826131c3565b12156127b1576127ae816131c3565b92505b83158015906127bf57508383135b156127c8578392505b6127d0612349565b6001600160a01b031663da34357788886127e9876131c3565b6040516001600160e01b031960e086901b16815260048101939093526001600160a01b0390911660248301526044820152606401602060405180830381600087803b15801561283757600080fd5b505af115801561284b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061286f9190613333565b50612878612349565b60405163da34357760e01b8152600481018990526001600160a01b03878116602483015260448201869052919091169063da34357790606401602060405180830381600087803b1580156128cb57600080fd5b505af11580156128df573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129039190613333565b505050949350505050565b600080612919611d5c565b6000868152600291909101602090815260408083208784528252918290205482516371613c2d60e01b815292516001600160a01b03909116926371613c2d926004808301939192829003018186803b15801561297457600080fd5b505afa158015612988573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129ac91906131e0565b9050806115e7612710856131f9565b6000806129c6611d5c565b6000888152600291909101602090815260408083208984529091528120546001600160a01b031691506129f7611d5c565b6000898152600191909101602090815260408083206001600160a01b038681168552925280832054905163070da1af60e11b815289831660048201529116925081908390630e1b435e90602401604080518083038186803b158015612a5b57600080fd5b505afa158015612a6f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612a939190613242565b60405163070da1af60e11b81526001600160a01b038a81166004830152929450909250600091829190861690630e1b435e90602401604080518083038186803b158015612adf57600080fd5b505afa158015612af3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b179190613242565b91509150600084131580612b2c575060008212155b15612b4057600096505050505050506115f1565b80831415612c94578396508382612b56906131c3565b1215612b6857612b65826131c3565b96505b8715801590612b7657508787115b15612b7f578796505b60405163a46971ad60e01b81526001600160a01b038b81166004830152602482018990526044820185905286169063a46971ad90606401602060405180830381600087803b158015612bd057600080fd5b505af1158015612be4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c089190613333565b50604051630424172f60e11b81526001600160a01b038a8116600483015260248201899052604482018390528616906308482e5e90606401602060405180830381600087803b158015612c5a57600080fd5b505af1158015612c6e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c929190613333565b505b50505050505095945050505050565b60008181527f4abde63c3e81aefa5764b017968bc473e83e093d7e1a10247d19e0a3e41240196020908152604080832054815170026b4b9b9b4b7339030b2323932b9b99d1607d1b9381019390935260318084018690528251808503909101815260519093019091526001600160a01b031690816115485760405162461bcd60e51b815260040161158f9190613493565b606081600001805480602002602001604051908101604052809291908181526020018280548015612d8457602002820191906000526020600020905b815481526020019060010190808311612d70575b50505050509050919050565b6000826000018281548110612da757612da7613090565b9060005260206000200154905092915050565b80356001600160a01b0381168114612dd157600080fd5b919050565b600080600060608486031215612deb57600080fd5b612df484612dba565b95602085013595506040909401359392505050565b600080600060608486031215612e1e57600080fd5b83359250612e2e60208501612dba565b9150612e3c60408501612dba565b90509250925092565b60008060408385031215612e5857600080fd5b82359150612e6860208401612dba565b90509250929050565b600080600060608486031215612e8657600080fd5b8335925060208401359150612e3c60408501612dba565b600080600060608486031215612eb257600080fd5b505081359360208301359350604090920135919050565b60008060008060008060c08789031215612ee257600080fd5b612eeb87612dba565b9550612ef960208801612dba565b945060408701359350606087013592506080870135915060a087013562ffffff81168114612f2657600080fd5b809150509295509295509295565b6020808252825182820181905260009190848201906040850190845b81811015612f6c57835183529284019291840191600101612f50565b50909695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715612fb757612fb7612f78565b604052919050565b600067ffffffffffffffff821115612fd957612fd9612f78565b5060051b60200190565b80518015158114612dd157600080fd5b6000602080838503121561300657600080fd5b825167ffffffffffffffff81111561301d57600080fd5b8301601f8101851361302e57600080fd5b805161304161303c82612fbf565b612f8e565b81815260059190911b8201830190838101908783111561306057600080fd5b928401925b828410156130855761307684612fe3565b82529284019290840190613065565b979650505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600082198211156130cf576130cf6130a6565b500190565b6000604082018483526020604081850152818551808452606086019150828701935060005b81811015613115578451835293830193918301916001016130f9565b5090979650505050505050565b6000602080838503121561313557600080fd5b825167ffffffffffffffff81111561314c57600080fd5b8301601f8101851361315d57600080fd5b805161316b61303c82612fbf565b81815260059190911b8201830190838101908783111561318a57600080fd5b928401925b828410156130855783518252928401929084019061318f565b60006000198214156131bc576131bc6130a6565b5060010190565b6000600160ff1b8214156131d9576131d96130a6565b5060000390565b6000602082840312156131f257600080fd5b5051919050565b6000816000190483118215151615613213576132136130a6565b500290565b634e487b7160e01b600052601260045260246000fd5b60008261323d5761323d613218565b500490565b6000806040838503121561325557600080fd5b505080516020909101519092909150565b600080821280156001600160ff1b0384900385131615613288576132886130a6565b600160ff1b83900384128116156132a1576132a16130a6565b50500190565b600080600080608085870312156132bd57600080fd5b505082516020840151604085015160609095015191969095509092509050565b60008083128015600160ff1b8501841216156132fb576132fb6130a6565b6001600160ff1b0384018313811615613316576133166130a6565b50500390565b60008282101561332e5761332e6130a6565b500390565b60006020828403121561334557600080fd5b611dc482612fe3565b604081016002841061337057634e487b7160e01b600052602160045260246000fd5b9281526020015290565b60006080828403121561338c57600080fd5b6040516080810181811067ffffffffffffffff821117156133af576133af612f78565b8060405250825181526020830151602082015260408301516040820152606083015160608201528091505092915050565b60006001600160ff1b0381841382841380821686840486111615613406576134066130a6565b600160ff1b6000871282811687830589121615613425576134256130a6565b60008712925087820587128484161615613441576134416130a6565b87850587128184161615613457576134576130a6565b505050929093029392505050565b60008261347457613474613218565b600160ff1b82146000198414161561348e5761348e6130a6565b500590565b600060208083528351808285015260005b818110156134c0578581018301518582016040015282016134a4565b818111156134d2576000604083870101525b50601f01601f191692909201604001939250505056fea26469706673582212204866e86046e3e3344e0545c3c113a8a3fc7ac0decb508c4f7b61a7e1af03ef7264736f6c63430008090033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600436106100b35760003560e01c80637dfeb4511161007b5780637dfeb451146101b75780637e609715146101ca57806385f33967146101dd5780638ba14e38146101f05780639c599f8b146102035780639d3fc35d1461023857600080fd5b80630312b528146100b85780631ce4ded41461010d5780635c3477651461013b57806371eb43531461018357806373bb3b09146101a4575b600080fd5b6100cb6100c6366004612dd6565b61024b565b604080519889526020890197909752958701949094526060860192909252608085015260a084015260c0830152151560e0820152610100015b60405180910390f35b61012061011b366004612e09565b610758565b60408051938452602084019290925290820152606001610104565b61014e610149366004612e45565b610777565b604080519788526020880196909652948601939093526060850191909152608084015260a083015260c082015260e001610104565b610196610191366004612e71565b61089b565b604051908152602001610104565b6101206101b2366004612e45565b610dfb565b6101966101c5366004612e71565b610eb6565b6101206101d8366004612e09565b61137f565b6101966101eb366004612e45565b61138f565b6101966101fe366004612e9d565b61154f565b81801561020f57600080fd5b5061022361021e366004612ec9565b6115fa565b60408051928352602083019190915201610104565b610120610246366004612e45565b611ca9565b6000806000806000806000806000610261611d5c565b60040160008d6001600160a01b03166001600160a01b0316815260200190815260200160002090506102c56040518060c001604052806060815260200160008019168152602001606081526020016060815260200160008152602001600081525090565b6102cd611d80565b6001600160a01b0316633f90a08e6102e484611d9d565b6040518263ffffffff1660e01b81526004016103009190612f34565b60006040518083038186803b15801561031857600080fd5b505afa15801561032c573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526103549190810190612ff3565b8152608081018b905260005b61036983611dae565b81101561073a5761037a8382611db8565b6020830152604080516007808252610100820190925290816020016020820280368337505050604083015260208201516103b4908f610777565b88604001516000815181106103cb576103cb613090565b6020026020010189604001516001815181106103e9576103e9613090565b602002602001018a6040015160028151811061040757610407613090565b602002602001018b6040015160038151811061042557610425613090565b602002602001018c6040015160048151811061044357610443613090565b602002602001018d6040015160058151811061046157610461613090565b602002602001018e6040015160068151811061047f5761047f613090565b6020908102919091018101979097529690965295909452949093529390529290529190528201518d141561053e5781604001516006815181106104c4576104c4613090565b6020026020010151826080018181516104dd91906130bc565b9052506040820151805160039081106104f8576104f8613090565b6020026020010151826040015160008151811061051757610517613090565b602002602001015161052991906130bc565b8260a00181815161053a91906130bc565b9052505b610546611dcb565b6001600160a01b031663939fe622836020015184604001516040518363ffffffff1660e01b815260040161057b9291906130d4565b60006040518083038186803b15801561059357600080fd5b505afa1580156105a7573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105cf9190810190613122565b6060830181905280516000906105e7576105e7613090565b60200260200101518b6105fa91906130bc565b9a50816060015160018151811061061357610613613090565b60200260200101518a61062691906130bc565b9950816060015160028151811061063f5761063f613090565b60200260200101518961065291906130bc565b9850816060015160048151811061066b5761066b613090565b60200260200101518761067e91906130bc565b9650816060015160058151811061069757610697613090565b6020026020010151866106aa91906130bc565b9550816000015181815181106106c2576106c2613090565b6020026020010151156107285781606001516003815181106106e6576106e6613090565b6020026020010151886106f991906130bc565b9750816060015160068151811061071257610712613090565b60200260200101518561072591906130bc565b94505b80610732816131a8565b915050610360565b508060a0015181608001511015925050509397509397509397509397565b6000806000610768868686611deb565b92509250925093509350939050565b600080600080600080600061078c8989610dfb565b9198509650935061079d8989611ca9565b8897509194509250905060006107b38a8a611eaa565b9050600081126107ce576107c781886130bc565b96506107e4565b6107d7816131c3565b6107e190846130bc565b92505b861561088e5760006107f4611dcb565b6001600160a01b0316639abdb38a8c6040518263ffffffff1660e01b815260040161082191815260200190565b60206040518083038186803b15801561083957600080fd5b505afa15801561084d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061087191906131e0565b9050612710610880828a6131f9565b61088a919061322e565b9650505b5092959891949750929550565b6000806108a6611d5c565b6000868152600291909101602090815260408083208784529091528120546001600160a01b031691506108d7611d5c565b60008781526020919091526040812080549091906108f7576108f7613090565b60009182526020822001546001600160a01b0384811691161491505b61091b611d5c565b60008881526020919091526040902054811015610ca357600061093c611d5c565b60008981526020919091526040902080548390811061095d5761095d613090565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b1580156109aa57600080fd5b505afa1580156109be573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109e291906131e0565b90508380610a015750846001600160a01b0316826001600160a01b0316145b15610c8e57600080610a11611d5c565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b158015610a7157600080fd5b505afa158015610a85573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610aa99190613242565b91509150858015610ac25750841580610ac25750808314155b80610ad5575085158015610ad557508083145b15610af357610ae68b8284876120de565b610af09089613266565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b158015610b3957600080fd5b505afa158015610b4d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b7191906132a7565b935093505050878015610b8c5750861580610b8c5750808514155b80610b9f575087158015610b9f57508085145b15610bbd57610bb08d8284896120de565b610bba908b6132dd565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b158015610c0357600080fd5b505afa158015610c17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c3b91906132a7565b935093505050898015610c565750881580610c565750808714155b80610c69575089158015610c6957508087145b15610c8757610c7a8f82848b6120de565b610c84908d613266565b9b505b5050505050505b50508080610c9b906131a8565b915050610913565b508015610df257610de5610cb5612349565b60405163c3e7a7ad60e01b8152600481018990526001600160a01b038781166024830152919091169063c3e7a7ad9060440160206040518083038186803b158015610cff57600080fd5b505afa158015610d13573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d3791906131e0565b610d3f611d5c565b6000898152602091909152604081208054909190610d5f57610d5f613090565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b158015610da857600080fd5b505afa158015610dbc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610de091906131e0565b612368565b610def9084613266565b92505b50509392505050565b60008080805b610e09611d5c565b60008781526020919091526040902054811015610eae576000806000610e6d89610e31611d5c565b60008c815260209190915260409020805487908110610e5257610e52613090565b6000918252602090912001546001600160a01b03168a612381565b91945092509050610e7e83886130bc565b9650610e8a82876130bc565b9550610e9681866130bc565b94505050508080610ea6906131a8565b915050610e01565b509250925092565b600080610ec1611d5c565b6000868152600291909101602090815260408083208784529091528120546001600160a01b03169150610ef2611d5c565b6000878152602091909152604081208054909190610f1257610f12613090565b60009182526020822001546001600160a01b0384811691161491505b610f36611d5c565b600088815260209190915260409020548110156112ee576000610f57611d5c565b600089815260209190915260409020805483908110610f7857610f78613090565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b158015610fc557600080fd5b505afa158015610fd9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ffd91906131e0565b9050838061101c5750846001600160a01b0316826001600160a01b0316145b156112d95760008061102c611d5c565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b15801561108c57600080fd5b505afa1580156110a0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110c49190613242565b915091508580156110dd57508415806110dd5750808314155b156110ff576110ee8b8284876123c7565b6110f89089613266565b975061111e565b8515801561110c57508083145b1561111e5761111b8289613266565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b15801561116457600080fd5b505afa158015611178573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061119c91906132a7565b9350935050508780156111b757508615806111b75750808514155b156111d9576111c88d8284896123c7565b6111d2908b6132dd565b99506111f8565b871580156111e657508085145b156111f8576111f5828b6132dd565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b15801561123e57600080fd5b505afa158015611252573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061127691906132a7565b93509350505089801561129157508815806112915750808714155b156112b3576112a28f82848b6123c7565b6112ac908d613266565b9b506112d2565b891580156112c057508087145b156112d2576112cf828d613266565b9b505b5050505050505b505080806112e6906131a8565b915050610f2e565b508015610df2576112fd612349565b60405163c3e7a7ad60e01b8152600481018890526001600160a01b038681166024830152919091169063c3e7a7ad9060440160206040518083038186803b15801561134757600080fd5b505afa15801561135b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610de591906131e0565b6000806000610768868686612381565b600061139b8383611eaa565b905060005b6113a8611d5c565b600085815260209190915260409020548110156115485760006113c9611d5c565b6000868152602091909152604090208054839081106113ea576113ea613090565b6000918252602082200154604051631c7b209b60e31b81526001600160a01b03878116600483015290911692508190839063e3d904d89060240160806040518083038186803b15801561143c57600080fd5b505afa158015611450573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061147491906132a7565b935093505050611486878284866120de565b61149090866132dd565b6040516339f7dda360e21b81526001600160a01b03888116600483015291965060009182919086169063e7df768c9060240160806040518083038186803b1580156114da57600080fd5b505afa1580156114ee573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061151291906132a7565b935093505050611524898284886120de565b61152e9088613266565b965050505050508080611540906131a8565b9150506113a0565b5092915050565b60008142106115985760405162461bcd60e51b815260206004820152601060248201526f496e76616c6964206d6174757269747960801b60448201526064015b60405180910390fd5b60006115a4428461331c565b90506115b66127106301e133806131f9565b84826115c0611d5c565b600089815260069190910160205260409020546115dd91906131f9565b6115e791906131f9565b6115f1919061322e565b95945050505050565b6000806116386040518060a0016040528060006001600160a01b03168152602001600081526020016000815260200160008152602001600081525090565b6000611642611d80565b60405163afe8efcf60e01b81526001600160a01b038b81166004830152919091169063afe8efcf9060240160206040518083038186803b15801561168557600080fd5b505afa158015611699573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906116bd91906131e0565b90508061170c5760405162461bcd60e51b815260206004820152601a60248201527f557365722068617320656e6f75676820636f6c6c61746572616c000000000000604482015260640161158f565b600061171988888c610eb6565b90506000811261176b5760405162461bcd60e51b815260206004820181905260248201527f4e6f206465627420696e207468652073656c6563746564206d61747572697479604482015260640161158f565b611773611d5c565b6000898152600291909101602090815260408083208a84529091529020546001600160a01b031683526117a5816131c3565b60208401526117bf88886117b8846131c3565b86516120de565b60408401526117cc611dcb565b6040516306d062ad60e01b8152600481018a9052602481018490526001600160a01b0391909116906306d062ad9060440160206040518083038186803b15801561181557600080fd5b505afa158015611829573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061184d91906131e0565b6080840181905260408401511061186857826080015161186e565b82604001515b608084015261187b61263b565b6001600160a01b031663b187bd266040518163ffffffff1660e01b815260040160206040518083038186803b1580156118b357600080fd5b505afa1580156118c7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118eb9190613333565b611b195760006118f9611d5c565b60008a815260209190915260408120805490919061191957611919613090565b6000918252602090912001546001600160a01b0316611936611d5c565b60008b8152600291909101602090815260408083208c84529091529020546001600160a01b03161490508015611ac2576000611a168a61197461263b565b8e61197d612349565b6001600160a01b03166318612e328f8f8c608001516040518463ffffffff1660e01b81526004016119c1939291909283526020830191909152604082015260600190565b60206040518083038186803b1580156119d957600080fd5b505afa1580156119ed573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a1191906131e0565b612654565b90506000811315611ac057611abd8a8a611a2e612349565b604051637636e94160e01b8152600481018f9052602481018e9052604481018690526001600160a01b039190911690637636e9419060640160206040518083038186803b158015611a7e57600080fd5b505afa158015611a92573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ab691906131e0565b88516120de565b95505b505b6000611af18a8a611ad161263b565b8f611aec8f8f8d8d60800151611ae7919061331c565b61290e565b6129bb565b90508015611b1657611b098a8a8388600001516120de565b611b1390876130bc565b95505b50505b611b21611d5c565b6000898152600291909101602090815260408083208a8452825280832054918601519051631e007d1d60e01b81526001600160a01b0390921692631e007d1d92611b6e929060040161334e565b60206040518083038186803b158015611b8657600080fd5b505afa158015611b9a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611bbe91906131e0565b60608401819052608084015160009110611bdc578360800151611be2565b83606001515b9050611bec611d80565b60405163ab2a077760e01b81526001600160a01b038e811660048301528d81166024830152604482018d9052606482018c90526084820184905262ffffff8a1660a483015260c48201889052919091169063ab2a07779060e401602060405180830381600087803b158015611c6057600080fd5b505af1158015611c74573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c9891906131e0565b955050505050965096945050505050565b60008080805b611cb7611d5c565b60008781526020919091526040902054811015610eae576000806000611d1b89611cdf611d5c565b60008c815260209190915260409020805487908110611d0057611d00613090565b6000918252602090912001546001600160a01b03168a611deb565b91945092509050611d2c83886130bc565b9650611d3882876130bc565b9550611d4481866130bc565b94505050508080611d54906131a8565b915050611caf565b7f8041b8421ebd495cc61f38c788c9eb100daccf9bd36aa0bb920b7a15b2e0496590565b6000611d9869151bdad95b95985d5b1d60b21b612ca3565b905090565b6060611da882612d34565b92915050565b6000611da8825490565b6000611dc48383612d90565b9392505050565b6000611d987121bab93932b731bca1b7b73a3937b63632b960711b612ca3565b6000806000806000806000886001600160a01b031663e3d904d8896040518263ffffffff1660e01b8152600401611e3191906001600160a01b0391909116815260200190565b60806040518083038186803b158015611e4957600080fd5b505afa158015611e5d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611e8191906132a7565b9350935093509350839650611e988a82848c6120de565b95508294505050505093509350939050565b6000805b611eb6611d5c565b6000858152602091909152604090205481101561201e576000611ed7611d5c565b600086815260209190915260409020805483908110611ef857611ef8613090565b60009182526020822001546001600160a01b0316915080611f17611d5c565b6000888152600191909101602090815260408083206001600160a01b03878116855292529182902054915163070da1af60e11b81528882166004820152911690630e1b435e90602401604080518083038186803b158015611f7757600080fd5b505afa158015611f8b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611faf9190613242565b91509150611ffc878284611fc1611d5c565b60008c815260209190915260409020805489908110611fe257611fe2613090565b6000918252602090912001546001600160a01b03166120de565b6120069086613266565b94505050508080612016906131a8565b915050611eae565b506120d461202a612349565b60405163c3e7a7ad60e01b8152600481018690526001600160a01b038581166024830152919091169063c3e7a7ad9060440160206040518083038186803b15801561207457600080fd5b505afa158015612088573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120ac91906131e0565b6120b4611d5c565b6000868152602091909152604081208054909190610d5f57610d5f613090565b611dc49082613266565b6000806120e9612349565b6040516302b6878160e11b815260048101889052602481018790526001600160a01b03919091169063056d0f029060440160806040518083038186803b15801561213257600080fd5b505afa158015612146573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061216a919061337a565b602001519050600080826121f357859150846001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b1580156121b457600080fd5b505afa1580156121c8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121ec91906131e0565b9050612331565b6121fb612349565b60405163aab8a1b360e01b8152600481018a905260248101899052604481018890526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b15801561224b57600080fd5b505afa15801561225f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061228391906131e0565b915061228d611d5c565b60008981526020919091526040812080549091906122ad576122ad613090565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b1580156122f657600080fd5b505afa15801561230a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061232e91906131e0565b90505b61233b8282612368565b93505050505b949350505050565b6000611d987011d95b995cda5cd5985b1d5955985d5b1d607a1b612ca3565b600061271061237783856133e0565b611dc49190613465565b6000806000806000806000886001600160a01b031663e7df768c896040518263ffffffff1660e01b8152600401611e3191906001600160a01b0391909116815260200190565b60006123d1612349565b6040516302b6878160e11b815260048101879052602481018690526001600160a01b03919091169063056d0f029060440160806040518083038186803b15801561241a57600080fd5b505afa15801561242e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612452919061337a565b602001516125ab576000826001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b15801561249557600080fd5b505afa1580156124a9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124cd91906131e0565b905060006124db8583612368565b905060006124e7611d5c565b600089815260209190915260408120805490919061250757612507613090565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b15801561255057600080fd5b505afa158015612564573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061258891906131e0565b905080612597612710846133e0565b6125a19190613465565b9350505050612341565b6125b3612349565b60405163aab8a1b360e01b81526004810187905260248101869052604481018590526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b15801561260357600080fd5b505afa158015612617573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115f191906131e0565b6000611d986a14995cd95c9d99519d5b9960aa1b612ca3565b60008061265f612349565b60405163386320d360e11b8152600481018890526001600160a01b03878116602483015291909116906370c641a69060440160206040518083038186803b1580156126a957600080fd5b505afa1580156126bd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906126e191906131e0565b905060006126ed612349565b60405163386320d360e11b8152600481018990526001600160a01b03878116602483015291909116906370c641a69060440160206040518083038186803b15801561273757600080fd5b505afa15801561274b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061276f91906131e0565b9050600082131580612782575060008112155b1561279257600092505050612341565b8192508161279f826131c3565b12156127b1576127ae816131c3565b92505b83158015906127bf57508383135b156127c8578392505b6127d0612349565b6001600160a01b031663da34357788886127e9876131c3565b6040516001600160e01b031960e086901b16815260048101939093526001600160a01b0390911660248301526044820152606401602060405180830381600087803b15801561283757600080fd5b505af115801561284b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061286f9190613333565b50612878612349565b60405163da34357760e01b8152600481018990526001600160a01b03878116602483015260448201869052919091169063da34357790606401602060405180830381600087803b1580156128cb57600080fd5b505af11580156128df573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129039190613333565b505050949350505050565b600080612919611d5c565b6000868152600291909101602090815260408083208784528252918290205482516371613c2d60e01b815292516001600160a01b03909116926371613c2d926004808301939192829003018186803b15801561297457600080fd5b505afa158015612988573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129ac91906131e0565b9050806115e7612710856131f9565b6000806129c6611d5c565b6000888152600291909101602090815260408083208984529091528120546001600160a01b031691506129f7611d5c565b6000898152600191909101602090815260408083206001600160a01b038681168552925280832054905163070da1af60e11b815289831660048201529116925081908390630e1b435e90602401604080518083038186803b158015612a5b57600080fd5b505afa158015612a6f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612a939190613242565b60405163070da1af60e11b81526001600160a01b038a81166004830152929450909250600091829190861690630e1b435e90602401604080518083038186803b158015612adf57600080fd5b505afa158015612af3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b179190613242565b91509150600084131580612b2c575060008212155b15612b4057600096505050505050506115f1565b80831415612c94578396508382612b56906131c3565b1215612b6857612b65826131c3565b96505b8715801590612b7657508787115b15612b7f578796505b60405163a46971ad60e01b81526001600160a01b038b81166004830152602482018990526044820185905286169063a46971ad90606401602060405180830381600087803b158015612bd057600080fd5b505af1158015612be4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c089190613333565b50604051630424172f60e11b81526001600160a01b038a8116600483015260248201899052604482018390528616906308482e5e90606401602060405180830381600087803b158015612c5a57600080fd5b505af1158015612c6e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c929190613333565b505b50505050505095945050505050565b60008181527f4abde63c3e81aefa5764b017968bc473e83e093d7e1a10247d19e0a3e41240196020908152604080832054815170026b4b9b9b4b7339030b2323932b9b99d1607d1b9381019390935260318084018690528251808503909101815260519093019091526001600160a01b031690816115485760405162461bcd60e51b815260040161158f9190613493565b606081600001805480602002602001604051908101604052809291908181526020018280548015612d8457602002820191906000526020600020905b815481526020019060010190808311612d70575b50505050509050919050565b6000826000018281548110612da757612da7613090565b9060005260206000200154905092915050565b80356001600160a01b0381168114612dd157600080fd5b919050565b600080600060608486031215612deb57600080fd5b612df484612dba565b95602085013595506040909401359392505050565b600080600060608486031215612e1e57600080fd5b83359250612e2e60208501612dba565b9150612e3c60408501612dba565b90509250925092565b60008060408385031215612e5857600080fd5b82359150612e6860208401612dba565b90509250929050565b600080600060608486031215612e8657600080fd5b8335925060208401359150612e3c60408501612dba565b600080600060608486031215612eb257600080fd5b505081359360208301359350604090920135919050565b60008060008060008060c08789031215612ee257600080fd5b612eeb87612dba565b9550612ef960208801612dba565b945060408701359350606087013592506080870135915060a087013562ffffff81168114612f2657600080fd5b809150509295509295509295565b6020808252825182820181905260009190848201906040850190845b81811015612f6c57835183529284019291840191600101612f50565b50909695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715612fb757612fb7612f78565b604052919050565b600067ffffffffffffffff821115612fd957612fd9612f78565b5060051b60200190565b80518015158114612dd157600080fd5b6000602080838503121561300657600080fd5b825167ffffffffffffffff81111561301d57600080fd5b8301601f8101851361302e57600080fd5b805161304161303c82612fbf565b612f8e565b81815260059190911b8201830190838101908783111561306057600080fd5b928401925b828410156130855761307684612fe3565b82529284019290840190613065565b979650505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600082198211156130cf576130cf6130a6565b500190565b6000604082018483526020604081850152818551808452606086019150828701935060005b81811015613115578451835293830193918301916001016130f9565b5090979650505050505050565b6000602080838503121561313557600080fd5b825167ffffffffffffffff81111561314c57600080fd5b8301601f8101851361315d57600080fd5b805161316b61303c82612fbf565b81815260059190911b8201830190838101908783111561318a57600080fd5b928401925b828410156130855783518252928401929084019061318f565b60006000198214156131bc576131bc6130a6565b5060010190565b6000600160ff1b8214156131d9576131d96130a6565b5060000390565b6000602082840312156131f257600080fd5b5051919050565b6000816000190483118215151615613213576132136130a6565b500290565b634e487b7160e01b600052601260045260246000fd5b60008261323d5761323d613218565b500490565b6000806040838503121561325557600080fd5b505080516020909101519092909150565b600080821280156001600160ff1b0384900385131615613288576132886130a6565b600160ff1b83900384128116156132a1576132a16130a6565b50500190565b600080600080608085870312156132bd57600080fd5b505082516020840151604085015160609095015191969095509092509050565b60008083128015600160ff1b8501841216156132fb576132fb6130a6565b6001600160ff1b0384018313811615613316576133166130a6565b50500390565b60008282101561332e5761332e6130a6565b500390565b60006020828403121561334557600080fd5b611dc482612fe3565b604081016002841061337057634e487b7160e01b600052602160045260246000fd5b9281526020015290565b60006080828403121561338c57600080fd5b6040516080810181811067ffffffffffffffff821117156133af576133af612f78565b8060405250825181526020830151602082015260408301516040820152606083015160608201528091505092915050565b60006001600160ff1b0381841382841380821686840486111615613406576134066130a6565b600160ff1b6000871282811687830589121615613425576134256130a6565b60008712925087820587128484161615613441576134416130a6565b87850587128184161615613457576134576130a6565b505050929093029392505050565b60008261347457613474613218565b600160ff1b82146000198414161561348e5761348e6130a6565b500590565b600060208083528351808285015260005b818110156134c0578581018301518582016040015282016134a4565b818111156134d2576000604083870101525b50601f01601f191692909201604001939250505056fea26469706673582212204866e86046e3e3344e0545c3c113a8a3fc7ac0decb508c4f7b61a7e1af03ef7264736f6c63430008090033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}
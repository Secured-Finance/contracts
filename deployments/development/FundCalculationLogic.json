{
  "address": "0x4030ec24Ff86EB47FD160F328cF23477F48B58F3",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "previousRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "ratio",
          "type": "uint256"
        }
      ],
      "name": "UpdateOrderFeeRate",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_maturity",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateActualFutureValue",
      "outputs": [
        {
          "internalType": "int256",
          "name": "futureValue",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_maturity",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateActualPresentValue",
      "outputs": [
        {
          "internalType": "int256",
          "name": "presentValue",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateActualPresentValue",
      "outputs": [
        {
          "internalType": "int256",
          "name": "totalPresentValue",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_market",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateBorrowedFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "workingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "debtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "borrowedAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateBorrowedFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalWorkingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalDebtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalBorrowedAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateFunds",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "workingLendOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "claimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "collateralAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "workingBorrowOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "debtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "borrowedAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateLentFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalWorkingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalClaimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalLentAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "_market",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "calculateLentFundsFromOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "workingOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "claimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lentAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_maturity",
          "type": "uint256"
        }
      ],
      "name": "calculateOrderFeeAmount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "orderFeeAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "_depositCcy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_depositAmount",
          "type": "uint256"
        }
      ],
      "name": "calculateTotalFundsInETH",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalWorkingLendOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalClaimableAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalCollateralAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalLentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalWorkingBorrowOrdersAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalDebtAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalBorrowedAmount",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isEnoughDeposit",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xbfc4d81edc23eb4a388003894e335c3c7960cff2229c8d41c5829ccacd243cc2",
  "receipt": {
    "to": null,
    "from": "0xDBA767F3DFF3835BEf5dE1eDEe91A9901402AB21",
    "contractAddress": "0x4030ec24Ff86EB47FD160F328cF23477F48B58F3",
    "transactionIndex": 35,
    "gasUsed": "2468151",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xc186d5fbec3a59d79c462dc797aef3f555bf020bf1057ecfc64243fa280494a4",
    "transactionHash": "0xbfc4d81edc23eb4a388003894e335c3c7960cff2229c8d41c5829ccacd243cc2",
    "logs": [],
    "blockNumber": 8421361,
    "cumulativeGasUsed": "5049970",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 2,
  "solcInputHash": "53610ea2e9e5e944400e466f5bfbaf7f",
  "metadata": "{\"compiler\":{\"version\":\"0.8.9+commit.e5eed63a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"previousRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"ratio\",\"type\":\"uint256\"}],\"name\":\"UpdateOrderFeeRate\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_maturity\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateActualFutureValue\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"futureValue\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_maturity\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateActualPresentValue\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"presentValue\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateActualPresentValue\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"totalPresentValue\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_market\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateBorrowedFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"workingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"borrowedAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateBorrowedFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"totalWorkingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalDebtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalBorrowedAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateFunds\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"workingLendOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"claimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateralAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"workingBorrowOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"borrowedAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateLentFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"totalWorkingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalClaimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalLentAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_market\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"calculateLentFundsFromOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"workingOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"claimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lentAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_maturity\",\"type\":\"uint256\"}],\"name\":\"calculateOrderFeeAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"orderFeeAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_depositCcy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_depositAmount\",\"type\":\"uint256\"}],\"name\":\"calculateTotalFundsInETH\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"totalWorkingLendOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalClaimableAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalCollateralAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalLentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalWorkingBorrowOrdersAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalDebtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalBorrowedAmount\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isEnoughDeposit\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/libraries/logics/FundCalculationLogic.sol\":\"FundCalculationLogic\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\ninterface AggregatorV3Interface {\\n  function decimals() external view returns (uint8);\\n\\n  function description() external view returns (string memory);\\n\\n  function version() external view returns (uint256);\\n\\n  // getRoundData and latestRoundData should both raise \\\"No data present\\\"\\n  // if they do not have data to report, instead of returning unset values\\n  // which could be misinterpreted as actual reported values.\\n  function getRoundData(uint80 _roundId)\\n    external\\n    view\\n    returns (\\n      uint80 roundId,\\n      int256 answer,\\n      uint256 startedAt,\\n      uint256 updatedAt,\\n      uint80 answeredInRound\\n    );\\n\\n  function latestRoundData()\\n    external\\n    view\\n    returns (\\n      uint80 roundId,\\n      int256 answer,\\n      uint256 startedAt,\\n      uint256 updatedAt,\\n      uint80 answeredInRound\\n    );\\n}\\n\",\"keccak256\":\"0xf2b6c9adb3552254df1445b73563cf014434ff5e78663e9b961b6c059506ceb5\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (utils/structs/EnumerableSet.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Library for managing\\n * https://en.wikipedia.org/wiki/Set_(abstract_data_type)[sets] of primitive\\n * types.\\n *\\n * Sets have the following properties:\\n *\\n * - Elements are added, removed, and checked for existence in constant time\\n * (O(1)).\\n * - Elements are enumerated in O(n). No guarantees are made on the ordering.\\n *\\n * ```\\n * contract Example {\\n *     // Add the library methods\\n *     using EnumerableSet for EnumerableSet.AddressSet;\\n *\\n *     // Declare a set state variable\\n *     EnumerableSet.AddressSet private mySet;\\n * }\\n * ```\\n *\\n * As of v3.3.0, sets of type `bytes32` (`Bytes32Set`), `address` (`AddressSet`)\\n * and `uint256` (`UintSet`) are supported.\\n *\\n * [WARNING]\\n * ====\\n *  Trying to delete such a structure from storage will likely result in data corruption, rendering the structure unusable.\\n *  See https://github.com/ethereum/solidity/pull/11843[ethereum/solidity#11843] for more info.\\n *\\n *  In order to clean an EnumerableSet, you can either remove all elements one by one or create a fresh instance using an array of EnumerableSet.\\n * ====\\n */\\nlibrary EnumerableSet {\\n    // To implement this library for multiple types with as little code\\n    // repetition as possible, we write it in terms of a generic Set type with\\n    // bytes32 values.\\n    // The Set implementation uses private functions, and user-facing\\n    // implementations (such as AddressSet) are just wrappers around the\\n    // underlying Set.\\n    // This means that we can only create new EnumerableSets for types that fit\\n    // in bytes32.\\n\\n    struct Set {\\n        // Storage of set values\\n        bytes32[] _values;\\n        // Position of the value in the `values` array, plus 1 because index 0\\n        // means a value is not in the set.\\n        mapping(bytes32 => uint256) _indexes;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function _add(Set storage set, bytes32 value) private returns (bool) {\\n        if (!_contains(set, value)) {\\n            set._values.push(value);\\n            // The value is stored at length-1, but we add 1 to all indexes\\n            // and use 0 as a sentinel value\\n            set._indexes[value] = set._values.length;\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function _remove(Set storage set, bytes32 value) private returns (bool) {\\n        // We read and store the value's index to prevent multiple reads from the same storage slot\\n        uint256 valueIndex = set._indexes[value];\\n\\n        if (valueIndex != 0) {\\n            // Equivalent to contains(set, value)\\n            // To delete an element from the _values array in O(1), we swap the element to delete with the last one in\\n            // the array, and then remove the last element (sometimes called as 'swap and pop').\\n            // This modifies the order of the array, as noted in {at}.\\n\\n            uint256 toDeleteIndex = valueIndex - 1;\\n            uint256 lastIndex = set._values.length - 1;\\n\\n            if (lastIndex != toDeleteIndex) {\\n                bytes32 lastValue = set._values[lastIndex];\\n\\n                // Move the last value to the index where the value to delete is\\n                set._values[toDeleteIndex] = lastValue;\\n                // Update the index for the moved value\\n                set._indexes[lastValue] = valueIndex; // Replace lastValue's index to valueIndex\\n            }\\n\\n            // Delete the slot where the moved value was stored\\n            set._values.pop();\\n\\n            // Delete the index for the deleted slot\\n            delete set._indexes[value];\\n\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function _contains(Set storage set, bytes32 value) private view returns (bool) {\\n        return set._indexes[value] != 0;\\n    }\\n\\n    /**\\n     * @dev Returns the number of values on the set. O(1).\\n     */\\n    function _length(Set storage set) private view returns (uint256) {\\n        return set._values.length;\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function _at(Set storage set, uint256 index) private view returns (bytes32) {\\n        return set._values[index];\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function _values(Set storage set) private view returns (bytes32[] memory) {\\n        return set._values;\\n    }\\n\\n    // Bytes32Set\\n\\n    struct Bytes32Set {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        return _add(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        return _remove(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(Bytes32Set storage set, bytes32 value) internal view returns (bool) {\\n        return _contains(set._inner, value);\\n    }\\n\\n    /**\\n     * @dev Returns the number of values in the set. O(1).\\n     */\\n    function length(Bytes32Set storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(Bytes32Set storage set, uint256 index) internal view returns (bytes32) {\\n        return _at(set._inner, index);\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(Bytes32Set storage set) internal view returns (bytes32[] memory) {\\n        return _values(set._inner);\\n    }\\n\\n    // AddressSet\\n\\n    struct AddressSet {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(AddressSet storage set, address value) internal returns (bool) {\\n        return _add(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(AddressSet storage set, address value) internal returns (bool) {\\n        return _remove(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(AddressSet storage set, address value) internal view returns (bool) {\\n        return _contains(set._inner, bytes32(uint256(uint160(value))));\\n    }\\n\\n    /**\\n     * @dev Returns the number of values in the set. O(1).\\n     */\\n    function length(AddressSet storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(AddressSet storage set, uint256 index) internal view returns (address) {\\n        return address(uint160(uint256(_at(set._inner, index))));\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(AddressSet storage set) internal view returns (address[] memory) {\\n        bytes32[] memory store = _values(set._inner);\\n        address[] memory result;\\n\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            result := store\\n        }\\n\\n        return result;\\n    }\\n\\n    // UintSet\\n\\n    struct UintSet {\\n        Set _inner;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     *\\n     * Returns true if the value was added to the set, that is if it was not\\n     * already present.\\n     */\\n    function add(UintSet storage set, uint256 value) internal returns (bool) {\\n        return _add(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     *\\n     * Returns true if the value was removed from the set, that is if it was\\n     * present.\\n     */\\n    function remove(UintSet storage set, uint256 value) internal returns (bool) {\\n        return _remove(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(UintSet storage set, uint256 value) internal view returns (bool) {\\n        return _contains(set._inner, bytes32(value));\\n    }\\n\\n    /**\\n     * @dev Returns the number of values on the set. O(1).\\n     */\\n    function length(UintSet storage set) internal view returns (uint256) {\\n        return _length(set._inner);\\n    }\\n\\n    /**\\n     * @dev Returns the value stored at position `index` in the set. O(1).\\n     *\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function at(UintSet storage set, uint256 index) internal view returns (uint256) {\\n        return uint256(_at(set._inner, index));\\n    }\\n\\n    /**\\n     * @dev Return the entire set in an array\\n     *\\n     * WARNING: This operation will copy the entire storage to memory, which can be quite expensive. This is designed\\n     * to mostly be used by view accessors that are queried without any gas fees. Developers should keep in mind that\\n     * this function has an unbounded cost, and using it as part of a state-changing function may render the function\\n     * uncallable if the set grows to a point where copying to memory consumes too much gas to fit in a block.\\n     */\\n    function values(UintSet storage set) internal view returns (uint256[] memory) {\\n        bytes32[] memory store = _values(set._inner);\\n        uint256[] memory result;\\n\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            result := store\\n        }\\n\\n        return result;\\n    }\\n}\\n\",\"keccak256\":\"0x5050943b32b6a8f282573d166b2e9d87ab7eb4dbba4ab6acf36ecb54fe6995e4\",\"license\":\"MIT\"},\"contracts/interfaces/IAddressResolver.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IAddressResolver {\\n    event AddressImported(bytes32 name, address destination);\\n\\n    function getAddress(bytes32 name, string calldata reason) external view returns (address);\\n\\n    function getAddress(bytes32 name) external view returns (address);\\n\\n    function getAddresses() external view returns (address[] memory);\\n}\\n\",\"keccak256\":\"0x85fea92a32d4ac0f08532d339ceeef07a468748ab7628bd2fd60980090e53a5d\",\"license\":\"MIT\"},\"contracts/interfaces/IBeaconProxyController.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IBeaconProxyController {\\n    event BeaconProxyCreated(\\n        bytes32 indexed id,\\n        address indexed proxyAddress,\\n        address indexed implementationAddress\\n    );\\n\\n    event BeaconProxyUpdated(\\n        bytes32 indexed id,\\n        address indexed proxyAddress,\\n        address indexed newImplementationAddress,\\n        address oldImplementationAddress\\n    );\\n\\n    function getBeaconProxyAddress(bytes32 beaconName) external view returns (address);\\n\\n    function setFutureValueVaultImpl(address newImpl) external;\\n\\n    function setLendingMarketImpl(address newImpl) external;\\n\\n    function deployFutureValueVault() external returns (address futureValueVault);\\n\\n    function deployLendingMarket(\\n        bytes32 _ccy,\\n        uint256 _genesisDate,\\n        uint256 _maturity\\n    ) external returns (address market);\\n}\\n\",\"keccak256\":\"0xc92a3f5ea6c065590788e5d3d7f259790c4f403e8f50af20ff1ea633badfd8e5\",\"license\":\"MIT\"},\"contracts/interfaces/ICurrencyController.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {Currency} from \\\"../storages/CurrencyControllerStorage.sol\\\";\\n\\n/**\\n * @dev Currency Controller contract is responsible for managing supported\\n * currencies in Secured Finance Protocol\\n *\\n * Contract links new currencies to ETH Chainlink price feeds, without existing price feed\\n * contract owner is not able to add a new currency into the protocol\\n */\\ninterface ICurrencyController {\\n    event AddCurrency(bytes32 indexed ccy, uint256 haircut);\\n    event RemoveCurrency(bytes32 indexed ccy);\\n\\n    event UpdateHaircut(bytes32 indexed ccy, uint256 haircut);\\n\\n    event AddPriceFeed(bytes32 ccy, string secondCcy, address indexed priceFeed);\\n    event RemovePriceFeed(bytes32 ccy, string secondCcy, address indexed priceFeed);\\n\\n    function convertFromETH(bytes32 _ccy, uint256 _amountETH)\\n        external\\n        view\\n        returns (uint256 amount);\\n\\n    function convertToETH(bytes32 _ccy, uint256 _amount) external view returns (uint256 amount);\\n\\n    function convertToETH(bytes32 _ccy, int256 _amount) external view returns (int256 amount);\\n\\n    function convertToETH(bytes32 _ccy, uint256[] memory _amounts)\\n        external\\n        view\\n        returns (uint256[] memory amounts);\\n\\n    function getEthDecimals(bytes32) external view returns (uint8);\\n\\n    function getUsdDecimals(bytes32) external view returns (uint8);\\n\\n    function getCurrencies() external view returns (bytes32[] memory);\\n\\n    function getHaircut(bytes32 _ccy) external view returns (uint256);\\n\\n    function getHistoricalETHPrice(bytes32 _ccy, uint80 _roundId) external view returns (int256);\\n\\n    function getHistoricalUSDPrice(bytes32 _ccy, uint80 _roundId) external view returns (int256);\\n\\n    function getLastETHPrice(bytes32 _ccy) external view returns (int256);\\n\\n    function getLastUSDPrice(bytes32 _ccy) external view returns (int256);\\n\\n    function currencyExists(bytes32 _ccy) external view returns (bool);\\n\\n    function linkPriceFeed(\\n        bytes32 _ccy,\\n        address _priceFeedAddr,\\n        bool _isEthPriceFeed\\n    ) external returns (bool);\\n\\n    function removePriceFeed(bytes32 _ccy, bool _isEthPriceFeed) external;\\n\\n    function addCurrency(\\n        bytes32 _ccy,\\n        address _ethPriceFeed,\\n        uint256 _haircut\\n    ) external;\\n\\n    function updateHaircut(bytes32 _ccy, uint256 _haircut) external;\\n\\n    function removeCurrency(bytes32 _ccy) external;\\n}\\n\",\"keccak256\":\"0xa06fb4afa7c9577db3b943b6abe5d4e297ef202cc72d8941ab150e708963e351\",\"license\":\"MIT\"},\"contracts/interfaces/IFutureValueVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IFutureValueVault {\\n    event Transfer(address indexed from, address indexed to, int256 value);\\n\\n    function getTotalLendingSupply(uint256 _maturity) external view returns (uint256);\\n\\n    function getTotalBorrowingSupply(uint256 _maturity) external view returns (uint256);\\n\\n    function getFutureValue(address _user)\\n        external\\n        view\\n        returns (int256 futureValue, uint256 maturity);\\n\\n    function hasFutureValueInPastMaturity(address _user, uint256 _maturity)\\n        external\\n        view\\n        returns (bool);\\n\\n    function addLendFutureValue(\\n        address _user,\\n        uint256 _amount,\\n        uint256 _maturity\\n    ) external returns (bool);\\n\\n    function addBorrowFutureValue(\\n        address _user,\\n        uint256 _amount,\\n        uint256 _maturity\\n    ) external returns (bool);\\n\\n    function removeFutureValue(address _user, uint256 _maturity)\\n        external\\n        returns (\\n            int256 removedAmount,\\n            int256 currentAmount,\\n            uint256 maturity\\n        );\\n}\\n\",\"keccak256\":\"0xb1b5c4dc86b463b0952f2c902a5bbe0dbeb83df579a02a3f34d51d74e28f36bd\",\"license\":\"MIT\"},\"contracts/interfaces/IGenesisValueVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {MaturityUnitPrice} from \\\"../storages/GenesisValueVaultStorage.sol\\\";\\n\\ninterface IGenesisValueVault {\\n    event Transfer(bytes32 indexed ccy, address indexed from, address indexed to, int256 value);\\n    event CompoundFactorUpdated(\\n        bytes32 indexed ccy,\\n        uint256 compoundFactor,\\n        uint256 unitPrice,\\n        uint256 currentMaturity,\\n        uint256 previousMaturity\\n    );\\n\\n    function isInitialized(bytes32 ccy) external view returns (bool);\\n\\n    function decimals(bytes32 ccy) external view returns (uint8);\\n\\n    function getTotalLendingSupply(bytes32 ccy) external view returns (uint256);\\n\\n    function getTotalBorrowingSupply(bytes32 ccy) external view returns (uint256);\\n\\n    function getGenesisValue(bytes32 ccy, address user) external view returns (int256);\\n\\n    function getCurrentMaturity(bytes32 ccy) external view returns (uint256);\\n\\n    function getCompoundFactor(bytes32 ccy) external view returns (uint256);\\n\\n    function getMaturityUnitPrice(bytes32 ccy, uint256 maturity)\\n        external\\n        view\\n        returns (MaturityUnitPrice memory);\\n\\n    function getGenesisValueInFutureValue(bytes32 ccy, address user) external view returns (int256);\\n\\n    function calculateCurrentFVFromFVInMaturity(\\n        bytes32 _ccy,\\n        uint256 _basisMaturity,\\n        int256 _futureValue\\n    ) external view returns (int256);\\n\\n    function calculateGVFromFV(\\n        bytes32 ccy,\\n        uint256 basisMaturity,\\n        int256 futureValue\\n    ) external view returns (int256);\\n\\n    function calculateFVFromGV(\\n        bytes32 ccy,\\n        uint256 basisMaturity,\\n        int256 genesisValue\\n    ) external view returns (int256);\\n\\n    function initialize(\\n        bytes32 ccy,\\n        uint8 decimals,\\n        uint256 compoundFactor\\n    ) external;\\n\\n    function updateCompoundFactor(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 nextMaturity,\\n        uint256 unitPrice\\n    ) external;\\n\\n    function addGenesisValue(\\n        bytes32 ccy,\\n        address user,\\n        uint256 basisMaturity,\\n        int256 futureValue\\n    ) external returns (bool);\\n}\\n\",\"keccak256\":\"0x6605d021b7868cd4c5e3d68611c9a8bae0126ca1181b20919fcf24c423505d52\",\"license\":\"MIT\"},\"contracts/interfaces/ILendingMarket.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"../types/ProtocolTypes.sol\\\";\\nimport {MarketOrder} from \\\"../storages/LendingMarketStorage.sol\\\";\\n\\ninterface ILendingMarket {\\n    event CancelOrder(\\n        uint48 orderId,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 unitPrice\\n    );\\n    event MakeOrder(\\n        uint48 orderId,\\n        uint48 originalOrderId,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 unitPrice\\n    );\\n    event TakeOrders(\\n        address indexed taker,\\n        ProtocolTypes.Side side,\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 filledAmount,\\n        uint256 unitPrice,\\n        uint256 filledFutureValue\\n    );\\n\\n    event CleanOrders(\\n        uint48[] orderIds,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 indexed ccy,\\n        uint256 maturity\\n    );\\n\\n    event OpenMarket(uint256 maturity, uint256 prevMaturity);\\n\\n    struct Market {\\n        bytes32 ccy;\\n        uint256 maturity;\\n        uint256 genesisDate;\\n        uint256 borrowUnitPrice;\\n        uint256 lendUnitPrice;\\n        uint256 midUnitPrice;\\n    }\\n\\n    function getMarket() external view returns (Market memory);\\n\\n    function getBorrowUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getLendUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getMidUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getBorrowOrderBook(uint256 limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getLendOrderBook(uint256 limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getMaturity() external view returns (uint256);\\n\\n    function getCurrency() external view returns (bytes32);\\n\\n    function isMatured() external view returns (bool);\\n\\n    function isOpened() external view returns (bool);\\n\\n    function getOrder(uint48 _orderId)\\n        external\\n        view\\n        returns (\\n            ProtocolTypes.Side,\\n            uint256 unitPrice,\\n            uint256 maturity,\\n            address maker,\\n            uint256 amount,\\n            uint256 timestamp\\n        );\\n\\n    function getTotalAmountFromLendOrders(address _user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        );\\n\\n    function getTotalAmountFromBorrowOrders(address _user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        );\\n\\n    function getActiveLendOrderIds(address _user)\\n        external\\n        view\\n        returns (uint48[] memory activeOrderIds);\\n\\n    function getActiveBorrowOrderIds(address _user)\\n        external\\n        view\\n        returns (uint48[] memory activeOrderIds);\\n\\n    function estimateFilledAmount(ProtocolTypes.Side _side, uint256 _futureValue)\\n        external\\n        view\\n        returns (uint256 amount);\\n\\n    function openMarket(uint256 maturity) external returns (uint256);\\n\\n    function cancelOrder(address user, uint48 orderId)\\n        external\\n        returns (\\n            ProtocolTypes.Side,\\n            uint256,\\n            uint256\\n        );\\n\\n    function cleanOrders(address _user)\\n        external\\n        returns (\\n            uint256 activeLendOrderCount,\\n            uint256 activeBorrowOrderCount,\\n            uint256 removedLendOrderFutureValue,\\n            uint256 removedBorrowOrderFutureValue,\\n            uint256 removedLendOrderAmount,\\n            uint256 removedBorrowOrderAmount,\\n            uint256 maturity\\n        );\\n\\n    function createOrder(\\n        ProtocolTypes.Side side,\\n        address account,\\n        uint256 amount,\\n        uint256 unitPrice,\\n        bool ignoreRemainingAmount\\n    ) external returns (uint256 executedRate, uint256 remainingAmount);\\n\\n    function pauseMarket() external;\\n\\n    function unpauseMarket() external;\\n}\\n\",\"keccak256\":\"0xdaddf47c580c339bc1ffe7cb8f2990b1d93c0831b896d1d2ce18d56473b3a821\",\"license\":\"MIT\"},\"contracts/interfaces/ILendingMarketController.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"../types/ProtocolTypes.sol\\\";\\n\\ninterface ILendingMarketController {\\n    event CreateLendingMarket(\\n        bytes32 indexed ccy,\\n        address indexed marketAddr,\\n        address futureValueVault,\\n        uint256 index,\\n        uint256 maturity\\n    );\\n    event RotateLendingMarkets(bytes32 ccy, uint256 oldMaturity, uint256 newMaturity);\\n    event FillOrder(\\n        address indexed taker,\\n        bytes32 indexed ccy,\\n        ProtocolTypes.Side side,\\n        uint256 indexed maturity,\\n        uint256 amount,\\n        uint256 unitPrice,\\n        uint256 filledFutureValue\\n    );\\n    event FillOrdersAsync(\\n        address indexed taker,\\n        bytes32 indexed ccy,\\n        ProtocolTypes.Side side,\\n        uint256 indexed maturity,\\n        uint256 filledFutureValue\\n    );\\n    event CancelOrder(\\n        uint48 orderId,\\n        address indexed maker,\\n        bytes32 indexed ccy,\\n        ProtocolTypes.Side side,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 unitPrice\\n    );\\n    event Liquidate(\\n        address indexed user,\\n        bytes32 collateralCcy,\\n        bytes32 indexed debtCcy,\\n        uint256 indexed debtMaturity,\\n        uint256 amount\\n    );\\n\\n    function isLiquidator(address user) external view returns (bool);\\n\\n    function getGenesisDate(bytes32 ccy) external view returns (uint256);\\n\\n    function getLendingMarkets(bytes32 ccy) external view returns (address[] memory);\\n\\n    function getLendingMarket(bytes32 ccy, uint256 maturity) external view returns (address);\\n\\n    function getFutureValueVault(bytes32 ccy, uint256 maturity) external view returns (address);\\n\\n    function getBorrowUnitPrices(bytes32 ccy) external view returns (uint256[] memory unitPrices);\\n\\n    function getLendUnitPrices(bytes32 ccy) external view returns (uint256[] memory unitPrices);\\n\\n    function getMidUnitPrices(bytes32 ccy) external view returns (uint256[] memory unitPrices);\\n\\n    function getBorrowOrderBook(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 limit\\n    )\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getLendOrderBook(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 limit\\n    )\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getMaturities(bytes32 ccy) external view returns (uint256[] memory);\\n\\n    function getUsedCurrencies(address user) external view returns (bytes32[] memory);\\n\\n    function getFutureValue(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        address user\\n    ) external view returns (int256 futureValue);\\n\\n    function getPresentValue(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        address user\\n    ) external view returns (int256 presentValue);\\n\\n    function getTotalPresentValue(bytes32 ccy, address user) external view returns (int256);\\n\\n    function getTotalPresentValueInETH(address user)\\n        external\\n        view\\n        returns (int256 totalPresentValue);\\n\\n    function getOrderFeeRate(bytes32 ccy) external view returns (uint256);\\n\\n    function calculateLentFundsFromOrders(bytes32 ccy, address user)\\n        external\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 lentAmount\\n        );\\n\\n    function calculateBorrowedFundsFromOrders(bytes32 ccy, address user)\\n        external\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        );\\n\\n    function calculateFunds(bytes32 ccy, address user)\\n        external\\n        view\\n        returns (\\n            uint256 workingLendOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 collateralAmount,\\n            uint256 lentAmount,\\n            uint256 workingBorrowOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        );\\n\\n    function calculateTotalFundsInETH(\\n        address user,\\n        bytes32 depositCcy,\\n        uint256 depositAmount\\n    )\\n        external\\n        view\\n        returns (\\n            uint256 totalWorkingLendOrdersAmount,\\n            uint256 totalClaimableAmount,\\n            uint256 totalCollateralAmount,\\n            uint256 totalLentAmount,\\n            uint256 totalWorkingBorrowOrdersAmount,\\n            uint256 totalDebtAmount,\\n            uint256 totalBorrowedAmount,\\n            bool isEnoughDeposit\\n        );\\n\\n    function isInitializedLendingMarket(bytes32 ccy) external view returns (bool);\\n\\n    function initializeLendingMarket(\\n        bytes32 ccy,\\n        uint256 genesisDate,\\n        uint256 compoundFactor,\\n        uint256 orderFeeRate\\n    ) external;\\n\\n    function createLendingMarket(bytes32 ccy)\\n        external\\n        returns (address market, address futureValue);\\n\\n    function createOrder(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        ProtocolTypes.Side side,\\n        uint256 amount,\\n        uint256 unitPrice\\n    ) external returns (bool);\\n\\n    function depositAndCreateOrder(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        ProtocolTypes.Side side,\\n        uint256 amount,\\n        uint256 unitPrice\\n    ) external payable returns (bool);\\n\\n    function executeLiquidationCall(\\n        bytes32 collateralCcy,\\n        bytes32 debtCcy,\\n        uint256 debtMaturity,\\n        address user,\\n        uint24 poolFee\\n    ) external returns (bool);\\n\\n    function registerLiquidator(bool isLiquidator) external;\\n\\n    function cancelOrder(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint48 orderId\\n    ) external returns (bool);\\n\\n    function rotateLendingMarkets(bytes32 ccy) external;\\n\\n    function pauseLendingMarkets(bytes32 ccy) external returns (bool);\\n\\n    function unpauseLendingMarkets(bytes32 ccy) external returns (bool);\\n\\n    function updateOrderFeeRate(bytes32 ccy, uint256 orderFeeRate) external;\\n\\n    function cleanAllOrders(address user) external;\\n\\n    function cleanOrders(bytes32 ccy, address user) external returns (uint256 activeOrderCount);\\n}\\n\",\"keccak256\":\"0xdd7d9976197d82239f32cc436c37556b9ceb335d56c50c37aed2ce33efce1084\",\"license\":\"MIT\"},\"contracts/interfaces/IReserveFund.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\ninterface IReserveFund {\\n    event Pause(address account);\\n    event Unpause(address account);\\n\\n    function isPaused() external view returns (bool);\\n\\n    function pause() external;\\n\\n    function unpause() external;\\n\\n    function deposit(bytes32 ccy, uint256 amount) external payable;\\n\\n    function withdraw(bytes32 ccy, uint256 amount) external;\\n}\\n\",\"keccak256\":\"0xa2a6df7a095ca8f8874d26672f75fe1f09c45caf041cb27d5e265bcb974a9754\",\"license\":\"MIT\"},\"contracts/interfaces/ITokenVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {ProtocolTypes} from \\\"../types/ProtocolTypes.sol\\\";\\n\\ninterface ITokenVault {\\n    event Deposit(address indexed user, bytes32 ccy, uint256 amount);\\n    event Withdraw(address indexed user, bytes32 ccy, uint256 amount);\\n    event RegisterCurrency(bytes32 ccy, address tokenAddress, bool isCollateral);\\n    event UpdateCurrency(bytes32 ccy, bool isCollateral);\\n    event Swap(\\n        address indexed user,\\n        bytes32 ccyIn,\\n        bytes32 ccyOut,\\n        uint256 amountIn,\\n        uint256 amountOut,\\n        uint256 liquidatorFee,\\n        uint256 protocolFee\\n    );\\n\\n    function isCovered(\\n        address user,\\n        bytes32 ccy,\\n        uint256 unsettledExp,\\n        ProtocolTypes.Side unsettledOrderSide\\n    ) external view returns (bool);\\n\\n    function isCovered(address user) external view returns (bool);\\n\\n    function isCollateral(bytes32 _ccy) external view returns (bool);\\n\\n    function isCollateral(bytes32[] calldata _ccys)\\n        external\\n        view\\n        returns (bool[] memory isCollateralCurrencies);\\n\\n    function isRegisteredCurrency(bytes32 ccy) external view returns (bool);\\n\\n    function getTokenAddress(bytes32 ccy) external view returns (address);\\n\\n    function getCollateralCurrencies() external view returns (bytes32[] memory);\\n\\n    function getWithdrawableCollateral(address user) external view returns (uint256 maxWithdraw);\\n\\n    function getCoverage(address user) external view returns (uint256 coverage);\\n\\n    function getUnusedCollateral(address user) external view returns (uint256);\\n\\n    function getTotalCollateralAmount(address party) external view returns (uint256);\\n\\n    function getLiquidationAmount(address user) external view returns (uint256 liquidationAmount);\\n\\n    function getTotalDepositAmount(bytes32 _ccy) external view returns (uint256);\\n\\n    function getDepositAmount(address user, bytes32 ccy) external view returns (uint256);\\n\\n    function getUsedCurrencies(address user) external view returns (bytes32[] memory);\\n\\n    function getCollateralParameters()\\n        external\\n        view\\n        returns (\\n            uint256 liquidationThresholdRate,\\n            uint256 liquidationProtocolFeeRate,\\n            uint256 liquidatorFeeRate,\\n            address uniswapRouter,\\n            address uniswapQuoter\\n        );\\n\\n    function setCollateralParameters(\\n        uint256 liquidationThresholdRate,\\n        uint256 liquidationProtocolFeeRate,\\n        uint256 liquidatorFeeRate,\\n        address uniswapRouter,\\n        address uniswapQuoter\\n    ) external;\\n\\n    function deposit(bytes32 ccy, uint256 amount) external payable;\\n\\n    function depositFrom(\\n        address user,\\n        bytes32 ccy,\\n        uint256 amount\\n    ) external payable;\\n\\n    function withdraw(bytes32 ccy, uint256 amount) external;\\n\\n    function addDepositAmount(\\n        address user,\\n        bytes32 ccy,\\n        uint256 amount\\n    ) external;\\n\\n    function removeDepositAmount(\\n        address user,\\n        bytes32 ccy,\\n        uint256 amount\\n    ) external;\\n\\n    function swapDepositAmounts(\\n        address liquidator,\\n        address user,\\n        bytes32 ccyFrom,\\n        bytes32 ccyTo,\\n        uint256 amountOut,\\n        uint24 poolFee\\n    ) external returns (uint256 amountIn);\\n}\\n\",\"keccak256\":\"0xd067d16a47ef0a06cdca347a7de9b63864bd0f90180726b2b063fd4f73cbd69f\",\"license\":\"MIT\"},\"contracts/libraries/AddressResolverLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {Contracts} from \\\"../libraries/Contracts.sol\\\";\\nimport {IBeaconProxyController} from \\\"../interfaces/IBeaconProxyController.sol\\\";\\nimport {ICurrencyController} from \\\"../interfaces/ICurrencyController.sol\\\";\\nimport {IGenesisValueVault} from \\\"../interfaces/IGenesisValueVault.sol\\\";\\nimport {ILendingMarketController} from \\\"../interfaces/ILendingMarketController.sol\\\";\\nimport {IReserveFund} from \\\"../interfaces/IReserveFund.sol\\\";\\nimport {ITokenVault} from \\\"../interfaces/ITokenVault.sol\\\";\\nimport {MixinAddressResolverStorage as Storage} from \\\"../storages/MixinAddressResolverStorage.sol\\\";\\n\\nlibrary AddressResolverLib {\\n    function getAddress(bytes32 name) internal view returns (address) {\\n        address _foundAddress = Storage.slot().addressCache[name];\\n        require(_foundAddress != address(0), string(abi.encodePacked(\\\"Missing address: \\\", name)));\\n        return _foundAddress;\\n    }\\n\\n    function beaconProxyController() internal view returns (IBeaconProxyController) {\\n        return IBeaconProxyController(getAddress(Contracts.BEACON_PROXY_CONTROLLER));\\n    }\\n\\n    function currencyController() internal view returns (ICurrencyController) {\\n        return ICurrencyController(getAddress(Contracts.CURRENCY_CONTROLLER));\\n    }\\n\\n    function genesisValueVault() internal view returns (IGenesisValueVault) {\\n        return IGenesisValueVault(getAddress(Contracts.GENESIS_VALUE_VAULT));\\n    }\\n\\n    function lendingMarketController() internal view returns (ILendingMarketController) {\\n        return ILendingMarketController(getAddress(Contracts.LENDING_MARKET_CONTROLLER));\\n    }\\n\\n    function reserveFund() internal view returns (IReserveFund) {\\n        return IReserveFund(getAddress(Contracts.RESERVE_FUND));\\n    }\\n\\n    function tokenVault() internal view returns (ITokenVault) {\\n        return ITokenVault(getAddress(Contracts.TOKEN_VAULT));\\n    }\\n}\\n\",\"keccak256\":\"0x65d55399d6c8b753ddaa36c1370fae1c68dfbfb8b6b2d09b1717ba037b079998\",\"license\":\"MIT\"},\"contracts/libraries/Contracts.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nlibrary Contracts {\\n    bytes32 internal constant BEACON_PROXY_CONTROLLER = \\\"BeaconProxyController\\\";\\n    bytes32 internal constant CURRENCY_CONTROLLER = \\\"CurrencyController\\\";\\n    bytes32 internal constant GENESIS_VALUE_VAULT = \\\"GenesisValueVault\\\";\\n    bytes32 internal constant LENDING_MARKET_CONTROLLER = \\\"LendingMarketController\\\";\\n    bytes32 internal constant RESERVE_FUND = \\\"ReserveFund\\\";\\n    bytes32 internal constant TOKEN_VAULT = \\\"TokenVault\\\";\\n}\\n\\nlibrary BeaconContracts {\\n    bytes32 internal constant FUTURE_VALUE_VAULT = \\\"FutureValueVault\\\";\\n    bytes32 internal constant LENDING_MARKET = \\\"LendingMarket\\\";\\n}\\n\",\"keccak256\":\"0x8e73eead72efa03bcc03c1cdf72cdcebed0f7e6f5a58cda1fd74e0fc03f356e6\",\"license\":\"MIT\"},\"contracts/libraries/OrderStatisticsTreeLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\n// types\\nimport {ProtocolTypes} from \\\"../types/ProtocolTypes.sol\\\";\\n\\nstruct RemainingOrder {\\n    uint48 orderId;\\n    address maker;\\n    uint256 amount;\\n    uint256 unitPrice;\\n}\\n\\nstruct OrderItem {\\n    uint48 orderId;\\n    uint48 next;\\n    uint48 prev;\\n    address maker;\\n    uint256 timestamp;\\n    uint256 amount;\\n}\\n\\n/**\\n * @notice OrderStatisticsTreeLib is a Red-Black Tree binary search library\\n * based on the following library that is extended to manage order data.\\n *\\n * https://github.com/rob-Hitchens/OrderStatisticsTree\\n *\\n */\\nlibrary OrderStatisticsTreeLib {\\n    uint256 private constant EMPTY = 0;\\n\\n    struct Node {\\n        uint256 parent;\\n        uint256 left;\\n        uint256 right;\\n        bool red;\\n        uint48 head;\\n        uint48 tail;\\n        uint256 orderCounter;\\n        uint256 orderTotalAmount;\\n        mapping(uint256 => OrderItem) orders;\\n    }\\n\\n    struct Tree {\\n        uint256 root;\\n        mapping(uint256 => Node) nodes;\\n    }\\n\\n    function first(Tree storage self) internal view returns (uint256 _value) {\\n        _value = self.root;\\n        if (_value == EMPTY) return 0;\\n        while (self.nodes[_value].left != EMPTY) {\\n            _value = self.nodes[_value].left;\\n        }\\n    }\\n\\n    function last(Tree storage self) internal view returns (uint256 _value) {\\n        _value = self.root;\\n        if (_value == EMPTY) return 0;\\n        while (self.nodes[_value].right != EMPTY) {\\n            _value = self.nodes[_value].right;\\n        }\\n    }\\n\\n    function next(Tree storage self, uint256 value) internal view returns (uint256 _cursor) {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(401) - Starting value cannot be zero\\\");\\n        if (self.nodes[value].right != EMPTY) {\\n            _cursor = treeMinimum(self, self.nodes[value].right);\\n        } else {\\n            _cursor = self.nodes[value].parent;\\n            while (_cursor != EMPTY && value == self.nodes[_cursor].right) {\\n                value = _cursor;\\n                _cursor = self.nodes[_cursor].parent;\\n            }\\n        }\\n    }\\n\\n    function prev(Tree storage self, uint256 value) internal view returns (uint256 _cursor) {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(402) - Starting value cannot be zero\\\");\\n        if (self.nodes[value].left != EMPTY) {\\n            _cursor = treeMaximum(self, self.nodes[value].left);\\n        } else {\\n            _cursor = self.nodes[value].parent;\\n            while (_cursor != EMPTY && value == self.nodes[_cursor].left) {\\n                value = _cursor;\\n                _cursor = self.nodes[_cursor].parent;\\n            }\\n        }\\n    }\\n\\n    function exists(Tree storage self, uint256 value) internal view returns (bool _exists) {\\n        if (value == EMPTY) return false;\\n        if (value == self.root) return true;\\n        // if (self.nodes[value].parent != EMPTY) return true;\\n        uint256 cursor = value;\\n        while (self.nodes[cursor].parent != EMPTY) {\\n            uint256 parent = self.nodes[cursor].parent;\\n            if (self.nodes[parent].left != cursor && self.nodes[parent].right != cursor) {\\n                return false;\\n            }\\n            if (parent == self.root) {\\n                return true;\\n            }\\n            cursor = self.nodes[cursor].parent;\\n        }\\n        return false;\\n    }\\n\\n    function isActiveOrderId(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (bool) {\\n        return orderIdExists(self, value, orderId) && exists(self, value);\\n    }\\n\\n    function getNode(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (\\n            uint256,\\n            uint256,\\n            uint256,\\n            bool,\\n            uint256,\\n            uint256,\\n            uint256,\\n            uint256\\n        )\\n    {\\n        require(exists(self, value), \\\"OrderStatisticsTree(403) - Value does not exist.\\\");\\n        Node storage gn = self.nodes[value];\\n        return (\\n            gn.parent,\\n            gn.left,\\n            gn.right,\\n            gn.red,\\n            gn.head,\\n            gn.tail,\\n            gn.orderCounter,\\n            gn.orderTotalAmount\\n        );\\n    }\\n\\n    function getNodeCount(Tree storage self, uint256 value) internal view returns (uint256) {\\n        Node storage gn = self.nodes[value];\\n        return gn.orderCounter;\\n    }\\n\\n    function getNodeTotalAmount(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (uint256 totalAmount)\\n    {\\n        return self.nodes[value].orderTotalAmount;\\n    }\\n\\n    function getNodeOrderIds(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (uint48[] memory orderIds)\\n    {\\n        Node storage gn = self.nodes[value];\\n        OrderItem memory order = gn.orders[gn.head];\\n        orderIds = new uint48[](gn.orderCounter);\\n\\n        for (uint256 i = 0; i < gn.orderCounter; i++) {\\n            orderIds[i] = order.orderId;\\n            order = gn.orders[order.next];\\n        }\\n    }\\n\\n    function count(Tree storage self) internal view returns (uint256 _count) {\\n        return getNodeCount(self, self.root);\\n    }\\n\\n    function insert(Tree storage self, uint256 value) internal {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(405) - Value to insert cannot be zero\\\");\\n        uint256 cursor;\\n        uint256 probe = self.root;\\n        while (probe != EMPTY) {\\n            cursor = probe;\\n            if (value < probe) {\\n                probe = self.nodes[probe].left;\\n            } else if (value > probe) {\\n                probe = self.nodes[probe].right;\\n            } else if (value == probe) {\\n                return;\\n            }\\n        }\\n\\n        Node storage nValue = self.nodes[value];\\n        // Update order info as a new one if there is already an old node\\n        if (\\n            self.root == EMPTY ||\\n            (self.nodes[cursor].left != value && self.nodes[cursor].right != value)\\n        ) {\\n            nValue.orderCounter = 0;\\n            nValue.orderTotalAmount = 0;\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        }\\n        nValue.parent = cursor;\\n        nValue.left = EMPTY;\\n        nValue.right = EMPTY;\\n        nValue.red = true;\\n\\n        if (cursor == EMPTY) {\\n            self.root = value;\\n        } else if (value < cursor) {\\n            self.nodes[cursor].left = value;\\n        } else {\\n            self.nodes[cursor].right = value;\\n        }\\n        insertFixup(self, value);\\n    }\\n\\n    function remove(Tree storage self, uint256 value) internal {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(407) - Value to delete cannot be zero\\\");\\n        Node storage nValue = self.nodes[value];\\n        uint256 probe;\\n        uint256 cursor;\\n        if (nValue.orderCounter == 0) {\\n            if (self.nodes[value].left == EMPTY || self.nodes[value].right == EMPTY) {\\n                cursor = value;\\n            } else {\\n                cursor = self.nodes[value].right;\\n                while (self.nodes[cursor].left != EMPTY) {\\n                    cursor = self.nodes[cursor].left;\\n                }\\n            }\\n            if (self.nodes[cursor].left != EMPTY) {\\n                probe = self.nodes[cursor].left;\\n            } else {\\n                probe = self.nodes[cursor].right;\\n            }\\n            uint256 cursorParent = self.nodes[cursor].parent;\\n            self.nodes[probe].parent = cursorParent;\\n            if (cursorParent != EMPTY) {\\n                if (cursor == self.nodes[cursorParent].left) {\\n                    self.nodes[cursorParent].left = probe;\\n                } else {\\n                    self.nodes[cursorParent].right = probe;\\n                }\\n            } else {\\n                self.root = probe;\\n            }\\n            bool doFixup = !self.nodes[cursor].red;\\n            if (cursor != value) {\\n                replaceParent(self, cursor, value);\\n                self.nodes[cursor].left = self.nodes[value].left;\\n                self.nodes[self.nodes[cursor].left].parent = cursor;\\n                self.nodes[cursor].right = self.nodes[value].right;\\n                self.nodes[self.nodes[cursor].right].parent = cursor;\\n                self.nodes[cursor].red = self.nodes[value].red;\\n                (cursor, value) = (value, cursor);\\n            }\\n            if (doFixup) {\\n                removeFixup(self, probe);\\n            }\\n            delete self.nodes[cursor];\\n        }\\n    }\\n\\n    function treeMinimum(Tree storage self, uint256 value) private view returns (uint256) {\\n        while (self.nodes[value].left != EMPTY) {\\n            value = self.nodes[value].left;\\n        }\\n        return value;\\n    }\\n\\n    function treeMaximum(Tree storage self, uint256 value) private view returns (uint256) {\\n        while (self.nodes[value].right != EMPTY) {\\n            value = self.nodes[value].right;\\n        }\\n        return value;\\n    }\\n\\n    function rotateLeft(Tree storage self, uint256 value) private {\\n        uint256 cursor = self.nodes[value].right;\\n        uint256 parent = self.nodes[value].parent;\\n        uint256 cursorLeft = self.nodes[cursor].left;\\n        self.nodes[value].right = cursorLeft;\\n        if (cursorLeft != EMPTY) {\\n            self.nodes[cursorLeft].parent = value;\\n        }\\n        self.nodes[cursor].parent = parent;\\n        if (parent == EMPTY) {\\n            self.root = cursor;\\n        } else if (value == self.nodes[parent].left) {\\n            self.nodes[parent].left = cursor;\\n        } else {\\n            self.nodes[parent].right = cursor;\\n        }\\n        self.nodes[cursor].left = value;\\n        self.nodes[value].parent = cursor;\\n    }\\n\\n    function rotateRight(Tree storage self, uint256 value) private {\\n        uint256 cursor = self.nodes[value].left;\\n        uint256 parent = self.nodes[value].parent;\\n        uint256 cursorRight = self.nodes[cursor].right;\\n        self.nodes[value].left = cursorRight;\\n        if (cursorRight != EMPTY) {\\n            self.nodes[cursorRight].parent = value;\\n        }\\n        self.nodes[cursor].parent = parent;\\n        if (parent == EMPTY) {\\n            self.root = cursor;\\n        } else if (value == self.nodes[parent].right) {\\n            self.nodes[parent].right = cursor;\\n        } else {\\n            self.nodes[parent].left = cursor;\\n        }\\n        self.nodes[cursor].right = value;\\n        self.nodes[value].parent = cursor;\\n    }\\n\\n    function insertFixup(Tree storage self, uint256 value) private {\\n        uint256 cursor;\\n        while (value != self.root && self.nodes[self.nodes[value].parent].red) {\\n            uint256 valueParent = self.nodes[value].parent;\\n            if (valueParent == self.nodes[self.nodes[valueParent].parent].left) {\\n                cursor = self.nodes[self.nodes[valueParent].parent].right;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    value = self.nodes[valueParent].parent;\\n                } else {\\n                    if (value == self.nodes[valueParent].right) {\\n                        value = valueParent;\\n                        rotateLeft(self, value);\\n                    }\\n                    valueParent = self.nodes[value].parent;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    rotateRight(self, self.nodes[valueParent].parent);\\n                }\\n            } else {\\n                cursor = self.nodes[self.nodes[valueParent].parent].left;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    value = self.nodes[valueParent].parent;\\n                } else {\\n                    if (value == self.nodes[valueParent].left) {\\n                        value = valueParent;\\n                        rotateRight(self, value);\\n                    }\\n                    valueParent = self.nodes[value].parent;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    rotateLeft(self, self.nodes[valueParent].parent);\\n                }\\n            }\\n        }\\n        self.nodes[self.root].red = false;\\n    }\\n\\n    function replaceParent(\\n        Tree storage self,\\n        uint256 a,\\n        uint256 b\\n    ) private {\\n        uint256 bParent = self.nodes[b].parent;\\n        self.nodes[a].parent = bParent;\\n        if (bParent == EMPTY) {\\n            self.root = a;\\n        } else {\\n            if (b == self.nodes[bParent].left) {\\n                self.nodes[bParent].left = a;\\n            } else {\\n                self.nodes[bParent].right = a;\\n            }\\n        }\\n    }\\n\\n    function removeFixup(Tree storage self, uint256 value) private {\\n        uint256 cursor;\\n        while (value != self.root && !self.nodes[value].red) {\\n            uint256 valueParent = self.nodes[value].parent;\\n            if (value == self.nodes[valueParent].left) {\\n                cursor = self.nodes[valueParent].right;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[valueParent].red = true;\\n                    rotateLeft(self, valueParent);\\n                    cursor = self.nodes[valueParent].right;\\n                }\\n                if (\\n                    !self.nodes[self.nodes[cursor].left].red &&\\n                    !self.nodes[self.nodes[cursor].right].red\\n                ) {\\n                    self.nodes[cursor].red = true;\\n                    value = valueParent;\\n                } else {\\n                    if (!self.nodes[self.nodes[cursor].right].red) {\\n                        self.nodes[self.nodes[cursor].left].red = false;\\n                        self.nodes[cursor].red = true;\\n                        rotateRight(self, cursor);\\n                        cursor = self.nodes[valueParent].right;\\n                    }\\n                    self.nodes[cursor].red = self.nodes[valueParent].red;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[cursor].right].red = false;\\n                    rotateLeft(self, valueParent);\\n                    value = self.root;\\n                }\\n            } else {\\n                cursor = self.nodes[valueParent].left;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[valueParent].red = true;\\n                    rotateRight(self, valueParent);\\n                    cursor = self.nodes[valueParent].left;\\n                }\\n                if (\\n                    !self.nodes[self.nodes[cursor].right].red &&\\n                    !self.nodes[self.nodes[cursor].left].red\\n                ) {\\n                    self.nodes[cursor].red = true;\\n                    value = valueParent;\\n                } else {\\n                    if (!self.nodes[self.nodes[cursor].left].red) {\\n                        self.nodes[self.nodes[cursor].right].red = false;\\n                        self.nodes[cursor].red = true;\\n                        rotateLeft(self, cursor);\\n                        cursor = self.nodes[valueParent].left;\\n                    }\\n                    self.nodes[cursor].red = self.nodes[valueParent].red;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[cursor].left].red = false;\\n                    rotateRight(self, valueParent);\\n                    value = self.root;\\n                }\\n            }\\n        }\\n        self.nodes[value].red = false;\\n    }\\n\\n    function estimateDroppedAmountFromLeft(Tree storage self, uint256 targetFutureValue)\\n        internal\\n        view\\n        returns (uint256 droppedAmount)\\n    {\\n        uint256 cursor = first(self);\\n        uint256 totalDroppedAmountInFV = 0;\\n        droppedAmount = 0;\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (totalDroppedAmountInFV < targetFutureValue && cursor != EMPTY) {\\n            uint256 cursorNodeAmountInPV = self.nodes[cursor].orderTotalAmount;\\n\\n            uint256 cursorNodeAmountInFV = _calculateFutureValue(cursor, cursorNodeAmountInPV);\\n            totalDroppedAmountInFV += cursorNodeAmountInFV;\\n\\n            if (totalDroppedAmountInFV > targetFutureValue) {\\n                uint256 filledAmountInFV = cursorNodeAmountInFV -\\n                    (totalDroppedAmountInFV - targetFutureValue);\\n                droppedAmount += (cursorNodeAmountInPV * filledAmountInFV) / cursorNodeAmountInFV;\\n            } else {\\n                droppedAmount += cursorNodeAmountInPV;\\n            }\\n\\n            cursor = next(self, cursor);\\n        }\\n    }\\n\\n    function estimateDroppedAmountFromRight(Tree storage self, uint256 targetFutureValue)\\n        internal\\n        view\\n        returns (uint256 droppedAmount)\\n    {\\n        uint256 cursor = last(self);\\n        uint256 totalDroppedAmountInFV = 0;\\n        droppedAmount = 0;\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (totalDroppedAmountInFV < targetFutureValue && cursor != EMPTY) {\\n            uint256 cursorNodeAmountInPV = self.nodes[cursor].orderTotalAmount;\\n\\n            uint256 cursorNodeAmountInFV = _calculateFutureValue(cursor, cursorNodeAmountInPV);\\n            totalDroppedAmountInFV += cursorNodeAmountInFV;\\n\\n            if (totalDroppedAmountInFV > targetFutureValue) {\\n                uint256 filledAmountInFV = cursorNodeAmountInFV -\\n                    (totalDroppedAmountInFV - targetFutureValue);\\n                droppedAmount += (cursorNodeAmountInPV * filledAmountInFV) / cursorNodeAmountInFV;\\n            } else {\\n                droppedAmount += cursorNodeAmountInPV;\\n            }\\n\\n            cursor = prev(self, cursor);\\n        }\\n    }\\n\\n    function dropLeft(\\n        Tree storage self,\\n        uint256 amount,\\n        uint256 limitValue\\n    )\\n        internal\\n        returns (\\n            uint256 filledFutureValue,\\n            uint256 remainingAmount,\\n            RemainingOrder memory remainingOrder\\n        )\\n    {\\n        require(amount != EMPTY, \\\"OrderStatisticsTree(408) - Amount to drop cannot be zero\\\");\\n        uint256 value;\\n        uint256 cursor = first(self);\\n        uint256 lastNode = last(self);\\n        uint256 cursorNodeAmount = 0;\\n        uint256 totalAmount = 0;\\n\\n        require(cursor <= limitValue || limitValue == 0, \\\"Insufficient limit value\\\");\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (\\n            totalAmount < amount && cursor != EMPTY && (limitValue == 0 || cursor <= limitValue)\\n        ) {\\n            cursorNodeAmount = self.nodes[cursor].orderTotalAmount;\\n            totalAmount += cursorNodeAmount;\\n            value = cursor;\\n\\n            uint256 filledAmount = cursorNodeAmount -\\n                (totalAmount > amount ? totalAmount - amount : 0);\\n            filledFutureValue += _calculateFutureValue(cursor, filledAmount);\\n\\n            cursor = next(self, cursor);\\n        }\\n\\n        if (totalAmount >= amount || value == limitValue) {\\n            if (totalAmount > amount) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                uint256 filledNodeAmount = cursorNodeAmount - (totalAmount - amount);\\n                remainingOrder = fillOrders(self, cursor, filledNodeAmount);\\n            }\\n\\n            self.nodes[cursor].left = 0;\\n\\n            uint256 parent = self.nodes[cursor].parent;\\n\\n            while (parent != EMPTY) {\\n                if (parent > cursor) {\\n                    // Relink the nodes\\n                    if (self.nodes[cursor].parent != parent) {\\n                        self.nodes[cursor].parent = parent;\\n                        self.nodes[parent].left = cursor;\\n                    }\\n\\n                    cursor = parent;\\n                }\\n\\n                parent = self.nodes[parent].parent;\\n            }\\n        }\\n\\n        if (amount > totalAmount) {\\n            remainingAmount = amount - totalAmount;\\n        }\\n\\n        if (lastNode == value && self.nodes[lastNode].orderTotalAmount == 0) {\\n            // The case that all node is dropped.\\n            self.root = EMPTY;\\n        } else if (value > self.root || (value == self.root && amount >= totalAmount)) {\\n            // The case that the root node is dropped\\n            self.root = cursor;\\n            self.nodes[cursor].parent = 0;\\n        }\\n\\n        if (self.nodes[self.root].left == 0 && self.nodes[self.root].right != 0) {\\n            if (self.nodes[self.nodes[self.root].right].left != 0) {\\n                rotateRight(self, self.nodes[self.root].right);\\n            }\\n            rotateLeft(self, self.root);\\n        }\\n\\n        if (self.nodes[self.root].red) {\\n            self.nodes[self.root].red = false;\\n        }\\n    }\\n\\n    function dropRight(\\n        Tree storage self,\\n        uint256 amount,\\n        uint256 limitValue\\n    )\\n        internal\\n        returns (\\n            uint256 filledFutureValue,\\n            uint256 remainingAmount,\\n            RemainingOrder memory remainingOrder\\n        )\\n    {\\n        require(amount != EMPTY, \\\"OrderStatisticsTree(408) - Amount to drop cannot be zero\\\");\\n        uint256 value;\\n        uint256 cursor = last(self);\\n        uint256 firstNode = first(self);\\n        uint256 cursorNodeAmount = 0;\\n        uint256 totalAmount = 0;\\n\\n        require(cursor >= limitValue || limitValue == 0, \\\"Insufficient limit value\\\");\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (\\n            totalAmount < amount && cursor != EMPTY && (limitValue == 0 || cursor >= limitValue)\\n        ) {\\n            cursorNodeAmount = self.nodes[cursor].orderTotalAmount;\\n            totalAmount += cursorNodeAmount;\\n            value = cursor;\\n\\n            uint256 filledAmount = cursorNodeAmount -\\n                (totalAmount > amount ? totalAmount - amount : 0);\\n            filledFutureValue += _calculateFutureValue(cursor, filledAmount);\\n\\n            cursor = prev(self, cursor);\\n        }\\n\\n        if (totalAmount >= amount || value == limitValue) {\\n            if (totalAmount > amount) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                uint256 filledNodeAmount = cursorNodeAmount - (totalAmount - amount);\\n                remainingOrder = fillOrders(self, cursor, filledNodeAmount);\\n            }\\n\\n            self.nodes[cursor].right = 0;\\n\\n            uint256 parent = self.nodes[cursor].parent;\\n\\n            while (parent != EMPTY) {\\n                if (parent < cursor) {\\n                    // Relink the nodes\\n                    if (self.nodes[cursor].parent != parent) {\\n                        self.nodes[cursor].parent = parent;\\n                        self.nodes[parent].right = cursor;\\n                    }\\n\\n                    cursor = parent;\\n                }\\n\\n                parent = self.nodes[parent].parent;\\n            }\\n        }\\n\\n        if (amount > totalAmount) {\\n            remainingAmount = amount - totalAmount;\\n        }\\n\\n        if (firstNode == value && self.nodes[firstNode].orderTotalAmount == 0) {\\n            // The case that all node is dropped.\\n            self.root = EMPTY;\\n        } else if (value < self.root || (value == self.root && amount >= totalAmount)) {\\n            // The case that the root node is dropped\\n            self.root = cursor;\\n            self.nodes[cursor].parent = 0;\\n        }\\n\\n        if (self.nodes[self.root].right == 0 && self.nodes[self.root].left != 0) {\\n            if (self.nodes[self.nodes[self.root].left].right != 0) {\\n                rotateLeft(self, self.nodes[self.root].left);\\n            }\\n            rotateRight(self, self.root);\\n        }\\n\\n        if (self.nodes[self.root].red) {\\n            self.nodes[self.root].red = false;\\n        }\\n    }\\n\\n    function getFutureValue(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (uint256) {\\n        return _calculateFutureValue(value, self.nodes[value].orders[orderId].amount);\\n    }\\n\\n    // Double linked list functions\\n    /**\\n     * @dev Retrieves the Object denoted by `_id`.\\n     */\\n    function getOrderById(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (OrderItem memory) {\\n        Node storage gn = self.nodes[value];\\n        return gn.orders[orderId];\\n    }\\n\\n    /**\\n     * @dev Return boolean if value, amount and orderId exist in doubly linked list\\n     */\\n    function orderIdExists(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (bool) {\\n        uint48 cursor = orderId;\\n        Node storage gn = self.nodes[value];\\n        OrderItem memory order = gn.orders[cursor];\\n\\n        if (order.orderId != cursor) {\\n            return false;\\n        }\\n\\n        while (order.prev != EMPTY) {\\n            cursor = order.prev;\\n            order = gn.orders[cursor];\\n        }\\n\\n        return cursor == gn.head;\\n    }\\n\\n    function insertOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId,\\n        address user,\\n        uint256 amount,\\n        bool isInterruption\\n    ) internal {\\n        require(amount > 0, \\\"Insufficient amount\\\");\\n        require(value <= ProtocolTypes.PRICE_DIGIT, \\\"Insufficient value\\\");\\n        insert(self, value);\\n\\n        if (isInterruption) {\\n            addHead(self, value, orderId, user, amount);\\n        } else {\\n            addTail(self, value, orderId, user, amount);\\n        }\\n    }\\n\\n    function removeOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        amount = _removeOrder(self, value, orderId);\\n        remove(self, value);\\n    }\\n\\n    /**\\n     * @dev Reduces order amount once market order taken.\\n     */\\n    function fillOrders(\\n        Tree storage self,\\n        uint256 value,\\n        uint256 _amount\\n    ) internal returns (RemainingOrder memory remainingOrder) {\\n        Node storage gn = self.nodes[value];\\n\\n        require(\\n            gn.orderTotalAmount >= _amount,\\n            \\\"OrderStatisticsTree(410) - Amount to fill is insufficient\\\"\\n        );\\n\\n        uint256 remainingAmount = _amount;\\n        uint256 filledCount = 0;\\n        OrderItem memory currentOrder = gn.orders[gn.head];\\n        uint48 orderId = gn.head;\\n\\n        while (orderId != 0 && remainingAmount != 0) {\\n            currentOrder = gn.orders[orderId];\\n\\n            if (currentOrder.amount <= remainingAmount) {\\n                remainingAmount -= currentOrder.amount;\\n                orderId = currentOrder.next;\\n            } else {\\n                remainingOrder = RemainingOrder(\\n                    currentOrder.orderId,\\n                    currentOrder.maker,\\n                    currentOrder.amount - remainingAmount,\\n                    value\\n                );\\n                remainingAmount = 0;\\n            }\\n\\n            filledCount++;\\n        }\\n\\n        _dropOrders(self, value, currentOrder.orderId);\\n\\n        if (remainingOrder.amount > 0) {\\n            // NOTE: This order that the filled partially was dropped from a node, and the unfilled amount\\n            // will be inserted newly as a new orders.\\n            // However, that filled order amount is used when future value is calculated from inactive order.\\n            // For that calculation, this order amount needs to be updated by an actual filled amount at this point.\\n            OrderItem storage order = self.nodes[value].orders[currentOrder.orderId];\\n            order.amount -= remainingOrder.amount;\\n        }\\n    }\\n\\n    /**\\n     * @dev Insert a new OrderItem as the new Head with `_amount` in the amount field, and orderId.\\n     */\\n    function addHead(\\n        Tree storage self,\\n        uint256 _value,\\n        uint48 _orderId,\\n        address _user,\\n        uint256 _amount\\n    ) internal {\\n        Node storage gn = self.nodes[_value];\\n        uint48 orderId = _createOrder(self, _value, _orderId, _user, _amount);\\n        _link(self, _value, orderId, gn.head);\\n        _setHead(self, _value, orderId);\\n        if (gn.tail == 0) _setTail(self, _value, orderId);\\n    }\\n\\n    /**\\n     * @dev Insert a new OrderItem as the new Tail with `_amount` in the amount field, and orderId.\\n     */\\n    function addTail(\\n        Tree storage self,\\n        uint256 _value,\\n        uint48 _orderId,\\n        address _user,\\n        uint256 _amount\\n    ) internal {\\n        Node storage gn = self.nodes[_value];\\n\\n        if (gn.head == 0) {\\n            addHead(self, _value, _orderId, _user, _amount);\\n        } else {\\n            uint48 orderId = _createOrder(self, _value, _orderId, _user, _amount);\\n            _link(self, _value, gn.tail, orderId);\\n            _setTail(self, _value, orderId);\\n        }\\n    }\\n\\n    /**\\n     * @dev Internal function to create an unlinked Order.\\n     */\\n    function _createOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId,\\n        address user,\\n        uint256 amount\\n    ) internal returns (uint48) {\\n        Node storage gn = self.nodes[value];\\n        require(\\n            gn.orders[orderId].timestamp == 0,\\n            \\\"OrderStatisticsTree(409) - Order id already exist.\\\"\\n        );\\n\\n        gn.orderCounter += 1;\\n        gn.orderTotalAmount += amount;\\n        OrderItem memory order = OrderItem(orderId, 0, 0, user, block.timestamp, amount);\\n        gn.orders[orderId] = order;\\n        return order.orderId;\\n    }\\n\\n    /**\\n     * @dev Remove the OrderItem denoted by `_id` from the list.\\n     */\\n    function _removeOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        Node storage gn = self.nodes[value];\\n\\n        OrderItem memory order = gn.orders[orderId];\\n        amount = order.amount;\\n\\n        if (gn.head == orderId && gn.tail == orderId) {\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        } else if (gn.head == orderId) {\\n            _setHead(self, value, order.next);\\n            gn.orders[order.next].prev = 0;\\n        } else if (gn.tail == orderId) {\\n            _setTail(self, value, order.prev);\\n            gn.orders[order.prev].next = 0;\\n        } else {\\n            _link(self, value, order.prev, order.next);\\n        }\\n        delete gn.orders[order.orderId];\\n        gn.orderCounter -= 1;\\n        gn.orderTotalAmount -= order.amount;\\n    }\\n\\n    /**\\n     * @dev Drop the OrderItems older than or equal `orderId` from the list\\n     */\\n    function _dropOrders(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        Node storage gn = self.nodes[value];\\n\\n        OrderItem memory order = gn.orders[orderId];\\n        amount = order.amount;\\n        uint256 cursor = gn.head;\\n        uint256 removedCount = 1;\\n        uint256 removedAmount = gn.orders[cursor].amount;\\n\\n        while (cursor != orderId) {\\n            cursor = gn.orders[cursor].next;\\n            removedCount++;\\n            removedAmount += gn.orders[cursor].amount;\\n        }\\n\\n        if (gn.tail == orderId) {\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        } else {\\n            _setHead(self, value, order.next);\\n            gn.orders[order.next].prev = 0;\\n        }\\n\\n        gn.orderCounter -= removedCount;\\n        gn.orderTotalAmount -= removedAmount;\\n    }\\n\\n    /**\\n     * @dev Internal function to update the Head pointer.\\n     */\\n    function _setHead(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.head = orderId;\\n    }\\n\\n    /**\\n     * @dev Internal function to update the Tail pointer.\\n     */\\n    function _setTail(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.tail = orderId;\\n    }\\n\\n    /**\\n     * @dev Internal function to link an Object to another.\\n     */\\n    function _link(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 _prevId,\\n        uint48 _nextId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.orders[_prevId].next = _nextId;\\n        gn.orders[_nextId].prev = _prevId;\\n    }\\n\\n    function _calculateFutureValue(uint256 unitPrice, uint256 amount)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        return (amount * ProtocolTypes.PRICE_DIGIT) / unitPrice;\\n    }\\n}\\n\",\"keccak256\":\"0x50a2b1c27ae2a7bb2177421283c1157065f53e826fd46863e5ec18d8aa0ecd57\",\"license\":\"MIT\"},\"contracts/libraries/logics/FundCalculationLogic.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {EnumerableSet} from \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\n// interfaces\\nimport {ILendingMarket} from \\\"../../interfaces/ILendingMarket.sol\\\";\\nimport {IFutureValueVault} from \\\"../../interfaces/IFutureValueVault.sol\\\";\\n// libraries\\nimport {AddressResolverLib} from \\\"../AddressResolverLib.sol\\\";\\n// types\\nimport {ProtocolTypes} from \\\"../../types/ProtocolTypes.sol\\\";\\n// storages\\nimport {LendingMarketControllerStorage as Storage} from \\\"../../storages/LendingMarketControllerStorage.sol\\\";\\n\\nlibrary FundCalculationLogic {\\n    using EnumerableSet for EnumerableSet.Bytes32Set;\\n\\n    event UpdateOrderFeeRate(uint256 previousRate, uint256 ratio);\\n\\n    struct CalculatedAmountVars {\\n        uint256 debtFVAmount;\\n        uint256 debtPVAmount;\\n        uint256 estimatedDebtPVAmount;\\n        uint256 liquidationPVAmount;\\n    }\\n\\n    struct CalculatedTotalFundInETHVars {\\n        bool[] isCollateral;\\n        bytes32 ccy;\\n        uint256[] amounts;\\n        uint256[] amountsInETH;\\n        uint256 plusDepositAmount;\\n        uint256 minusDepositAmount;\\n    }\\n\\n    function updateOrderFeeRate(bytes32 _ccy, uint256 _orderFeeRate) internal {\\n        require(_orderFeeRate <= ProtocolTypes.PCT_DIGIT, \\\"Invalid order fee rate\\\");\\n\\n        if (_orderFeeRate != Storage.slot().orderFeeRates[_ccy]) {\\n            emit UpdateOrderFeeRate(Storage.slot().orderFeeRates[_ccy], _orderFeeRate);\\n            Storage.slot().orderFeeRates[_ccy] = _orderFeeRate;\\n        }\\n    }\\n\\n    function calculateOrderFeeAmount(\\n        bytes32 _ccy,\\n        uint256 _amount,\\n        uint256 _maturity\\n    ) public view returns (uint256 orderFeeAmount) {\\n        require(block.timestamp < _maturity, \\\"Invalid maturity\\\");\\n        uint256 currentMaturity = _maturity - block.timestamp;\\n\\n        // NOTE: The formula is:\\n        // actualRate = feeRate * (currentMaturity / SECONDS_IN_YEAR)\\n        // orderFeeAmount = amount * actualRate\\n        orderFeeAmount =\\n            (Storage.slot().orderFeeRates[_ccy] * currentMaturity * _amount) /\\n            (ProtocolTypes.SECONDS_IN_YEAR * ProtocolTypes.PCT_DIGIT);\\n    }\\n\\n    function convertToLiquidationAmountFromCollateral(\\n        address _liquidator,\\n        address _user,\\n        bytes32 _collateralCcy,\\n        bytes32 _debtCcy,\\n        uint256 _debtMaturity,\\n        uint24 _poolFee\\n    ) public returns (uint256 liquidationAmount) {\\n        CalculatedAmountVars memory vars;\\n\\n        uint256 liquidationPVAmountInETH = AddressResolverLib.tokenVault().getLiquidationAmount(\\n            _user\\n        );\\n        require(liquidationPVAmountInETH != 0, \\\"User has enough collateral\\\");\\n\\n        int256 futureValueAmount = calculateActualFutureValue(_debtCcy, _debtMaturity, _user);\\n        require(futureValueAmount < 0, \\\"No debt in the selected maturity\\\");\\n\\n        vars.debtFVAmount = uint256(-futureValueAmount);\\n        vars.debtPVAmount = uint256(\\n            _calculatePVFromFVInMaturity(\\n                _debtCcy,\\n                _debtMaturity,\\n                -futureValueAmount,\\n                Storage.slot().maturityLendingMarkets[_debtCcy][_debtMaturity]\\n            )\\n        );\\n\\n        vars.liquidationPVAmount = AddressResolverLib.currencyController().convertFromETH(\\n            _debtCcy,\\n            liquidationPVAmountInETH\\n        );\\n\\n        // If the debt amount is less than the liquidation amount, the debt amount is used as the liquidation amount.\\n        // In that case, the actual liquidation ratio is under the liquidation threshold ratio.\\n        vars.liquidationPVAmount = vars.liquidationPVAmount > vars.debtPVAmount\\n            ? vars.debtPVAmount\\n            : vars.liquidationPVAmount;\\n\\n        // Estimate the filled amount from actual orders in the order book using the future value of user debt.\\n        // If the estimated amount is less than the liquidation amount, the estimated amount is used as\\n        // the liquidation amount because the user has only the original amount of the estimation as collateral.\\n        vars.estimatedDebtPVAmount = ILendingMarket(\\n            Storage.slot().maturityLendingMarkets[_debtCcy][_debtMaturity]\\n        ).estimateFilledAmount(ProtocolTypes.Side.LEND, vars.debtFVAmount);\\n\\n        liquidationAmount = vars.liquidationPVAmount > vars.estimatedDebtPVAmount\\n            ? vars.estimatedDebtPVAmount\\n            : vars.liquidationPVAmount;\\n\\n        // Swap collateral from deposited currency to debt currency using Uniswap.\\n        // This swapped collateral is used to unwind the debt.\\n        liquidationAmount = AddressResolverLib.tokenVault().swapDepositAmounts(\\n            _liquidator,\\n            _user,\\n            _collateralCcy,\\n            _debtCcy,\\n            liquidationAmount,\\n            _poolFee\\n        );\\n    }\\n\\n    function calculateActualFutureValue(\\n        bytes32 _ccy,\\n        uint256 _maturity,\\n        address _user\\n    ) public view returns (int256 futureValue) {\\n        address market = Storage.slot().maturityLendingMarkets[_ccy][_maturity];\\n        bool isDefaultMarket = market == Storage.slot().lendingMarkets[_ccy][0];\\n\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address currentMarket = Storage.slot().lendingMarkets[_ccy][i];\\n            uint256 currentMaturity = ILendingMarket(currentMarket).getMaturity();\\n\\n            if (isDefaultMarket || currentMarket == market) {\\n                // Get FV from Future Value Vault\\n                (int256 futureValueInMaturity, uint256 fvMaturity) = IFutureValueVault(\\n                    Storage.slot().futureValueVaults[_ccy][currentMarket]\\n                ).getFutureValue(_user);\\n\\n                if (isDefaultMarket && (i == 0 || currentMaturity != fvMaturity)) {\\n                    futureValue += _calculateCurrentFVFromFVInMaturity(\\n                        _ccy,\\n                        fvMaturity,\\n                        futureValueInMaturity,\\n                        currentMarket\\n                    );\\n                } else if (!isDefaultMarket && currentMaturity == fvMaturity) {\\n                    futureValue += futureValueInMaturity;\\n                }\\n\\n                // Get FV from inactive borrow orders\\n                (, , uint256 borrowFVInMaturity, uint256 borrowOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromBorrowOrders(_user);\\n\\n                if (isDefaultMarket && (i == 0 || currentMaturity != borrowOrdersMaturity)) {\\n                    futureValue -= _calculateCurrentFVFromFVInMaturity(\\n                        _ccy,\\n                        borrowOrdersMaturity,\\n                        int256(borrowFVInMaturity),\\n                        currentMarket\\n                    );\\n                } else if (!isDefaultMarket && currentMaturity == borrowOrdersMaturity) {\\n                    futureValue -= int256(borrowFVInMaturity);\\n                }\\n\\n                // Get FV from inactive lend orders\\n                (, , uint256 lendFVInMaturity, uint256 lendOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromLendOrders(_user);\\n\\n                if ((isDefaultMarket && (i == 0 || currentMaturity != lendOrdersMaturity))) {\\n                    futureValue += _calculateCurrentFVFromFVInMaturity(\\n                        _ccy,\\n                        lendOrdersMaturity,\\n                        int256(lendFVInMaturity),\\n                        currentMarket\\n                    );\\n                } else if (!isDefaultMarket && currentMaturity == lendOrdersMaturity) {\\n                    futureValue += int256(lendFVInMaturity);\\n                }\\n            }\\n        }\\n\\n        // Add FV from Genesis Value Vault if the market is that the lending position is rolled to.\\n        if (isDefaultMarket) {\\n            futureValue += AddressResolverLib.genesisValueVault().getGenesisValueInFutureValue(\\n                _ccy,\\n                _user\\n            );\\n        }\\n    }\\n\\n    function calculateActualPresentValue(\\n        bytes32 _ccy,\\n        uint256 _maturity,\\n        address _user\\n    ) public view returns (int256 presentValue) {\\n        address market = Storage.slot().maturityLendingMarkets[_ccy][_maturity];\\n        bool isDefaultMarket = market == Storage.slot().lendingMarkets[_ccy][0];\\n\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address currentMarket = Storage.slot().lendingMarkets[_ccy][i];\\n            uint256 currentMaturity = ILendingMarket(currentMarket).getMaturity();\\n\\n            if (isDefaultMarket || currentMarket == market) {\\n                // Get PV from Future Value Vault\\n                (int256 futureValueInMaturity, uint256 fvMaturity) = IFutureValueVault(\\n                    Storage.slot().futureValueVaults[_ccy][currentMarket]\\n                ).getFutureValue(_user);\\n\\n                if (\\n                    (isDefaultMarket && (i == 0 || currentMaturity != fvMaturity)) ||\\n                    (!isDefaultMarket && currentMaturity == fvMaturity)\\n                ) {\\n                    presentValue += _calculatePVFromFVInMaturity(\\n                        _ccy,\\n                        fvMaturity,\\n                        futureValueInMaturity,\\n                        currentMarket\\n                    );\\n                }\\n\\n                // Get PV from inactive borrow orders\\n                (, , uint256 borrowFVInMaturity, uint256 borrowOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromBorrowOrders(_user);\\n\\n                if (\\n                    (isDefaultMarket && (i == 0 || currentMaturity != borrowOrdersMaturity)) ||\\n                    (!isDefaultMarket && currentMaturity == borrowOrdersMaturity)\\n                ) {\\n                    presentValue -= _calculatePVFromFVInMaturity(\\n                        _ccy,\\n                        borrowOrdersMaturity,\\n                        int256(borrowFVInMaturity),\\n                        currentMarket\\n                    );\\n                }\\n\\n                // Get PV from inactive lend orders\\n                (, , uint256 lendFVInMaturity, uint256 lendOrdersMaturity) = ILendingMarket(\\n                    currentMarket\\n                ).getTotalAmountFromLendOrders(_user);\\n\\n                if (\\n                    (isDefaultMarket && (i == 0 || currentMaturity != lendOrdersMaturity)) ||\\n                    (!isDefaultMarket && currentMaturity == lendOrdersMaturity)\\n                ) {\\n                    presentValue += _calculatePVFromFVInMaturity(\\n                        _ccy,\\n                        lendOrdersMaturity,\\n                        int256(lendFVInMaturity),\\n                        currentMarket\\n                    );\\n                }\\n            }\\n        }\\n\\n        // Add PV from Genesis Value Vault if the market is that the lending position is rolled to.\\n        if (isDefaultMarket) {\\n            presentValue += _calculatePVFromFV(\\n                AddressResolverLib.genesisValueVault().getGenesisValueInFutureValue(_ccy, _user),\\n                ILendingMarket(Storage.slot().lendingMarkets[_ccy][0]).getMidUnitPrice()\\n            );\\n        }\\n    }\\n\\n    function calculateActualPresentValue(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (int256 totalPresentValue)\\n    {\\n        // Get PV from Future Value Vault and Genesis Value Vault.\\n        totalPresentValue = _getTotalPresentValue(_ccy, _user);\\n\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address market = Storage.slot().lendingMarkets[_ccy][i];\\n\\n            // Get PV from inactive borrow orders\\n            (, , uint256 borrowFVInMaturity, uint256 borrowOrdersMaturity) = ILendingMarket(market)\\n                .getTotalAmountFromBorrowOrders(_user);\\n\\n            totalPresentValue -= _calculatePVFromFVInMaturity(\\n                _ccy,\\n                borrowOrdersMaturity,\\n                int256(borrowFVInMaturity),\\n                market\\n            );\\n\\n            // Get PV from inactive lend orders\\n            (, , uint256 lendFVInMaturity, uint256 lendOrdersMaturity) = ILendingMarket(market)\\n                .getTotalAmountFromLendOrders(_user);\\n\\n            totalPresentValue += _calculatePVFromFVInMaturity(\\n                _ccy,\\n                lendOrdersMaturity,\\n                int256(lendFVInMaturity),\\n                market\\n            );\\n        }\\n    }\\n\\n    function calculateLentFundsFromOrders(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (\\n            uint256 totalWorkingOrdersAmount,\\n            uint256 totalClaimableAmount,\\n            uint256 totalLentAmount\\n        )\\n    {\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            (\\n                uint256 workingOrdersAmount,\\n                uint256 claimableAmount,\\n                uint256 lentAmount\\n            ) = _calculateLentFundsFromOrders(_ccy, Storage.slot().lendingMarkets[_ccy][i], _user);\\n\\n            totalWorkingOrdersAmount += workingOrdersAmount;\\n            totalClaimableAmount += claimableAmount;\\n            totalLentAmount += lentAmount;\\n        }\\n    }\\n\\n    function calculateBorrowedFundsFromOrders(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (\\n            uint256 totalWorkingOrdersAmount,\\n            uint256 totalDebtAmount,\\n            uint256 totalBorrowedAmount\\n        )\\n    {\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            (\\n                uint256 workingOrdersAmount,\\n                uint256 debtAmount,\\n                uint256 borrowedAmount\\n            ) = _calculateBorrowedFundsFromOrders(\\n                    _ccy,\\n                    Storage.slot().lendingMarkets[_ccy][i],\\n                    _user\\n                );\\n\\n            totalWorkingOrdersAmount += workingOrdersAmount;\\n            totalDebtAmount += debtAmount;\\n            totalBorrowedAmount += borrowedAmount;\\n        }\\n    }\\n\\n    function calculateLentFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        public\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 lentAmount\\n        )\\n    {\\n        return _calculateLentFundsFromOrders(_ccy, _market, _user);\\n    }\\n\\n    function calculateBorrowedFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        public\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        )\\n    {\\n        return _calculateBorrowedFundsFromOrders(_ccy, _market, _user);\\n    }\\n\\n    function calculateFunds(bytes32 _ccy, address _user)\\n        public\\n        view\\n        returns (\\n            uint256 workingLendOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 collateralAmount,\\n            uint256 lentAmount,\\n            uint256 workingBorrowOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        )\\n    {\\n        (workingLendOrdersAmount, claimableAmount, lentAmount) = calculateLentFundsFromOrders(\\n            _ccy,\\n            _user\\n        );\\n        (workingBorrowOrdersAmount, debtAmount, borrowedAmount) = calculateBorrowedFundsFromOrders(\\n            _ccy,\\n            _user\\n        );\\n        collateralAmount = claimableAmount;\\n\\n        // Calculate total present value from Future Value Vault and Genesis Value Vault.\\n        int256 totalPresentValue = _getTotalPresentValue(_ccy, _user);\\n        if (totalPresentValue >= 0) {\\n            // Add to claimableAmount\\n            claimableAmount += uint256(totalPresentValue);\\n        } else {\\n            // Add to debtAmount\\n            debtAmount += uint256(-totalPresentValue);\\n        }\\n\\n        if (claimableAmount > 0) {\\n            uint256 haircut = AddressResolverLib.currencyController().getHaircut(_ccy);\\n            collateralAmount = (claimableAmount * haircut) / ProtocolTypes.PCT_DIGIT;\\n        }\\n    }\\n\\n    function calculateTotalFundsInETH(\\n        address _user,\\n        bytes32 _depositCcy,\\n        uint256 _depositAmount\\n    )\\n        external\\n        view\\n        returns (\\n            uint256 totalWorkingLendOrdersAmount,\\n            uint256 totalClaimableAmount,\\n            uint256 totalCollateralAmount,\\n            uint256 totalLentAmount,\\n            uint256 totalWorkingBorrowOrdersAmount,\\n            uint256 totalDebtAmount,\\n            uint256 totalBorrowedAmount,\\n            bool isEnoughDeposit\\n        )\\n    {\\n        EnumerableSet.Bytes32Set storage currencySet = Storage.slot().usedCurrencies[_user];\\n        CalculatedTotalFundInETHVars memory vars;\\n\\n        vars.isCollateral = AddressResolverLib.tokenVault().isCollateral(currencySet.values());\\n        vars.plusDepositAmount = _depositAmount;\\n\\n        // Calculate total funds from the user's order list\\n        for (uint256 i = 0; i < currencySet.length(); i++) {\\n            vars.ccy = currencySet.at(i);\\n            vars.amounts = new uint256[](7);\\n\\n            // 0: workingLendOrdersAmount\\n            // 1: claimableAmount\\n            // 2: collateralAmount\\n            // 3: lentAmount\\n            // 4: workingBorrowOrdersAmount\\n            // 5: debtAmount\\n            // 6: borrowedAmount\\n            (\\n                vars.amounts[0],\\n                vars.amounts[1],\\n                vars.amounts[2],\\n                vars.amounts[3],\\n                vars.amounts[4],\\n                vars.amounts[5],\\n                vars.amounts[6]\\n            ) = calculateFunds(vars.ccy, _user);\\n\\n            if (vars.ccy == _depositCcy) {\\n                // plusDepositAmount: depositAmount + borrowedAmount\\n                // minusDepositAmount: workingLendOrdersAmount + lentAmount;\\n                vars.plusDepositAmount += vars.amounts[6];\\n                vars.minusDepositAmount += vars.amounts[0] + vars.amounts[3];\\n            }\\n\\n            vars.amountsInETH = AddressResolverLib.currencyController().convertToETH(\\n                vars.ccy,\\n                vars.amounts\\n            );\\n\\n            totalWorkingLendOrdersAmount += vars.amountsInETH[0];\\n            totalClaimableAmount += vars.amountsInETH[1];\\n            totalCollateralAmount += vars.amountsInETH[2];\\n            totalWorkingBorrowOrdersAmount += vars.amountsInETH[4];\\n            totalDebtAmount += vars.amountsInETH[5];\\n\\n            if (vars.isCollateral[i]) {\\n                totalLentAmount += vars.amountsInETH[3];\\n                totalBorrowedAmount += vars.amountsInETH[6];\\n            }\\n        }\\n\\n        isEnoughDeposit = vars.plusDepositAmount >= vars.minusDepositAmount;\\n    }\\n\\n    function _calculateCurrentFVFromFVInMaturity(\\n        bytes32 _ccy,\\n        uint256 maturity,\\n        int256 futureValueInMaturity,\\n        address lendingMarketInMaturity\\n    ) internal view returns (int256 futureValue) {\\n        if (\\n            AddressResolverLib\\n                .genesisValueVault()\\n                .getMaturityUnitPrice(_ccy, maturity)\\n                .compoundFactor == 0\\n        ) {\\n            uint256 unitPriceInMaturity = ILendingMarket(lendingMarketInMaturity).getMidUnitPrice();\\n            int256 presetValue = _calculatePVFromFV(futureValueInMaturity, unitPriceInMaturity);\\n            uint256 currentUnitPrice = ILendingMarket(Storage.slot().lendingMarkets[_ccy][0])\\n                .getMidUnitPrice();\\n\\n            futureValue =\\n                (presetValue * int256(ProtocolTypes.PRICE_DIGIT)) /\\n                int256(currentUnitPrice);\\n        } else {\\n            futureValue = AddressResolverLib.genesisValueVault().calculateCurrentFVFromFVInMaturity(\\n                    _ccy,\\n                    maturity,\\n                    futureValueInMaturity\\n                );\\n        }\\n    }\\n\\n    function _calculatePVFromFVInMaturity(\\n        bytes32 _ccy,\\n        uint256 maturity,\\n        int256 futureValueInMaturity,\\n        address lendingMarketInMaturity\\n    ) internal view returns (int256 totalPresentValue) {\\n        uint256 compoundFactorInMaturity = AddressResolverLib\\n            .genesisValueVault()\\n            .getMaturityUnitPrice(_ccy, maturity)\\n            .compoundFactor;\\n        int256 futureValue;\\n        uint256 unitPrice;\\n\\n        if (compoundFactorInMaturity == 0) {\\n            futureValue = futureValueInMaturity;\\n            unitPrice = ILendingMarket(lendingMarketInMaturity).getMidUnitPrice();\\n        } else {\\n            futureValue = AddressResolverLib.genesisValueVault().calculateCurrentFVFromFVInMaturity(\\n                    _ccy,\\n                    maturity,\\n                    futureValueInMaturity\\n                );\\n            unitPrice = ILendingMarket(Storage.slot().lendingMarkets[_ccy][0]).getMidUnitPrice();\\n        }\\n\\n        return _calculatePVFromFV(futureValue, unitPrice);\\n    }\\n\\n    function _calculatePVFromFV(int256 _futureValue, uint256 _unitPrice)\\n        internal\\n        pure\\n        returns (int256)\\n    {\\n        // NOTE: The formula is: futureValue = presentValue / unitPrice.\\n        return (_futureValue * int256(_unitPrice)) / int256(ProtocolTypes.PRICE_DIGIT);\\n    }\\n\\n    function _getTotalPresentValue(bytes32 _ccy, address _user)\\n        internal\\n        view\\n        returns (int256 totalPresentValue)\\n    {\\n        // Get PV from Future Value Vault\\n        for (uint256 i = 0; i < Storage.slot().lendingMarkets[_ccy].length; i++) {\\n            address marketAddr = Storage.slot().lendingMarkets[_ccy][i];\\n            (int256 futureValueInMaturity, uint256 maturity) = IFutureValueVault(\\n                Storage.slot().futureValueVaults[_ccy][marketAddr]\\n            ).getFutureValue(_user);\\n\\n            totalPresentValue += _calculatePVFromFVInMaturity(\\n                _ccy,\\n                maturity,\\n                futureValueInMaturity,\\n                Storage.slot().lendingMarkets[_ccy][i]\\n            );\\n        }\\n\\n        // Get PV from Genesis Value Vault\\n        totalPresentValue += _calculatePVFromFV(\\n            AddressResolverLib.genesisValueVault().getGenesisValueInFutureValue(_ccy, _user),\\n            ILendingMarket(Storage.slot().lendingMarkets[_ccy][0]).getMidUnitPrice()\\n        );\\n    }\\n\\n    function _calculateLentFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        internal\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 claimableAmount,\\n            uint256 lentAmount\\n        )\\n    {\\n        (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValueInMaturity,\\n            uint256 maturity\\n        ) = ILendingMarket(_market).getTotalAmountFromLendOrders(_user);\\n\\n        workingOrdersAmount = activeAmount;\\n        claimableAmount = uint256(\\n            _calculatePVFromFVInMaturity(\\n                _ccy,\\n                maturity,\\n                int256(inactiveFutureValueInMaturity),\\n                _market\\n            )\\n        );\\n        lentAmount = inactiveAmount;\\n    }\\n\\n    function _calculateBorrowedFundsFromOrders(\\n        bytes32 _ccy,\\n        address _market,\\n        address _user\\n    )\\n        internal\\n        view\\n        returns (\\n            uint256 workingOrdersAmount,\\n            uint256 debtAmount,\\n            uint256 borrowedAmount\\n        )\\n    {\\n        (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValueInMaturity,\\n            uint256 maturity\\n        ) = ILendingMarket(_market).getTotalAmountFromBorrowOrders(_user);\\n\\n        workingOrdersAmount = activeAmount;\\n        debtAmount = uint256(\\n            _calculatePVFromFVInMaturity(\\n                _ccy,\\n                maturity,\\n                int256(inactiveFutureValueInMaturity),\\n                _market\\n            )\\n        );\\n        borrowedAmount = inactiveAmount;\\n    }\\n}\\n\",\"keccak256\":\"0x207480c78a482cc24bca0fe099a207d5c56293350f51966bd525889ccabef209\",\"license\":\"MIT\"},\"contracts/storages/CurrencyControllerStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol\\\";\\nimport \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\n\\nstruct Currency {\\n    bool isSupported;\\n    string name;\\n}\\n\\nlibrary CurrencyControllerStorage {\\n    using EnumerableSet for EnumerableSet.Bytes32Set;\\n\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.currencyController\\\");\\n\\n    struct Storage {\\n        // Protocol currencies\\n        EnumerableSet.Bytes32Set currencies;\\n        mapping(bytes32 => uint256) haircuts;\\n        // PriceFeed\\n        mapping(bytes32 => AggregatorV3Interface) usdPriceFeeds;\\n        mapping(bytes32 => AggregatorV3Interface) ethPriceFeeds;\\n        mapping(bytes32 => uint8) usdDecimals;\\n        mapping(bytes32 => uint8) ethDecimals;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x318293c6e7a2b9129e4c4e05a873c772e3a0cc4a92b40cc88749586f716c6643\",\"license\":\"MIT\"},\"contracts/storages/GenesisValueVaultStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nstruct MaturityUnitPrice {\\n    uint256 unitPrice;\\n    uint256 compoundFactor;\\n    uint256 next;\\n    uint256 prev;\\n}\\n\\nlibrary GenesisValueVaultStorage {\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.genesisValueVault\\\");\\n\\n    struct Storage {\\n        mapping(bytes32 => bool) isInitialized;\\n        mapping(bytes32 => uint256) initialCompoundFactors;\\n        mapping(bytes32 => uint256) compoundFactors;\\n        mapping(bytes32 => uint256) currentMaturity;\\n        mapping(bytes32 => uint8) decimals;\\n        // Mapping from user to balance per currency\\n        mapping(bytes32 => mapping(address => int256)) balances;\\n        mapping(bytes32 => uint256) totalLendingSupplies;\\n        mapping(bytes32 => uint256) totalBorrowingSupplies;\\n        // Mapping from maturity to rate per currency\\n        mapping(bytes32 => mapping(uint256 => MaturityUnitPrice)) maturityUnitPrices;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x54db3779bbc12fa6f080e017f07334f6f846739b8b3648d56b113f67bec3e48d\",\"license\":\"MIT\"},\"contracts/storages/LendingMarketControllerStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"@openzeppelin/contracts/utils/structs/EnumerableSet.sol\\\";\\n\\nlibrary LendingMarketControllerStorage {\\n    using EnumerableSet for EnumerableSet.Bytes32Set;\\n\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.lendingMarketController\\\");\\n\\n    struct Storage {\\n        // Mapping from currency to lending market contract addresses\\n        mapping(bytes32 => address[]) lendingMarkets;\\n        // Mapping from lending market contract address to future value vault contract address per currency\\n        mapping(bytes32 => mapping(address => address)) futureValueVaults;\\n        // Mapping from maturity to lending market contract address per currency\\n        mapping(bytes32 => mapping(uint256 => address)) maturityLendingMarkets;\\n        // Mapping from currency to genesis date in the lending market\\n        mapping(bytes32 => uint256) genesisDates;\\n        // Mapping from user to used currency\\n        mapping(address => EnumerableSet.Bytes32Set) usedCurrencies;\\n        // Mapping from user to active order existence per currency and maturity\\n        mapping(address => mapping(bytes32 => mapping(uint256 => bool))) activeOrderExistences;\\n        // Mapping from currency to order fee rate received by protocol (in basis point)\\n        mapping(bytes32 => uint256) orderFeeRates;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x7ac15ce0b9a7c4630500f73bfa748dafe15899bbf5bfdc74f082c0853dc918ea\",\"license\":\"MIT\"},\"contracts/storages/LendingMarketStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"../types/ProtocolTypes.sol\\\";\\nimport \\\"../libraries/OrderStatisticsTreeLib.sol\\\";\\n\\nstruct MarketOrder {\\n    ProtocolTypes.Side side;\\n    uint256 unitPrice; // in basis points\\n    uint256 maturity;\\n    uint256 timestamp;\\n}\\n\\nlibrary LendingMarketStorage {\\n    using OrderStatisticsTreeLib for OrderStatisticsTreeLib.Tree;\\n\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.lendingMarket\\\");\\n\\n    struct Storage {\\n        uint48 lastOrderId;\\n        bytes32 ccy;\\n        uint256 genesisDate;\\n        uint256 maturity;\\n        // Mapping from user to active lend order ids\\n        mapping(address => uint48[]) activeLendOrderIds;\\n        // Mapping from user to active borrow order ids\\n        mapping(address => uint48[]) activeBorrowOrderIds;\\n        // Mapping from user to current maturity\\n        mapping(address => uint256) userCurrentMaturities;\\n        // Mapping from orderId to order\\n        mapping(uint256 => MarketOrder) orders;\\n        // Mapping from maturity to lending orders\\n        mapping(uint256 => OrderStatisticsTreeLib.Tree) lendOrders;\\n        // Mapping from maturity to borrowing orders\\n        mapping(uint256 => OrderStatisticsTreeLib.Tree) borrowOrders;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x853ba93239853c61035a10d0b2dc1249039b33fba8f29d4a9dbd7601ec55216b\",\"license\":\"MIT\"},\"contracts/storages/MixinAddressResolverStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {IAddressResolver} from \\\"../interfaces/IAddressResolver.sol\\\";\\n\\nlibrary MixinAddressResolverStorage {\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.mixinAddressResolver\\\");\\n\\n    struct Storage {\\n        IAddressResolver resolver;\\n        mapping(bytes32 => address) addressCache;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x852b885b6264a58930a0945c68842717e19f954eaefc0137235e6f263e17fa9d\",\"license\":\"MIT\"},\"contracts/types/ProtocolTypes.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\n/**\\n * @dev ProtocolTypes is a base-level contract that holds common Secured Finance protocol types\\n * @author Secured Finance\\n */\\nlibrary ProtocolTypes {\\n    // Constant values\\n    uint256 public constant PRICE_DIGIT = 10000; // price digit in the basis (10000 -> 1)\\n    uint256 public constant PCT_DIGIT = 10000; // percentage digit in the basis (10000 -> 100%)\\n\\n    uint256 internal constant DAYS_IN_YEAR = 365;\\n    uint256 internal constant SECONDS_IN_MONTH = 2592000; // 60 * 60 * 24 * 30 * 12\\n    uint256 internal constant SECONDS_IN_YEAR = 31536000; // 60 * 60 * 24 * 365\\n\\n    // Lending market common types\\n    enum Side {\\n        LEND,\\n        BORROW\\n    }\\n}\\n\",\"keccak256\":\"0xb4f718379c4b1a90400813f4789e853dccb1e474697282e4ed5e36c0d0bd385b\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x612bb161003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100b35760003560e01c80637dfeb4511161007b5780637dfeb451146101b75780637e609715146101ca57806385f33967146101dd5780638ba14e38146101f05780639c599f8b146102035780639d3fc35d1461022357600080fd5b80630312b528146100b85780631ce4ded41461010d5780635c3477651461013b57806371eb43531461018357806373bb3b09146101a4575b600080fd5b6100cb6100c636600461248c565b610236565b604080519889526020890197909752958701949094526060860192909252608085015260a084015260c0830152151560e0820152610100015b60405180910390f35b61012061011b3660046124bf565b610743565b60408051938452602084019290925290820152606001610104565b61014e6101493660046124fb565b610762565b604080519788526020880196909652948601939093526060850191909152608084015260a083015260c082015260e001610104565b610196610191366004612527565b610886565b604051908152602001610104565b6101206101b23660046124fb565b610de6565b6101966101c5366004612527565b610ea1565b6101206101d83660046124bf565b61136a565b6101966101eb3660046124fb565b61137a565b6101966101fe366004612553565b61153a565b81801561020f57600080fd5b5061019661021e36600461257f565b6115e5565b6101206102313660046124fb565b6119c7565b600080600080600080600080600061024c611a7a565b60040160008d6001600160a01b03166001600160a01b0316815260200190815260200160002090506102b06040518060c001604052806060815260200160008019168152602001606081526020016060815260200160008152602001600081525090565b6102b8611a9e565b6001600160a01b0316633f90a08e6102cf84611abb565b6040518263ffffffff1660e01b81526004016102eb91906125ea565b60006040518083038186803b15801561030357600080fd5b505afa158015610317573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261033f9190810190612699565b8152608081018b905260005b61035483611acc565b811015610725576103658382611ad6565b60208301526040805160078082526101008201909252908160200160208202803683375050506040830152602082015161039f908f610762565b88604001516000815181106103b6576103b661273e565b6020026020010189604001516001815181106103d4576103d461273e565b602002602001018a604001516002815181106103f2576103f261273e565b602002602001018b604001516003815181106104105761041061273e565b602002602001018c6040015160048151811061042e5761042e61273e565b602002602001018d6040015160058151811061044c5761044c61273e565b602002602001018e6040015160068151811061046a5761046a61273e565b6020908102919091018101979097529690965295909452949093529390529290529190528201518d14156105295781604001516006815181106104af576104af61273e565b6020026020010151826080018181516104c8919061276a565b9052506040820151805160039081106104e3576104e361273e565b602002602001015182604001516000815181106105025761050261273e565b6020026020010151610514919061276a565b8260a001818151610525919061276a565b9052505b610531611ae9565b6001600160a01b031663939fe622836020015184604001516040518363ffffffff1660e01b8152600401610566929190612782565b60006040518083038186803b15801561057e57600080fd5b505afa158015610592573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105ba91908101906127d0565b6060830181905280516000906105d2576105d261273e565b60200260200101518b6105e5919061276a565b9a5081606001516001815181106105fe576105fe61273e565b60200260200101518a610611919061276a565b9950816060015160028151811061062a5761062a61273e565b60200260200101518961063d919061276a565b985081606001516004815181106106565761065661273e565b602002602001015187610669919061276a565b965081606001516005815181106106825761068261273e565b602002602001015186610695919061276a565b9550816000015181815181106106ad576106ad61273e565b6020026020010151156107135781606001516003815181106106d1576106d161273e565b6020026020010151886106e4919061276a565b975081606001516006815181106106fd576106fd61273e565b602002602001015185610710919061276a565b94505b8061071d81612856565b91505061034b565b508060a0015181608001511015925050509397509397509397509397565b6000806000610753868686611b09565b92509250925093509350939050565b60008060008060008060006107778989610de6565b9198509650935061078889896119c7565b88975091945092509050600061079e8a8a611bc8565b9050600081126107b9576107b2818861276a565b96506107cf565b6107c281612871565b6107cc908461276a565b92505b86156108795760006107df611ae9565b6001600160a01b0316639abdb38a8c6040518263ffffffff1660e01b815260040161080c91815260200190565b60206040518083038186803b15801561082457600080fd5b505afa158015610838573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061085c919061288e565b905061271061086b828a6128a7565b61087591906128dc565b9650505b5092959891949750929550565b600080610891611a7a565b6000868152600291909101602090815260408083208784529091528120546001600160a01b031691506108c2611a7a565b60008781526020919091526040812080549091906108e2576108e261273e565b60009182526020822001546001600160a01b0384811691161491505b610906611a7a565b60008881526020919091526040902054811015610c8e576000610927611a7a565b6000898152602091909152604090208054839081106109485761094861273e565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b15801561099557600080fd5b505afa1580156109a9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109cd919061288e565b905083806109ec5750846001600160a01b0316826001600160a01b0316145b15610c79576000806109fc611a7a565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b158015610a5c57600080fd5b505afa158015610a70573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a9491906128f0565b91509150858015610aad5750841580610aad5750808314155b80610ac0575085158015610ac057508083145b15610ade57610ad18b828487611dfc565b610adb9089612914565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b158015610b2457600080fd5b505afa158015610b38573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b5c9190612955565b935093505050878015610b775750861580610b775750808514155b80610b8a575087158015610b8a57508085145b15610ba857610b9b8d828489611dfc565b610ba5908b61298b565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b158015610bee57600080fd5b505afa158015610c02573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c269190612955565b935093505050898015610c415750881580610c415750808714155b80610c54575089158015610c5457508087145b15610c7257610c658f82848b611dfc565b610c6f908d612914565b9b505b5050505050505b50508080610c8690612856565b9150506108fe565b508015610ddd57610dd0610ca0612067565b60405163c3e7a7ad60e01b8152600481018990526001600160a01b038781166024830152919091169063c3e7a7ad9060440160206040518083038186803b158015610cea57600080fd5b505afa158015610cfe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d22919061288e565b610d2a611a7a565b6000898152602091909152604081208054909190610d4a57610d4a61273e565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b158015610d9357600080fd5b505afa158015610da7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dcb919061288e565b612086565b610dda9084612914565b92505b50509392505050565b60008080805b610df4611a7a565b60008781526020919091526040902054811015610e99576000806000610e5889610e1c611a7a565b60008c815260209190915260409020805487908110610e3d57610e3d61273e565b6000918252602090912001546001600160a01b03168a61209f565b91945092509050610e69838861276a565b9650610e75828761276a565b9550610e81818661276a565b94505050508080610e9190612856565b915050610dec565b509250925092565b600080610eac611a7a565b6000868152600291909101602090815260408083208784529091528120546001600160a01b03169150610edd611a7a565b6000878152602091909152604081208054909190610efd57610efd61273e565b60009182526020822001546001600160a01b0384811691161491505b610f21611a7a565b600088815260209190915260409020548110156112d9576000610f42611a7a565b600089815260209190915260409020805483908110610f6357610f6361273e565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b158015610fb057600080fd5b505afa158015610fc4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fe8919061288e565b905083806110075750846001600160a01b0316826001600160a01b0316145b156112c457600080611017611a7a565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b15801561107757600080fd5b505afa15801561108b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110af91906128f0565b915091508580156110c857508415806110c85750808314155b156110ea576110d98b8284876120e5565b6110e39089612914565b9750611109565b851580156110f757508083145b15611109576111068289612914565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b15801561114f57600080fd5b505afa158015611163573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111879190612955565b9350935050508780156111a257508615806111a25750808514155b156111c4576111b38d8284896120e5565b6111bd908b61298b565b99506111e3565b871580156111d157508085145b156111e3576111e0828b61298b565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b15801561122957600080fd5b505afa15801561123d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112619190612955565b93509350505089801561127c575088158061127c5750808714155b1561129e5761128d8f82848b6120e5565b611297908d612914565b9b506112bd565b891580156112ab57508087145b156112bd576112ba828d612914565b9b505b5050505050505b505080806112d190612856565b915050610f19565b508015610ddd576112e8612067565b60405163c3e7a7ad60e01b8152600481018890526001600160a01b038681166024830152919091169063c3e7a7ad9060440160206040518083038186803b15801561133257600080fd5b505afa158015611346573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dd0919061288e565b600080600061075386868661209f565b60006113868383611bc8565b905060005b611393611a7a565b600085815260209190915260409020548110156115335760006113b4611a7a565b6000868152602091909152604090208054839081106113d5576113d561273e565b6000918252602082200154604051631c7b209b60e31b81526001600160a01b03878116600483015290911692508190839063e3d904d89060240160806040518083038186803b15801561142757600080fd5b505afa15801561143b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061145f9190612955565b93509350505061147187828486611dfc565b61147b908661298b565b6040516339f7dda360e21b81526001600160a01b03888116600483015291965060009182919086169063e7df768c9060240160806040518083038186803b1580156114c557600080fd5b505afa1580156114d9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906114fd9190612955565b93509350505061150f89828488611dfc565b6115199088612914565b96505050505050808061152b90612856565b91505061138b565b5092915050565b60008142106115835760405162461bcd60e51b815260206004820152601060248201526f496e76616c6964206d6174757269747960801b60448201526064015b60405180910390fd5b600061158f42846129ca565b90506115a16127106301e133806128a7565b84826115ab611a7a565b600089815260069190910160205260409020546115c891906128a7565b6115d291906128a7565b6115dc91906128dc565b95945050505050565b60006116126040518060800160405280600081526020016000815260200160008152602001600081525090565b600061161c611a9e565b60405163afe8efcf60e01b81526001600160a01b038a81166004830152919091169063afe8efcf9060240160206040518083038186803b15801561165f57600080fd5b505afa158015611673573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611697919061288e565b9050806116e65760405162461bcd60e51b815260206004820152601a60248201527f557365722068617320656e6f75676820636f6c6c61746572616c000000000000604482015260640161157a565b60006116f387878b610ea1565b9050600081126117455760405162461bcd60e51b815260206004820181905260248201527f4e6f206465627420696e207468652073656c6563746564206d61747572697479604482015260640161157a565b61174e81612871565b8352611792878761175e84612871565b611766611a7a565b60008c8152600291909101602090815260408083208d84529091529020546001600160a01b0316611dfc565b602084015261179f611ae9565b6040516306d062ad60e01b815260048101899052602481018490526001600160a01b0391909116906306d062ad9060440160206040518083038186803b1580156117e857600080fd5b505afa1580156117fc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611820919061288e565b6060840181905260208401511061183b578260600151611841565b82602001515b606084015261184e611a7a565b6000888152600291909101602090815260408083208984529091528082205485519151631e007d1d60e01b81526001600160a01b0390911692631e007d1d92611899926004016129e1565b60206040518083038186803b1580156118b157600080fd5b505afa1580156118c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118e9919061288e565b6040840181905260608401511161190457826060015161190a565b82604001515b9350611914611a9e565b604051634092caff60e01b81526001600160a01b038c811660048301528b81166024830152604482018b9052606482018a90526084820187905262ffffff881660a48301529190911690634092caff9060c401602060405180830381600087803b15801561198157600080fd5b505af1158015611995573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119b9919061288e565b9a9950505050505050505050565b60008080805b6119d5611a7a565b60008781526020919091526040902054811015610e99576000806000611a39896119fd611a7a565b60008c815260209190915260409020805487908110611a1e57611a1e61273e565b6000918252602090912001546001600160a01b03168a611b09565b91945092509050611a4a838861276a565b9650611a56828761276a565b9550611a62818661276a565b94505050508080611a7290612856565b9150506119cd565b7f8041b8421ebd495cc61f38c788c9eb100daccf9bd36aa0bb920b7a15b2e0496590565b6000611ab669151bdad95b95985d5b1d60b21b612359565b905090565b6060611ac6826123ea565b92915050565b6000611ac6825490565b6000611ae28383612446565b9392505050565b6000611ab67121bab93932b731bca1b7b73a3937b63632b960711b612359565b6000806000806000806000886001600160a01b031663e3d904d8896040518263ffffffff1660e01b8152600401611b4f91906001600160a01b0391909116815260200190565b60806040518083038186803b158015611b6757600080fd5b505afa158015611b7b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b9f9190612955565b9350935093509350839650611bb68a82848c611dfc565b95508294505050505093509350939050565b6000805b611bd4611a7a565b60008581526020919091526040902054811015611d3c576000611bf5611a7a565b600086815260209190915260409020805483908110611c1657611c1661273e565b60009182526020822001546001600160a01b0316915080611c35611a7a565b6000888152600191909101602090815260408083206001600160a01b03878116855292529182902054915163070da1af60e11b81528882166004820152911690630e1b435e90602401604080518083038186803b158015611c9557600080fd5b505afa158015611ca9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ccd91906128f0565b91509150611d1a878284611cdf611a7a565b60008c815260209190915260409020805489908110611d0057611d0061273e565b6000918252602090912001546001600160a01b0316611dfc565b611d249086612914565b94505050508080611d3490612856565b915050611bcc565b50611df2611d48612067565b60405163c3e7a7ad60e01b8152600481018690526001600160a01b038581166024830152919091169063c3e7a7ad9060440160206040518083038186803b158015611d9257600080fd5b505afa158015611da6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611dca919061288e565b611dd2611a7a565b6000868152602091909152604081208054909190610d4a57610d4a61273e565b611ae29082612914565b600080611e07612067565b6040516302b6878160e11b815260048101889052602481018790526001600160a01b03919091169063056d0f029060440160806040518083038186803b158015611e5057600080fd5b505afa158015611e64573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611e889190612a0d565b60200151905060008082611f1157859150846001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b158015611ed257600080fd5b505afa158015611ee6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f0a919061288e565b905061204f565b611f19612067565b60405163aab8a1b360e01b8152600481018a905260248101899052604481018890526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b158015611f6957600080fd5b505afa158015611f7d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611fa1919061288e565b9150611fab611a7a565b6000898152602091909152604081208054909190611fcb57611fcb61273e565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b15801561201457600080fd5b505afa158015612028573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061204c919061288e565b90505b6120598282612086565b93505050505b949350505050565b6000611ab67011d95b995cda5cd5985b1d5955985d5b1d607a1b612359565b60006127106120958385612a73565b611ae29190612af8565b6000806000806000806000886001600160a01b031663e7df768c896040518263ffffffff1660e01b8152600401611b4f91906001600160a01b0391909116815260200190565b60006120ef612067565b6040516302b6878160e11b815260048101879052602481018690526001600160a01b03919091169063056d0f029060440160806040518083038186803b15801561213857600080fd5b505afa15801561214c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121709190612a0d565b602001516122c9576000826001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b1580156121b357600080fd5b505afa1580156121c7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121eb919061288e565b905060006121f98583612086565b90506000612205611a7a565b60008981526020919091526040812080549091906122255761222561273e565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b15801561226e57600080fd5b505afa158015612282573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906122a6919061288e565b9050806122b561271084612a73565b6122bf9190612af8565b935050505061205f565b6122d1612067565b60405163aab8a1b360e01b81526004810187905260248101869052604481018590526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b15801561232157600080fd5b505afa158015612335573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115dc919061288e565b60008181527f4abde63c3e81aefa5764b017968bc473e83e093d7e1a10247d19e0a3e41240196020908152604080832054815170026b4b9b9b4b7339030b2323932b9b99d1607d1b9381019390935260318084018690528251808503909101815260519093019091526001600160a01b031690816115335760405162461bcd60e51b815260040161157a9190612b26565b60608160000180548060200260200160405190810160405280929190818152602001828054801561243a57602002820191906000526020600020905b815481526020019060010190808311612426575b50505050509050919050565b600082600001828154811061245d5761245d61273e565b9060005260206000200154905092915050565b80356001600160a01b038116811461248757600080fd5b919050565b6000806000606084860312156124a157600080fd5b6124aa84612470565b95602085013595506040909401359392505050565b6000806000606084860312156124d457600080fd5b833592506124e460208501612470565b91506124f260408501612470565b90509250925092565b6000806040838503121561250e57600080fd5b8235915061251e60208401612470565b90509250929050565b60008060006060848603121561253c57600080fd5b83359250602084013591506124f260408501612470565b60008060006060848603121561256857600080fd5b505081359360208301359350604090920135919050565b60008060008060008060c0878903121561259857600080fd5b6125a187612470565b95506125af60208801612470565b945060408701359350606087013592506080870135915060a087013562ffffff811681146125dc57600080fd5b809150509295509295509295565b6020808252825182820181905260009190848201906040850190845b8181101561262257835183529284019291840191600101612606565b50909695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff8111828210171561266d5761266d61262e565b604052919050565b600067ffffffffffffffff82111561268f5761268f61262e565b5060051b60200190565b600060208083850312156126ac57600080fd5b825167ffffffffffffffff8111156126c357600080fd5b8301601f810185136126d457600080fd5b80516126e76126e282612675565b612644565b81815260059190911b8201830190838101908783111561270657600080fd5b928401925b8284101561273357835180151581146127245760008081fd5b8252928401929084019061270b565b979650505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000821982111561277d5761277d612754565b500190565b6000604082018483526020604081850152818551808452606086019150828701935060005b818110156127c3578451835293830193918301916001016127a7565b5090979650505050505050565b600060208083850312156127e357600080fd5b825167ffffffffffffffff8111156127fa57600080fd5b8301601f8101851361280b57600080fd5b80516128196126e282612675565b81815260059190911b8201830190838101908783111561283857600080fd5b928401925b828410156127335783518252928401929084019061283d565b600060001982141561286a5761286a612754565b5060010190565b6000600160ff1b82141561288757612887612754565b5060000390565b6000602082840312156128a057600080fd5b5051919050565b60008160001904831182151516156128c1576128c1612754565b500290565b634e487b7160e01b600052601260045260246000fd5b6000826128eb576128eb6128c6565b500490565b6000806040838503121561290357600080fd5b505080516020909101519092909150565b600080821280156001600160ff1b038490038513161561293657612936612754565b600160ff1b839003841281161561294f5761294f612754565b50500190565b6000806000806080858703121561296b57600080fd5b505082516020840151604085015160609095015191969095509092509050565b60008083128015600160ff1b8501841216156129a9576129a9612754565b6001600160ff1b03840183138116156129c4576129c4612754565b50500390565b6000828210156129dc576129dc612754565b500390565b6040810160028410612a0357634e487b7160e01b600052602160045260246000fd5b9281526020015290565b600060808284031215612a1f57600080fd5b6040516080810181811067ffffffffffffffff82111715612a4257612a4261262e565b8060405250825181526020830151602082015260408301516040820152606083015160608201528091505092915050565b60006001600160ff1b0381841382841380821686840486111615612a9957612a99612754565b600160ff1b6000871282811687830589121615612ab857612ab8612754565b60008712925087820587128484161615612ad457612ad4612754565b87850587128184161615612aea57612aea612754565b505050929093029392505050565b600082612b0757612b076128c6565b600160ff1b821460001984141615612b2157612b21612754565b500590565b600060208083528351808285015260005b81811015612b5357858101830151858201604001528201612b37565b81811115612b65576000604083870101525b50601f01601f191692909201604001939250505056fea264697066735822122025bf29e7eaca226621dab9fa80a6738866fa7ca17faed6fc450b53cb4e5d82ee64736f6c63430008090033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600436106100b35760003560e01c80637dfeb4511161007b5780637dfeb451146101b75780637e609715146101ca57806385f33967146101dd5780638ba14e38146101f05780639c599f8b146102035780639d3fc35d1461022357600080fd5b80630312b528146100b85780631ce4ded41461010d5780635c3477651461013b57806371eb43531461018357806373bb3b09146101a4575b600080fd5b6100cb6100c636600461248c565b610236565b604080519889526020890197909752958701949094526060860192909252608085015260a084015260c0830152151560e0820152610100015b60405180910390f35b61012061011b3660046124bf565b610743565b60408051938452602084019290925290820152606001610104565b61014e6101493660046124fb565b610762565b604080519788526020880196909652948601939093526060850191909152608084015260a083015260c082015260e001610104565b610196610191366004612527565b610886565b604051908152602001610104565b6101206101b23660046124fb565b610de6565b6101966101c5366004612527565b610ea1565b6101206101d83660046124bf565b61136a565b6101966101eb3660046124fb565b61137a565b6101966101fe366004612553565b61153a565b81801561020f57600080fd5b5061019661021e36600461257f565b6115e5565b6101206102313660046124fb565b6119c7565b600080600080600080600080600061024c611a7a565b60040160008d6001600160a01b03166001600160a01b0316815260200190815260200160002090506102b06040518060c001604052806060815260200160008019168152602001606081526020016060815260200160008152602001600081525090565b6102b8611a9e565b6001600160a01b0316633f90a08e6102cf84611abb565b6040518263ffffffff1660e01b81526004016102eb91906125ea565b60006040518083038186803b15801561030357600080fd5b505afa158015610317573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261033f9190810190612699565b8152608081018b905260005b61035483611acc565b811015610725576103658382611ad6565b60208301526040805160078082526101008201909252908160200160208202803683375050506040830152602082015161039f908f610762565b88604001516000815181106103b6576103b661273e565b6020026020010189604001516001815181106103d4576103d461273e565b602002602001018a604001516002815181106103f2576103f261273e565b602002602001018b604001516003815181106104105761041061273e565b602002602001018c6040015160048151811061042e5761042e61273e565b602002602001018d6040015160058151811061044c5761044c61273e565b602002602001018e6040015160068151811061046a5761046a61273e565b6020908102919091018101979097529690965295909452949093529390529290529190528201518d14156105295781604001516006815181106104af576104af61273e565b6020026020010151826080018181516104c8919061276a565b9052506040820151805160039081106104e3576104e361273e565b602002602001015182604001516000815181106105025761050261273e565b6020026020010151610514919061276a565b8260a001818151610525919061276a565b9052505b610531611ae9565b6001600160a01b031663939fe622836020015184604001516040518363ffffffff1660e01b8152600401610566929190612782565b60006040518083038186803b15801561057e57600080fd5b505afa158015610592573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105ba91908101906127d0565b6060830181905280516000906105d2576105d261273e565b60200260200101518b6105e5919061276a565b9a5081606001516001815181106105fe576105fe61273e565b60200260200101518a610611919061276a565b9950816060015160028151811061062a5761062a61273e565b60200260200101518961063d919061276a565b985081606001516004815181106106565761065661273e565b602002602001015187610669919061276a565b965081606001516005815181106106825761068261273e565b602002602001015186610695919061276a565b9550816000015181815181106106ad576106ad61273e565b6020026020010151156107135781606001516003815181106106d1576106d161273e565b6020026020010151886106e4919061276a565b975081606001516006815181106106fd576106fd61273e565b602002602001015185610710919061276a565b94505b8061071d81612856565b91505061034b565b508060a0015181608001511015925050509397509397509397509397565b6000806000610753868686611b09565b92509250925093509350939050565b60008060008060008060006107778989610de6565b9198509650935061078889896119c7565b88975091945092509050600061079e8a8a611bc8565b9050600081126107b9576107b2818861276a565b96506107cf565b6107c281612871565b6107cc908461276a565b92505b86156108795760006107df611ae9565b6001600160a01b0316639abdb38a8c6040518263ffffffff1660e01b815260040161080c91815260200190565b60206040518083038186803b15801561082457600080fd5b505afa158015610838573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061085c919061288e565b905061271061086b828a6128a7565b61087591906128dc565b9650505b5092959891949750929550565b600080610891611a7a565b6000868152600291909101602090815260408083208784529091528120546001600160a01b031691506108c2611a7a565b60008781526020919091526040812080549091906108e2576108e261273e565b60009182526020822001546001600160a01b0384811691161491505b610906611a7a565b60008881526020919091526040902054811015610c8e576000610927611a7a565b6000898152602091909152604090208054839081106109485761094861273e565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b15801561099557600080fd5b505afa1580156109a9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109cd919061288e565b905083806109ec5750846001600160a01b0316826001600160a01b0316145b15610c79576000806109fc611a7a565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b158015610a5c57600080fd5b505afa158015610a70573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a9491906128f0565b91509150858015610aad5750841580610aad5750808314155b80610ac0575085158015610ac057508083145b15610ade57610ad18b828487611dfc565b610adb9089612914565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b158015610b2457600080fd5b505afa158015610b38573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b5c9190612955565b935093505050878015610b775750861580610b775750808514155b80610b8a575087158015610b8a57508085145b15610ba857610b9b8d828489611dfc565b610ba5908b61298b565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b158015610bee57600080fd5b505afa158015610c02573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c269190612955565b935093505050898015610c415750881580610c415750808714155b80610c54575089158015610c5457508087145b15610c7257610c658f82848b611dfc565b610c6f908d612914565b9b505b5050505050505b50508080610c8690612856565b9150506108fe565b508015610ddd57610dd0610ca0612067565b60405163c3e7a7ad60e01b8152600481018990526001600160a01b038781166024830152919091169063c3e7a7ad9060440160206040518083038186803b158015610cea57600080fd5b505afa158015610cfe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d22919061288e565b610d2a611a7a565b6000898152602091909152604081208054909190610d4a57610d4a61273e565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b158015610d9357600080fd5b505afa158015610da7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dcb919061288e565b612086565b610dda9084612914565b92505b50509392505050565b60008080805b610df4611a7a565b60008781526020919091526040902054811015610e99576000806000610e5889610e1c611a7a565b60008c815260209190915260409020805487908110610e3d57610e3d61273e565b6000918252602090912001546001600160a01b03168a61209f565b91945092509050610e69838861276a565b9650610e75828761276a565b9550610e81818661276a565b94505050508080610e9190612856565b915050610dec565b509250925092565b600080610eac611a7a565b6000868152600291909101602090815260408083208784529091528120546001600160a01b03169150610edd611a7a565b6000878152602091909152604081208054909190610efd57610efd61273e565b60009182526020822001546001600160a01b0384811691161491505b610f21611a7a565b600088815260209190915260409020548110156112d9576000610f42611a7a565b600089815260209190915260409020805483908110610f6357610f6361273e565b60009182526020808320909101546040805163e16695b560e01b815290516001600160a01b039092169450849263e16695b592600480840193829003018186803b158015610fb057600080fd5b505afa158015610fc4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fe8919061288e565b905083806110075750846001600160a01b0316826001600160a01b0316145b156112c457600080611017611a7a565b60008c8152600191909101602090815260408083206001600160a01b03888116855292529182902054915163070da1af60e11b81528b82166004820152911690630e1b435e90602401604080518083038186803b15801561107757600080fd5b505afa15801561108b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110af91906128f0565b915091508580156110c857508415806110c85750808314155b156110ea576110d98b8284876120e5565b6110e39089612914565b9750611109565b851580156110f757508083145b15611109576111068289612914565b97505b604051631c7b209b60e31b81526001600160a01b038a81166004830152600091829187169063e3d904d89060240160806040518083038186803b15801561114f57600080fd5b505afa158015611163573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111879190612955565b9350935050508780156111a257508615806111a25750808514155b156111c4576111b38d8284896120e5565b6111bd908b61298b565b99506111e3565b871580156111d157508085145b156111e3576111e0828b61298b565b99505b6040516339f7dda360e21b81526001600160a01b038c81166004830152600091829189169063e7df768c9060240160806040518083038186803b15801561122957600080fd5b505afa15801561123d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112619190612955565b93509350505089801561127c575088158061127c5750808714155b1561129e5761128d8f82848b6120e5565b611297908d612914565b9b506112bd565b891580156112ab57508087145b156112bd576112ba828d612914565b9b505b5050505050505b505080806112d190612856565b915050610f19565b508015610ddd576112e8612067565b60405163c3e7a7ad60e01b8152600481018890526001600160a01b038681166024830152919091169063c3e7a7ad9060440160206040518083038186803b15801561133257600080fd5b505afa158015611346573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dd0919061288e565b600080600061075386868661209f565b60006113868383611bc8565b905060005b611393611a7a565b600085815260209190915260409020548110156115335760006113b4611a7a565b6000868152602091909152604090208054839081106113d5576113d561273e565b6000918252602082200154604051631c7b209b60e31b81526001600160a01b03878116600483015290911692508190839063e3d904d89060240160806040518083038186803b15801561142757600080fd5b505afa15801561143b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061145f9190612955565b93509350505061147187828486611dfc565b61147b908661298b565b6040516339f7dda360e21b81526001600160a01b03888116600483015291965060009182919086169063e7df768c9060240160806040518083038186803b1580156114c557600080fd5b505afa1580156114d9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906114fd9190612955565b93509350505061150f89828488611dfc565b6115199088612914565b96505050505050808061152b90612856565b91505061138b565b5092915050565b60008142106115835760405162461bcd60e51b815260206004820152601060248201526f496e76616c6964206d6174757269747960801b60448201526064015b60405180910390fd5b600061158f42846129ca565b90506115a16127106301e133806128a7565b84826115ab611a7a565b600089815260069190910160205260409020546115c891906128a7565b6115d291906128a7565b6115dc91906128dc565b95945050505050565b60006116126040518060800160405280600081526020016000815260200160008152602001600081525090565b600061161c611a9e565b60405163afe8efcf60e01b81526001600160a01b038a81166004830152919091169063afe8efcf9060240160206040518083038186803b15801561165f57600080fd5b505afa158015611673573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611697919061288e565b9050806116e65760405162461bcd60e51b815260206004820152601a60248201527f557365722068617320656e6f75676820636f6c6c61746572616c000000000000604482015260640161157a565b60006116f387878b610ea1565b9050600081126117455760405162461bcd60e51b815260206004820181905260248201527f4e6f206465627420696e207468652073656c6563746564206d61747572697479604482015260640161157a565b61174e81612871565b8352611792878761175e84612871565b611766611a7a565b60008c8152600291909101602090815260408083208d84529091529020546001600160a01b0316611dfc565b602084015261179f611ae9565b6040516306d062ad60e01b815260048101899052602481018490526001600160a01b0391909116906306d062ad9060440160206040518083038186803b1580156117e857600080fd5b505afa1580156117fc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611820919061288e565b6060840181905260208401511061183b578260600151611841565b82602001515b606084015261184e611a7a565b6000888152600291909101602090815260408083208984529091528082205485519151631e007d1d60e01b81526001600160a01b0390911692631e007d1d92611899926004016129e1565b60206040518083038186803b1580156118b157600080fd5b505afa1580156118c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118e9919061288e565b6040840181905260608401511161190457826060015161190a565b82604001515b9350611914611a9e565b604051634092caff60e01b81526001600160a01b038c811660048301528b81166024830152604482018b9052606482018a90526084820187905262ffffff881660a48301529190911690634092caff9060c401602060405180830381600087803b15801561198157600080fd5b505af1158015611995573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119b9919061288e565b9a9950505050505050505050565b60008080805b6119d5611a7a565b60008781526020919091526040902054811015610e99576000806000611a39896119fd611a7a565b60008c815260209190915260409020805487908110611a1e57611a1e61273e565b6000918252602090912001546001600160a01b03168a611b09565b91945092509050611a4a838861276a565b9650611a56828761276a565b9550611a62818661276a565b94505050508080611a7290612856565b9150506119cd565b7f8041b8421ebd495cc61f38c788c9eb100daccf9bd36aa0bb920b7a15b2e0496590565b6000611ab669151bdad95b95985d5b1d60b21b612359565b905090565b6060611ac6826123ea565b92915050565b6000611ac6825490565b6000611ae28383612446565b9392505050565b6000611ab67121bab93932b731bca1b7b73a3937b63632b960711b612359565b6000806000806000806000886001600160a01b031663e3d904d8896040518263ffffffff1660e01b8152600401611b4f91906001600160a01b0391909116815260200190565b60806040518083038186803b158015611b6757600080fd5b505afa158015611b7b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b9f9190612955565b9350935093509350839650611bb68a82848c611dfc565b95508294505050505093509350939050565b6000805b611bd4611a7a565b60008581526020919091526040902054811015611d3c576000611bf5611a7a565b600086815260209190915260409020805483908110611c1657611c1661273e565b60009182526020822001546001600160a01b0316915080611c35611a7a565b6000888152600191909101602090815260408083206001600160a01b03878116855292529182902054915163070da1af60e11b81528882166004820152911690630e1b435e90602401604080518083038186803b158015611c9557600080fd5b505afa158015611ca9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ccd91906128f0565b91509150611d1a878284611cdf611a7a565b60008c815260209190915260409020805489908110611d0057611d0061273e565b6000918252602090912001546001600160a01b0316611dfc565b611d249086612914565b94505050508080611d3490612856565b915050611bcc565b50611df2611d48612067565b60405163c3e7a7ad60e01b8152600481018690526001600160a01b038581166024830152919091169063c3e7a7ad9060440160206040518083038186803b158015611d9257600080fd5b505afa158015611da6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611dca919061288e565b611dd2611a7a565b6000868152602091909152604081208054909190610d4a57610d4a61273e565b611ae29082612914565b600080611e07612067565b6040516302b6878160e11b815260048101889052602481018790526001600160a01b03919091169063056d0f029060440160806040518083038186803b158015611e5057600080fd5b505afa158015611e64573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611e889190612a0d565b60200151905060008082611f1157859150846001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b158015611ed257600080fd5b505afa158015611ee6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f0a919061288e565b905061204f565b611f19612067565b60405163aab8a1b360e01b8152600481018a905260248101899052604481018890526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b158015611f6957600080fd5b505afa158015611f7d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611fa1919061288e565b9150611fab611a7a565b6000898152602091909152604081208054909190611fcb57611fcb61273e565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b15801561201457600080fd5b505afa158015612028573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061204c919061288e565b90505b6120598282612086565b93505050505b949350505050565b6000611ab67011d95b995cda5cd5985b1d5955985d5b1d607a1b612359565b60006127106120958385612a73565b611ae29190612af8565b6000806000806000806000886001600160a01b031663e7df768c896040518263ffffffff1660e01b8152600401611b4f91906001600160a01b0391909116815260200190565b60006120ef612067565b6040516302b6878160e11b815260048101879052602481018690526001600160a01b03919091169063056d0f029060440160806040518083038186803b15801561213857600080fd5b505afa15801561214c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121709190612a0d565b602001516122c9576000826001600160a01b03166371613c2d6040518163ffffffff1660e01b815260040160206040518083038186803b1580156121b357600080fd5b505afa1580156121c7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121eb919061288e565b905060006121f98583612086565b90506000612205611a7a565b60008981526020919091526040812080549091906122255761222561273e565b60009182526020918290200154604080516371613c2d60e01b815290516001600160a01b03909216926371613c2d92600480840193829003018186803b15801561226e57600080fd5b505afa158015612282573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906122a6919061288e565b9050806122b561271084612a73565b6122bf9190612af8565b935050505061205f565b6122d1612067565b60405163aab8a1b360e01b81526004810187905260248101869052604481018590526001600160a01b03919091169063aab8a1b39060640160206040518083038186803b15801561232157600080fd5b505afa158015612335573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115dc919061288e565b60008181527f4abde63c3e81aefa5764b017968bc473e83e093d7e1a10247d19e0a3e41240196020908152604080832054815170026b4b9b9b4b7339030b2323932b9b99d1607d1b9381019390935260318084018690528251808503909101815260519093019091526001600160a01b031690816115335760405162461bcd60e51b815260040161157a9190612b26565b60608160000180548060200260200160405190810160405280929190818152602001828054801561243a57602002820191906000526020600020905b815481526020019060010190808311612426575b50505050509050919050565b600082600001828154811061245d5761245d61273e565b9060005260206000200154905092915050565b80356001600160a01b038116811461248757600080fd5b919050565b6000806000606084860312156124a157600080fd5b6124aa84612470565b95602085013595506040909401359392505050565b6000806000606084860312156124d457600080fd5b833592506124e460208501612470565b91506124f260408501612470565b90509250925092565b6000806040838503121561250e57600080fd5b8235915061251e60208401612470565b90509250929050565b60008060006060848603121561253c57600080fd5b83359250602084013591506124f260408501612470565b60008060006060848603121561256857600080fd5b505081359360208301359350604090920135919050565b60008060008060008060c0878903121561259857600080fd5b6125a187612470565b95506125af60208801612470565b945060408701359350606087013592506080870135915060a087013562ffffff811681146125dc57600080fd5b809150509295509295509295565b6020808252825182820181905260009190848201906040850190845b8181101561262257835183529284019291840191600101612606565b50909695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff8111828210171561266d5761266d61262e565b604052919050565b600067ffffffffffffffff82111561268f5761268f61262e565b5060051b60200190565b600060208083850312156126ac57600080fd5b825167ffffffffffffffff8111156126c357600080fd5b8301601f810185136126d457600080fd5b80516126e76126e282612675565b612644565b81815260059190911b8201830190838101908783111561270657600080fd5b928401925b8284101561273357835180151581146127245760008081fd5b8252928401929084019061270b565b979650505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000821982111561277d5761277d612754565b500190565b6000604082018483526020604081850152818551808452606086019150828701935060005b818110156127c3578451835293830193918301916001016127a7565b5090979650505050505050565b600060208083850312156127e357600080fd5b825167ffffffffffffffff8111156127fa57600080fd5b8301601f8101851361280b57600080fd5b80516128196126e282612675565b81815260059190911b8201830190838101908783111561283857600080fd5b928401925b828410156127335783518252928401929084019061283d565b600060001982141561286a5761286a612754565b5060010190565b6000600160ff1b82141561288757612887612754565b5060000390565b6000602082840312156128a057600080fd5b5051919050565b60008160001904831182151516156128c1576128c1612754565b500290565b634e487b7160e01b600052601260045260246000fd5b6000826128eb576128eb6128c6565b500490565b6000806040838503121561290357600080fd5b505080516020909101519092909150565b600080821280156001600160ff1b038490038513161561293657612936612754565b600160ff1b839003841281161561294f5761294f612754565b50500190565b6000806000806080858703121561296b57600080fd5b505082516020840151604085015160609095015191969095509092509050565b60008083128015600160ff1b8501841216156129a9576129a9612754565b6001600160ff1b03840183138116156129c4576129c4612754565b50500390565b6000828210156129dc576129dc612754565b500390565b6040810160028410612a0357634e487b7160e01b600052602160045260246000fd5b9281526020015290565b600060808284031215612a1f57600080fd5b6040516080810181811067ffffffffffffffff82111715612a4257612a4261262e565b8060405250825181526020830151602082015260408301516040820152606083015160608201528091505092915050565b60006001600160ff1b0381841382841380821686840486111615612a9957612a99612754565b600160ff1b6000871282811687830589121615612ab857612ab8612754565b60008712925087820587128484161615612ad457612ad4612754565b87850587128184161615612aea57612aea612754565b505050929093029392505050565b600082612b0757612b076128c6565b600160ff1b821460001984141615612b2157612b21612754565b500590565b600060208083528351808285015260005b81811015612b5357858101830151858201604001528201612b37565b81811115612b65576000604083870101525b50601f01601f191692909201604001939250505056fea264697066735822122025bf29e7eaca226621dab9fa80a6738866fa7ca17faed6fc450b53cb4e5d82ee64736f6c63430008090033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}
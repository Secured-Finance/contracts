{
  "address": "0x71cb5e58dF3EF607c4e83Bec07477260EE62eeDA",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "enum ProtocolTypes.Side",
          "name": "_side",
          "type": "ProtocolTypes.Side"
        },
        {
          "internalType": "uint256",
          "name": "_futureValue",
          "type": "uint256"
        }
      ],
      "name": "estimateFilledAmount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_limit",
          "type": "uint256"
        }
      ],
      "name": "getBorrowOrderBook",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "unitPrices",
          "type": "uint256[]"
        },
        {
          "internalType": "uint256[]",
          "name": "amounts",
          "type": "uint256[]"
        },
        {
          "internalType": "uint256[]",
          "name": "quantities",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "getBorrowOrderIds",
      "outputs": [
        {
          "internalType": "uint48[]",
          "name": "activeOrderIds",
          "type": "uint48[]"
        },
        {
          "internalType": "uint48[]",
          "name": "inActiveOrderIds",
          "type": "uint48[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getHighestLendingUnitPrice",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_limit",
          "type": "uint256"
        }
      ],
      "name": "getLendOrderBook",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "unitPrices",
          "type": "uint256[]"
        },
        {
          "internalType": "uint256[]",
          "name": "amounts",
          "type": "uint256[]"
        },
        {
          "internalType": "uint256[]",
          "name": "quantities",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "getLendOrderIds",
      "outputs": [
        {
          "internalType": "uint48[]",
          "name": "activeOrderIds",
          "type": "uint48[]"
        },
        {
          "internalType": "uint48[]",
          "name": "inActiveOrderIds",
          "type": "uint48[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getLowestBorrowingUnitPrice",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getOpeningUnitPrice",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "openingUnitPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lastLendUnitPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lastBorrowUnitPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalOffsetAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint48",
          "name": "_orderId",
          "type": "uint48"
        }
      ],
      "name": "getOrder",
      "outputs": [
        {
          "internalType": "enum ProtocolTypes.Side",
          "name": "side",
          "type": "ProtocolTypes.Side"
        },
        {
          "internalType": "uint256",
          "name": "unitPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maturity",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "maker",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isPreOrder",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "getTotalAmountFromBorrowOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "activeAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "inactiveAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "inactiveFutureValue",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maturity",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "getTotalAmountFromLendOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "activeAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "inactiveAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "inactiveFutureValue",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maturity",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "hasBorrowOrder",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "hasLendOrder",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xbae0dfb6d8fe5a027fd59e0e47a480c3efcd971d3aa9e74560767d730e9f3674",
  "receipt": {
    "to": null,
    "from": "0xDBA767F3DFF3835BEf5dE1eDEe91A9901402AB21",
    "contractAddress": "0x71cb5e58dF3EF607c4e83Bec07477260EE62eeDA",
    "transactionIndex": 37,
    "gasUsed": "4824076",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xfca270fb17544092c39ddc2551227e7ee07d10ce4fae0a43cdeeeba41c213e46",
    "transactionHash": "0xbae0dfb6d8fe5a027fd59e0e47a480c3efcd971d3aa9e74560767d730e9f3674",
    "logs": [],
    "blockNumber": 3835431,
    "cumulativeGasUsed": "9706939",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "ee0701f0e1353791145c76210180d73b",
  "metadata": "{\"compiler\":{\"version\":\"0.8.9+commit.e5eed63a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"enum ProtocolTypes.Side\",\"name\":\"_side\",\"type\":\"ProtocolTypes.Side\"},{\"internalType\":\"uint256\",\"name\":\"_futureValue\",\"type\":\"uint256\"}],\"name\":\"estimateFilledAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_limit\",\"type\":\"uint256\"}],\"name\":\"getBorrowOrderBook\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"unitPrices\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"amounts\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"quantities\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getBorrowOrderIds\",\"outputs\":[{\"internalType\":\"uint48[]\",\"name\":\"activeOrderIds\",\"type\":\"uint48[]\"},{\"internalType\":\"uint48[]\",\"name\":\"inActiveOrderIds\",\"type\":\"uint48[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getHighestLendingUnitPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_limit\",\"type\":\"uint256\"}],\"name\":\"getLendOrderBook\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"unitPrices\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"amounts\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"quantities\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getLendOrderIds\",\"outputs\":[{\"internalType\":\"uint48[]\",\"name\":\"activeOrderIds\",\"type\":\"uint48[]\"},{\"internalType\":\"uint48[]\",\"name\":\"inActiveOrderIds\",\"type\":\"uint48[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getLowestBorrowingUnitPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getOpeningUnitPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"openingUnitPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastLendUnitPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastBorrowUnitPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalOffsetAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint48\",\"name\":\"_orderId\",\"type\":\"uint48\"}],\"name\":\"getOrder\",\"outputs\":[{\"internalType\":\"enum ProtocolTypes.Side\",\"name\":\"side\",\"type\":\"ProtocolTypes.Side\"},{\"internalType\":\"uint256\",\"name\":\"unitPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maturity\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"maker\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isPreOrder\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getTotalAmountFromBorrowOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"activeAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"inactiveAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"inactiveFutureValue\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maturity\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getTotalAmountFromLendOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"activeAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"inactiveAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"inactiveFutureValue\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maturity\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"hasBorrowOrder\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"hasLendOrder\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/protocol/libraries/logics/OrderBookLogic.sol\":\"OrderBookLogic\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/protocol/interfaces/ILendingMarket.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport \\\"../types/ProtocolTypes.sol\\\";\\nimport {MarketOrder, ItayoseLog} from \\\"../storages/LendingMarketStorage.sol\\\";\\n\\ninterface ILendingMarket {\\n    struct OrderExecutionConditions {\\n        bool isFilled;\\n        uint256 executedUnitPrice;\\n        uint256 cbThresholdUnitPrice;\\n        bool ignoreRemainingAmount;\\n    }\\n\\n    struct PlacedOrder {\\n        uint48 orderId;\\n        uint256 amount;\\n        uint256 unitPrice;\\n    }\\n\\n    struct FilledOrder {\\n        uint256 amount;\\n        uint256 unitPrice;\\n        uint256 futureValue;\\n        uint256 ignoredAmount;\\n    }\\n\\n    struct PartiallyFilledOrder {\\n        uint48 orderId;\\n        address maker;\\n        uint256 amount;\\n        uint256 futureValue;\\n    }\\n\\n    event OrderCanceled(\\n        uint48 orderId,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 unitPrice\\n    );\\n\\n    event OrdersCleaned(\\n        uint48[] orderIds,\\n        address indexed maker,\\n        ProtocolTypes.Side side,\\n        bytes32 indexed ccy,\\n        uint256 maturity,\\n        uint256 amount,\\n        uint256 futureValue\\n    );\\n\\n    event OrderExecuted(\\n        address indexed user,\\n        ProtocolTypes.Side side,\\n        bytes32 indexed ccy,\\n        uint256 indexed maturity,\\n        uint256 inputAmount,\\n        uint256 inputUnitPrice,\\n        uint256 filledAmount,\\n        uint256 filledUnitPrice,\\n        uint256 filledFutureValue,\\n        uint48 placedOrderId,\\n        uint256 placedAmount,\\n        uint256 placedUnitPrice,\\n        uint256 cbThresholdUnitPrice\\n    );\\n\\n    event PreOrderExecuted(\\n        address indexed user,\\n        ProtocolTypes.Side side,\\n        bytes32 indexed ccy,\\n        uint256 indexed maturity,\\n        uint256 amount,\\n        uint256 unitPrice,\\n        uint48 orderId\\n    );\\n\\n    event PositionUnwound(\\n        address indexed user,\\n        ProtocolTypes.Side side,\\n        bytes32 indexed ccy,\\n        uint256 indexed maturity,\\n        uint256 futureValue,\\n        uint256 filledAmount,\\n        uint256 filledUnitPrice,\\n        uint256 filledFutureValue,\\n        uint256 cbThresholdUnitPrice\\n    );\\n\\n    event MarketOpened(uint256 maturity, uint256 prevMaturity);\\n\\n    event ItayoseExecuted(\\n        bytes32 ccy,\\n        uint256 maturity,\\n        uint256 openingUnitPrice,\\n        uint256 lastLendUnitPrice,\\n        uint256 lastBorrowUnitPrice,\\n        uint256 offsetAmount\\n    );\\n\\n    struct Market {\\n        bytes32 ccy;\\n        uint256 maturity;\\n        uint256 openingDate;\\n        uint256 borrowUnitPrice;\\n        uint256 lendUnitPrice;\\n        uint256 midUnitPrice;\\n        uint256 openingUnitPrice;\\n        bool isReady;\\n    }\\n\\n    function getMarket() external view returns (Market memory);\\n\\n    function getBorrowUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getLendUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getMidUnitPrice() external view returns (uint256 unitPrice);\\n\\n    function getBorrowOrderBook(uint256 limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getLendOrderBook(uint256 limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        );\\n\\n    function getMaturity() external view returns (uint256);\\n\\n    function getCurrency() external view returns (bytes32);\\n\\n    function getOpeningDate() external view returns (uint256);\\n\\n    function isReady() external view returns (bool);\\n\\n    function isMatured() external view returns (bool);\\n\\n    function isOpened() external view returns (bool);\\n\\n    function isItayosePeriod() external view returns (bool);\\n\\n    function isPreOrderPeriod() external returns (bool);\\n\\n    function getItayoseLog(uint256 maturity) external view returns (ItayoseLog memory);\\n\\n    function getOrder(uint48 orderId)\\n        external\\n        view\\n        returns (\\n            ProtocolTypes.Side,\\n            uint256 unitPrice,\\n            uint256 maturity,\\n            address maker,\\n            uint256 amount,\\n            uint256 timestamp,\\n            bool isPreOrder\\n        );\\n\\n    function getTotalAmountFromLendOrders(address user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        );\\n\\n    function getTotalAmountFromBorrowOrders(address user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        );\\n\\n    function getLendOrderIds(address user)\\n        external\\n        view\\n        returns (uint48[] memory activeOrderIds, uint48[] memory inActiveOrderIds);\\n\\n    function getBorrowOrderIds(address user)\\n        external\\n        view\\n        returns (uint48[] memory activeOrderIds, uint48[] memory inActiveOrderIds);\\n\\n    function estimateFilledAmount(ProtocolTypes.Side side, uint256 futureValue)\\n        external\\n        view\\n        returns (uint256 amount);\\n\\n    function openMarket(uint256 maturity, uint256 openingDate) external returns (uint256);\\n\\n    function cancelOrder(address user, uint48 orderId) external;\\n\\n    function executeOrder(\\n        ProtocolTypes.Side side,\\n        address account,\\n        uint256 amount,\\n        uint256 unitPrice,\\n        uint256 circuitBreakerLimitRange\\n    )\\n        external\\n        returns (FilledOrder memory filledOrder, PartiallyFilledOrder memory partiallyFilledOrder);\\n\\n    function executePreOrder(\\n        ProtocolTypes.Side side,\\n        address user,\\n        uint256 amount,\\n        uint256 unitPrice\\n    ) external;\\n\\n    function unwindPosition(\\n        ProtocolTypes.Side side,\\n        address user,\\n        uint256 futureValue,\\n        uint256 circuitBreakerLimitRange\\n    )\\n        external\\n        returns (FilledOrder memory filledOrder, PartiallyFilledOrder memory partiallyFilledOrder);\\n\\n    function executeItayoseCall()\\n        external\\n        returns (\\n            uint256 openingUnitPrice,\\n            uint256 totalOffsetAmount,\\n            uint256 openingDate,\\n            PartiallyFilledOrder memory partiallyFilledLendingOrder,\\n            PartiallyFilledOrder memory partiallyFilledBorrowingOrder\\n        );\\n\\n    function cleanUpOrders(address user)\\n        external\\n        returns (\\n            uint256 activeLendOrderCount,\\n            uint256 activeBorrowOrderCount,\\n            uint256 removedLendOrderFutureValue,\\n            uint256 removedBorrowOrderFutureValue,\\n            uint256 removedLendOrderAmount,\\n            uint256 removedBorrowOrderAmount,\\n            uint256 maturity\\n        );\\n\\n    function pauseMarket() external;\\n\\n    function unpauseMarket() external;\\n}\\n\",\"keccak256\":\"0xfb9adebfb8a6f444d9aad828596b9e73cc7f11ad33527e697ad8f2af9a92dff2\",\"license\":\"MIT\"},\"contracts/protocol/libraries/Constants.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nlibrary Constants {\\n    /// @dev Used for price digits in the basis (10000 -> 1)\\n    uint256 public constant PRICE_DIGIT = 10000;\\n\\n    /// @dev Used for percentage digits in the basis (10000 -> 100%)\\n    uint256 public constant PCT_DIGIT = 10000;\\n\\n    /// @dev Used for seconds in year (60 * 60 * 24 * 365)\\n    uint256 internal constant SECONDS_IN_YEAR = 31536000;\\n\\n    /// @dev Used for maximum order count per currency\\n    uint256 internal constant MAXIMUM_ORDER_COUNT = 20;\\n\\n    /// @dev Used for minimum threshold for circuit breaker unit price threshold\\n    uint256 public constant MINIMUM_CIRCUIT_BREAKER_THRESHOLD = 10;\\n\\n    /// @dev Used for maximum threshold for circuit breaker unit price threshold\\n    uint256 public constant MAXIMUM_CIRCUIT_BREAKER_THRESHOLD = 200;\\n}\\n\",\"keccak256\":\"0x723b180b046e8fbe471400aa11a092e7611556a1467b0eccd6c19c26c7576459\",\"license\":\"MIT\"},\"contracts/protocol/libraries/OrderStatisticsTreeLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\n// libraries\\nimport {Constants} from \\\"../libraries/Constants.sol\\\";\\n// types\\nimport {RoundingUint256} from \\\"./math/RoundingUint256.sol\\\";\\n\\nstruct RemainingOrder {\\n    uint48 orderId;\\n    address maker;\\n    uint256 amount;\\n    uint256 unitPrice;\\n}\\n\\nstruct PartiallyFilledOrder {\\n    uint48 orderId;\\n    address maker;\\n    uint256 amount;\\n    uint256 futureValue;\\n}\\n\\nstruct OrderItem {\\n    uint48 orderId;\\n    uint48 next;\\n    uint48 prev;\\n    address maker;\\n    uint256 timestamp;\\n    uint256 amount;\\n}\\n\\n/**\\n * @notice OrderStatisticsTreeLib is a Red-Black Tree binary search library\\n * based on the following library that is extended to manage order data.\\n *\\n * https://github.com/rob-Hitchens/OrderStatisticsTree\\n *\\n */\\nlibrary OrderStatisticsTreeLib {\\n    using RoundingUint256 for uint256;\\n    uint256 private constant EMPTY = 0;\\n\\n    struct Node {\\n        uint256 parent;\\n        uint256 left;\\n        uint256 right;\\n        bool red;\\n        uint48 head;\\n        uint48 tail;\\n        uint256 orderCounter;\\n        uint256 orderTotalAmount;\\n        mapping(uint256 => OrderItem) orders;\\n    }\\n\\n    struct Tree {\\n        uint256 root;\\n        mapping(uint256 => Node) nodes;\\n    }\\n\\n    function first(Tree storage self) internal view returns (uint256 _value) {\\n        _value = self.root;\\n        if (_value == EMPTY) return 0;\\n        while (self.nodes[_value].left != EMPTY) {\\n            _value = self.nodes[_value].left;\\n        }\\n    }\\n\\n    function last(Tree storage self) internal view returns (uint256 _value) {\\n        _value = self.root;\\n        if (_value == EMPTY) return 0;\\n        while (self.nodes[_value].right != EMPTY) {\\n            _value = self.nodes[_value].right;\\n        }\\n    }\\n\\n    function hasOrders(Tree storage self) internal view returns (bool) {\\n        return self.root != EMPTY;\\n    }\\n\\n    function next(Tree storage self, uint256 value) internal view returns (uint256 _cursor) {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(401) - Starting value cannot be zero\\\");\\n        if (self.nodes[value].right != EMPTY) {\\n            _cursor = treeMinimum(self, self.nodes[value].right);\\n        } else {\\n            _cursor = self.nodes[value].parent;\\n            while (_cursor != EMPTY && value == self.nodes[_cursor].right) {\\n                value = _cursor;\\n                _cursor = self.nodes[_cursor].parent;\\n            }\\n        }\\n    }\\n\\n    function prev(Tree storage self, uint256 value) internal view returns (uint256 _cursor) {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(402) - Starting value cannot be zero\\\");\\n        if (self.nodes[value].left != EMPTY) {\\n            _cursor = treeMaximum(self, self.nodes[value].left);\\n        } else {\\n            _cursor = self.nodes[value].parent;\\n            while (_cursor != EMPTY && value == self.nodes[_cursor].left) {\\n                value = _cursor;\\n                _cursor = self.nodes[_cursor].parent;\\n            }\\n        }\\n    }\\n\\n    function exists(Tree storage self, uint256 value) internal view returns (bool _exists) {\\n        if (value == EMPTY) return false;\\n        if (value == self.root) return true;\\n        // if (self.nodes[value].parent != EMPTY) return true;\\n        uint256 cursor = value;\\n        while (self.nodes[cursor].parent != EMPTY) {\\n            uint256 parent = self.nodes[cursor].parent;\\n            if (self.nodes[parent].left != cursor && self.nodes[parent].right != cursor) {\\n                return false;\\n            }\\n            if (parent == self.root) {\\n                return true;\\n            }\\n            cursor = self.nodes[cursor].parent;\\n        }\\n        return false;\\n    }\\n\\n    function isActiveOrderId(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (bool) {\\n        return orderIdExists(self, value, orderId) && exists(self, value);\\n    }\\n\\n    function getNode(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (\\n            uint256,\\n            uint256,\\n            uint256,\\n            bool,\\n            uint256,\\n            uint256,\\n            uint256,\\n            uint256\\n        )\\n    {\\n        require(exists(self, value), \\\"OrderStatisticsTree(403) - Value does not exist.\\\");\\n        Node storage gn = self.nodes[value];\\n        return (\\n            gn.parent,\\n            gn.left,\\n            gn.right,\\n            gn.red,\\n            gn.head,\\n            gn.tail,\\n            gn.orderCounter,\\n            gn.orderTotalAmount\\n        );\\n    }\\n\\n    function getNodeCount(Tree storage self, uint256 value) internal view returns (uint256) {\\n        Node storage gn = self.nodes[value];\\n        return gn.orderCounter;\\n    }\\n\\n    function getNodeTotalAmount(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (uint256 totalAmount)\\n    {\\n        return self.nodes[value].orderTotalAmount;\\n    }\\n\\n    function getNodeOrderIds(Tree storage self, uint256 value)\\n        internal\\n        view\\n        returns (uint48[] memory orderIds)\\n    {\\n        Node storage gn = self.nodes[value];\\n        OrderItem memory order = gn.orders[gn.head];\\n        orderIds = new uint48[](gn.orderCounter);\\n\\n        for (uint256 i = 0; i < gn.orderCounter; i++) {\\n            orderIds[i] = order.orderId;\\n            order = gn.orders[order.next];\\n        }\\n    }\\n\\n    function count(Tree storage self) internal view returns (uint256 _count) {\\n        return getNodeCount(self, self.root);\\n    }\\n\\n    function insert(Tree storage self, uint256 value) internal {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(405) - Value to insert cannot be zero\\\");\\n        uint256 cursor;\\n        uint256 probe = self.root;\\n        while (probe != EMPTY) {\\n            cursor = probe;\\n            if (value < probe) {\\n                probe = self.nodes[probe].left;\\n            } else if (value > probe) {\\n                probe = self.nodes[probe].right;\\n            } else if (value == probe) {\\n                return;\\n            }\\n        }\\n\\n        Node storage nValue = self.nodes[value];\\n        // Update order info as a new one if there is already an old node\\n        if (\\n            self.root == EMPTY ||\\n            (self.nodes[cursor].left != value && self.nodes[cursor].right != value)\\n        ) {\\n            nValue.orderCounter = 0;\\n            nValue.orderTotalAmount = 0;\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        }\\n        nValue.parent = cursor;\\n        nValue.left = EMPTY;\\n        nValue.right = EMPTY;\\n        nValue.red = true;\\n\\n        if (cursor == EMPTY) {\\n            self.root = value;\\n        } else if (value < cursor) {\\n            self.nodes[cursor].left = value;\\n        } else {\\n            self.nodes[cursor].right = value;\\n        }\\n        insertFixup(self, value);\\n    }\\n\\n    function remove(Tree storage self, uint256 value) internal {\\n        require(value != EMPTY, \\\"OrderStatisticsTree(407) - Value to delete cannot be zero\\\");\\n        Node storage nValue = self.nodes[value];\\n        uint256 probe;\\n        uint256 cursor;\\n        if (nValue.orderCounter == 0) {\\n            if (self.nodes[value].left == EMPTY || self.nodes[value].right == EMPTY) {\\n                cursor = value;\\n            } else {\\n                cursor = self.nodes[value].right;\\n                while (self.nodes[cursor].left != EMPTY) {\\n                    cursor = self.nodes[cursor].left;\\n                }\\n            }\\n            if (self.nodes[cursor].left != EMPTY) {\\n                probe = self.nodes[cursor].left;\\n            } else {\\n                probe = self.nodes[cursor].right;\\n            }\\n            uint256 cursorParent = self.nodes[cursor].parent;\\n            self.nodes[probe].parent = cursorParent;\\n            if (cursorParent != EMPTY) {\\n                if (cursor == self.nodes[cursorParent].left) {\\n                    self.nodes[cursorParent].left = probe;\\n                } else {\\n                    self.nodes[cursorParent].right = probe;\\n                }\\n            } else {\\n                self.root = probe;\\n            }\\n            bool doFixup = !self.nodes[cursor].red;\\n            if (cursor != value) {\\n                replaceParent(self, cursor, value);\\n                self.nodes[cursor].left = self.nodes[value].left;\\n                self.nodes[self.nodes[cursor].left].parent = cursor;\\n                self.nodes[cursor].right = self.nodes[value].right;\\n                self.nodes[self.nodes[cursor].right].parent = cursor;\\n                self.nodes[cursor].red = self.nodes[value].red;\\n                (cursor, value) = (value, cursor);\\n            }\\n            if (doFixup) {\\n                removeFixup(self, probe);\\n            }\\n            delete self.nodes[cursor];\\n        }\\n    }\\n\\n    function treeMinimum(Tree storage self, uint256 value) private view returns (uint256) {\\n        while (self.nodes[value].left != EMPTY) {\\n            value = self.nodes[value].left;\\n        }\\n        return value;\\n    }\\n\\n    function treeMaximum(Tree storage self, uint256 value) private view returns (uint256) {\\n        while (self.nodes[value].right != EMPTY) {\\n            value = self.nodes[value].right;\\n        }\\n        return value;\\n    }\\n\\n    function rotateLeft(Tree storage self, uint256 value) private {\\n        uint256 cursor = self.nodes[value].right;\\n        uint256 parent = self.nodes[value].parent;\\n        uint256 cursorLeft = self.nodes[cursor].left;\\n        self.nodes[value].right = cursorLeft;\\n        if (cursorLeft != EMPTY) {\\n            self.nodes[cursorLeft].parent = value;\\n        }\\n        self.nodes[cursor].parent = parent;\\n        if (parent == EMPTY) {\\n            self.root = cursor;\\n        } else if (value == self.nodes[parent].left) {\\n            self.nodes[parent].left = cursor;\\n        } else {\\n            self.nodes[parent].right = cursor;\\n        }\\n        self.nodes[cursor].left = value;\\n        self.nodes[value].parent = cursor;\\n    }\\n\\n    function rotateRight(Tree storage self, uint256 value) private {\\n        uint256 cursor = self.nodes[value].left;\\n        uint256 parent = self.nodes[value].parent;\\n        uint256 cursorRight = self.nodes[cursor].right;\\n        self.nodes[value].left = cursorRight;\\n        if (cursorRight != EMPTY) {\\n            self.nodes[cursorRight].parent = value;\\n        }\\n        self.nodes[cursor].parent = parent;\\n        if (parent == EMPTY) {\\n            self.root = cursor;\\n        } else if (value == self.nodes[parent].right) {\\n            self.nodes[parent].right = cursor;\\n        } else {\\n            self.nodes[parent].left = cursor;\\n        }\\n        self.nodes[cursor].right = value;\\n        self.nodes[value].parent = cursor;\\n    }\\n\\n    function insertFixup(Tree storage self, uint256 value) private {\\n        uint256 cursor;\\n        while (value != self.root && self.nodes[self.nodes[value].parent].red) {\\n            uint256 valueParent = self.nodes[value].parent;\\n            if (valueParent == self.nodes[self.nodes[valueParent].parent].left) {\\n                cursor = self.nodes[self.nodes[valueParent].parent].right;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    value = self.nodes[valueParent].parent;\\n                } else {\\n                    if (value == self.nodes[valueParent].right) {\\n                        value = valueParent;\\n                        rotateLeft(self, value);\\n                    }\\n                    valueParent = self.nodes[value].parent;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    rotateRight(self, self.nodes[valueParent].parent);\\n                }\\n            } else {\\n                cursor = self.nodes[self.nodes[valueParent].parent].left;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    value = self.nodes[valueParent].parent;\\n                } else {\\n                    if (value == self.nodes[valueParent].left) {\\n                        value = valueParent;\\n                        rotateRight(self, value);\\n                    }\\n                    valueParent = self.nodes[value].parent;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[valueParent].parent].red = true;\\n                    rotateLeft(self, self.nodes[valueParent].parent);\\n                }\\n            }\\n        }\\n        self.nodes[self.root].red = false;\\n    }\\n\\n    function replaceParent(\\n        Tree storage self,\\n        uint256 a,\\n        uint256 b\\n    ) private {\\n        uint256 bParent = self.nodes[b].parent;\\n        self.nodes[a].parent = bParent;\\n        if (bParent == EMPTY) {\\n            self.root = a;\\n        } else {\\n            if (b == self.nodes[bParent].left) {\\n                self.nodes[bParent].left = a;\\n            } else {\\n                self.nodes[bParent].right = a;\\n            }\\n        }\\n    }\\n\\n    function removeFixup(Tree storage self, uint256 value) private {\\n        uint256 cursor;\\n        while (value != self.root && !self.nodes[value].red) {\\n            uint256 valueParent = self.nodes[value].parent;\\n            if (value == self.nodes[valueParent].left) {\\n                cursor = self.nodes[valueParent].right;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[valueParent].red = true;\\n                    rotateLeft(self, valueParent);\\n                    cursor = self.nodes[valueParent].right;\\n                }\\n                if (\\n                    !self.nodes[self.nodes[cursor].left].red &&\\n                    !self.nodes[self.nodes[cursor].right].red\\n                ) {\\n                    self.nodes[cursor].red = true;\\n                    value = valueParent;\\n                } else {\\n                    if (!self.nodes[self.nodes[cursor].right].red) {\\n                        self.nodes[self.nodes[cursor].left].red = false;\\n                        self.nodes[cursor].red = true;\\n                        rotateRight(self, cursor);\\n                        cursor = self.nodes[valueParent].right;\\n                    }\\n                    self.nodes[cursor].red = self.nodes[valueParent].red;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[cursor].right].red = false;\\n                    rotateLeft(self, valueParent);\\n                    value = self.root;\\n                }\\n            } else {\\n                cursor = self.nodes[valueParent].left;\\n                if (self.nodes[cursor].red) {\\n                    self.nodes[cursor].red = false;\\n                    self.nodes[valueParent].red = true;\\n                    rotateRight(self, valueParent);\\n                    cursor = self.nodes[valueParent].left;\\n                }\\n                if (\\n                    !self.nodes[self.nodes[cursor].right].red &&\\n                    !self.nodes[self.nodes[cursor].left].red\\n                ) {\\n                    self.nodes[cursor].red = true;\\n                    value = valueParent;\\n                } else {\\n                    if (!self.nodes[self.nodes[cursor].left].red) {\\n                        self.nodes[self.nodes[cursor].right].red = false;\\n                        self.nodes[cursor].red = true;\\n                        rotateLeft(self, cursor);\\n                        cursor = self.nodes[valueParent].left;\\n                    }\\n                    self.nodes[cursor].red = self.nodes[valueParent].red;\\n                    self.nodes[valueParent].red = false;\\n                    self.nodes[self.nodes[cursor].left].red = false;\\n                    rotateRight(self, valueParent);\\n                    value = self.root;\\n                }\\n            }\\n        }\\n        self.nodes[value].red = false;\\n    }\\n\\n    function estimateDroppedAmountFromLeft(Tree storage self, uint256 targetFutureValue)\\n        internal\\n        view\\n        returns (uint256 droppedAmount)\\n    {\\n        uint256 cursor = first(self);\\n        uint256 totalDroppedAmountInFV = 0;\\n        droppedAmount = 0;\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (totalDroppedAmountInFV < targetFutureValue && cursor != EMPTY) {\\n            uint256 cursorNodeAmountInPV = self.nodes[cursor].orderTotalAmount;\\n\\n            uint256 cursorNodeAmountInFV = _calculateFutureValue(cursor, cursorNodeAmountInPV);\\n            totalDroppedAmountInFV += cursorNodeAmountInFV;\\n\\n            if (totalDroppedAmountInFV > targetFutureValue) {\\n                uint256 filledAmountInFV = cursorNodeAmountInFV -\\n                    (totalDroppedAmountInFV - targetFutureValue);\\n                droppedAmount += (cursorNodeAmountInPV * filledAmountInFV).div(\\n                    cursorNodeAmountInFV\\n                );\\n            } else {\\n                droppedAmount += cursorNodeAmountInPV;\\n            }\\n\\n            cursor = next(self, cursor);\\n        }\\n    }\\n\\n    function estimateDroppedAmountFromRight(Tree storage self, uint256 targetFutureValue)\\n        internal\\n        view\\n        returns (uint256 droppedAmount)\\n    {\\n        uint256 cursor = last(self);\\n        uint256 totalDroppedAmountInFV = 0;\\n        droppedAmount = 0;\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        while (totalDroppedAmountInFV < targetFutureValue && cursor != EMPTY) {\\n            uint256 cursorNodeAmountInPV = self.nodes[cursor].orderTotalAmount;\\n\\n            uint256 cursorNodeAmountInFV = _calculateFutureValue(cursor, cursorNodeAmountInPV);\\n            totalDroppedAmountInFV += cursorNodeAmountInFV;\\n\\n            if (totalDroppedAmountInFV > targetFutureValue) {\\n                uint256 filledAmountInFV = cursorNodeAmountInFV -\\n                    (totalDroppedAmountInFV - targetFutureValue);\\n                droppedAmount += (cursorNodeAmountInPV * filledAmountInFV).div(\\n                    cursorNodeAmountInFV\\n                );\\n            } else {\\n                droppedAmount += cursorNodeAmountInPV;\\n            }\\n\\n            cursor = prev(self, cursor);\\n        }\\n    }\\n\\n    function dropLeft(\\n        Tree storage self,\\n        uint256 amount,\\n        uint256 limitValue,\\n        uint256 limitFutureValue\\n    )\\n        internal\\n        returns (\\n            uint256 value,\\n            uint256 filledAmount,\\n            uint256 filledFutureValue,\\n            uint256 remainingAmount,\\n            PartiallyFilledOrder memory partiallyFilledOrder\\n        )\\n    {\\n        uint256 cursor = first(self);\\n        uint256 cursorNodeAmount = 0;\\n        uint256 totalAmount = 0;\\n\\n        require(cursor <= limitValue || limitValue == 0, \\\"Insufficient limit value\\\");\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        uint256 amountDiff;\\n        uint256 futureValueDiff;\\n        while (\\n            (totalAmount < amount || amount == EMPTY) &&\\n            (filledFutureValue < limitFutureValue || limitFutureValue == EMPTY) &&\\n            cursor != EMPTY &&\\n            (cursor <= limitValue || limitValue == EMPTY)\\n        ) {\\n            cursorNodeAmount = self.nodes[cursor].orderTotalAmount;\\n            totalAmount += cursorNodeAmount;\\n            value = cursor;\\n\\n            filledFutureValue += _calculateFutureValue(cursor, cursorNodeAmount);\\n            filledAmount += cursorNodeAmount;\\n\\n            if (totalAmount > amount && amount != EMPTY) {\\n                amountDiff = totalAmount - amount;\\n                futureValueDiff = _calculateFutureValue(cursor, amountDiff);\\n            } else if (filledFutureValue > limitFutureValue && limitFutureValue != EMPTY) {\\n                futureValueDiff = filledFutureValue - limitFutureValue;\\n                amountDiff = _calculatePresentValue(cursor, futureValueDiff);\\n            }\\n\\n            cursor = next(self, cursor);\\n        }\\n\\n        if (amountDiff > 0) {\\n            filledAmount -= amountDiff;\\n        }\\n        if (futureValueDiff > 0) {\\n            filledFutureValue -= futureValueDiff;\\n        }\\n\\n        if (totalAmount > 0) {\\n            if (amountDiff > 0) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                partiallyFilledOrder = fillOrders(self, cursor, cursorNodeAmount - amountDiff);\\n            } else if (futureValueDiff > 0) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                partiallyFilledOrder = fillOrders(\\n                    self,\\n                    cursor,\\n                    cursorNodeAmount - _calculatePresentValue(cursor, futureValueDiff)\\n                );\\n            }\\n\\n            self.nodes[cursor].left = 0;\\n\\n            uint256 parent = self.nodes[cursor].parent;\\n\\n            if (cursor != EMPTY) {\\n                while (parent != EMPTY) {\\n                    if (parent > cursor) {\\n                        // Relink the nodes\\n                        if (self.nodes[cursor].parent != parent) {\\n                            self.nodes[cursor].parent = parent;\\n                            self.nodes[parent].left = cursor;\\n                        }\\n\\n                        cursor = parent;\\n                    }\\n\\n                    parent = self.nodes[parent].parent;\\n                }\\n            }\\n        }\\n\\n        if (amount > totalAmount) {\\n            remainingAmount = amount - totalAmount;\\n        }\\n\\n        uint256 lastNode = last(self);\\n\\n        if (lastNode == value && self.nodes[lastNode].orderTotalAmount == 0) {\\n            // The case that all node is dropped.\\n            self.root = EMPTY;\\n        } else if (value > self.root || (value == self.root && filledAmount >= totalAmount)) {\\n            // The case that the root node is dropped\\n            self.root = cursor;\\n            self.nodes[cursor].parent = 0;\\n        }\\n\\n        rotateTreeToLeft(self);\\n    }\\n\\n    function dropRight(\\n        Tree storage self,\\n        uint256 amount,\\n        uint256 limitValue,\\n        uint256 limitFutureValue\\n    )\\n        internal\\n        returns (\\n            uint256 value,\\n            uint256 filledAmount,\\n            uint256 filledFutureValue,\\n            uint256 remainingAmount,\\n            PartiallyFilledOrder memory partiallyFilledOrder\\n        )\\n    {\\n        uint256 cursor = last(self);\\n        uint256 cursorNodeAmount = 0;\\n        uint256 totalAmount = 0;\\n\\n        require(cursor >= limitValue || limitValue == 0, \\\"Insufficient limit value\\\");\\n\\n        // Find a node whose total amount is over the amount of the argument.\\n        uint256 amountDiff;\\n        uint256 futureValueDiff;\\n        while (\\n            (totalAmount < amount || amount == EMPTY) &&\\n            (filledFutureValue < limitFutureValue || limitFutureValue == EMPTY) &&\\n            cursor != EMPTY &&\\n            (cursor >= limitValue || limitValue == EMPTY)\\n        ) {\\n            cursorNodeAmount = self.nodes[cursor].orderTotalAmount;\\n            totalAmount += cursorNodeAmount;\\n            value = cursor;\\n\\n            filledFutureValue += _calculateFutureValue(cursor, cursorNodeAmount);\\n            filledAmount += cursorNodeAmount;\\n\\n            if (totalAmount > amount && amount != EMPTY) {\\n                amountDiff = totalAmount - amount;\\n                futureValueDiff = _calculateFutureValue(cursor, amountDiff);\\n            } else if (filledFutureValue > limitFutureValue && limitFutureValue != EMPTY) {\\n                futureValueDiff = filledFutureValue - limitFutureValue;\\n                amountDiff = _calculatePresentValue(cursor, futureValueDiff);\\n            }\\n\\n            cursor = prev(self, cursor);\\n        }\\n\\n        if (amountDiff > 0) {\\n            filledAmount -= amountDiff;\\n        }\\n        if (futureValueDiff > 0) {\\n            filledFutureValue -= futureValueDiff;\\n        }\\n\\n        if (totalAmount > 0) {\\n            if (amountDiff > 0) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                partiallyFilledOrder = fillOrders(self, cursor, cursorNodeAmount - amountDiff);\\n            } else if (futureValueDiff > 0) {\\n                cursor = value;\\n                // Update order ids in the node.\\n                partiallyFilledOrder = fillOrders(\\n                    self,\\n                    cursor,\\n                    cursorNodeAmount - _calculatePresentValue(cursor, futureValueDiff)\\n                );\\n            }\\n\\n            self.nodes[cursor].right = 0;\\n\\n            uint256 parent = self.nodes[cursor].parent;\\n\\n            if (cursor != EMPTY) {\\n                while (parent != EMPTY) {\\n                    if (parent < cursor) {\\n                        // Relink the nodes\\n                        if (self.nodes[cursor].parent != parent) {\\n                            self.nodes[cursor].parent = parent;\\n                            self.nodes[parent].right = cursor;\\n                        }\\n\\n                        cursor = parent;\\n                    }\\n\\n                    parent = self.nodes[parent].parent;\\n                }\\n            }\\n        }\\n\\n        if (amount > totalAmount) {\\n            remainingAmount = amount - totalAmount;\\n        }\\n\\n        uint256 firstNode = first(self);\\n\\n        if (firstNode == value && self.nodes[firstNode].orderTotalAmount == 0) {\\n            // The case that all node is dropped.\\n            self.root = EMPTY;\\n        } else if (value < self.root || (value == self.root && filledAmount >= totalAmount)) {\\n            // The case that the root node is dropped\\n            self.root = cursor;\\n            self.nodes[cursor].parent = 0;\\n        }\\n\\n        rotateTreeToRight(self);\\n    }\\n\\n    function rotateTreeToLeft(Tree storage self) internal {\\n        if (self.nodes[self.root].left == 0 && self.nodes[self.root].right != 0) {\\n            if (self.nodes[self.nodes[self.root].right].left != 0) {\\n                rotateRight(self, self.nodes[self.root].right);\\n            }\\n            rotateLeft(self, self.root);\\n        }\\n\\n        if (self.nodes[self.root].red) {\\n            self.nodes[self.root].red = false;\\n        }\\n    }\\n\\n    function rotateTreeToRight(Tree storage self) internal {\\n        if (self.nodes[self.root].right == 0 && self.nodes[self.root].left != 0) {\\n            if (self.nodes[self.nodes[self.root].left].right != 0) {\\n                rotateLeft(self, self.nodes[self.root].left);\\n            }\\n            rotateRight(self, self.root);\\n        }\\n\\n        if (self.nodes[self.root].red) {\\n            self.nodes[self.root].red = false;\\n        }\\n    }\\n\\n    function getFutureValue(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (uint256) {\\n        return _calculateFutureValue(value, self.nodes[value].orders[orderId].amount);\\n    }\\n\\n    // Double linked list functions\\n    /**\\n     * @dev Retrieves the Object denoted by `_id`.\\n     */\\n    function getOrderById(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (OrderItem memory) {\\n        Node storage gn = self.nodes[value];\\n        return gn.orders[orderId];\\n    }\\n\\n    /**\\n     * @dev Return boolean if value, amount and orderId exist in doubly linked list\\n     */\\n    function orderIdExists(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal view returns (bool) {\\n        uint48 cursor = orderId;\\n        Node storage gn = self.nodes[value];\\n        OrderItem memory order = gn.orders[cursor];\\n\\n        if (order.orderId != cursor) {\\n            return false;\\n        }\\n\\n        while (order.prev != EMPTY) {\\n            cursor = order.prev;\\n            order = gn.orders[cursor];\\n        }\\n\\n        return cursor == gn.head;\\n    }\\n\\n    function insertOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId,\\n        address user,\\n        uint256 amount\\n    ) internal {\\n        require(amount > 0, \\\"Insufficient amount\\\");\\n        require(value <= Constants.PRICE_DIGIT, \\\"Insufficient value\\\");\\n        insert(self, value);\\n\\n        addTail(self, value, orderId, user, amount);\\n    }\\n\\n    function removeOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        amount = _removeOrder(self, value, orderId);\\n        remove(self, value);\\n    }\\n\\n    /**\\n     * @dev Reduces order amount once market order taken.\\n     */\\n    function fillOrders(\\n        Tree storage self,\\n        uint256 value,\\n        uint256 _amount\\n    ) internal returns (PartiallyFilledOrder memory partiallyFilledOrder) {\\n        Node storage gn = self.nodes[value];\\n\\n        require(\\n            gn.orderTotalAmount >= _amount,\\n            \\\"OrderStatisticsTree(410) - Amount to fill is insufficient\\\"\\n        );\\n\\n        uint256 remainingAmount = _amount;\\n        OrderItem memory currentOrder = gn.orders[gn.head];\\n        uint48 orderId = gn.head;\\n\\n        while (orderId != 0 && remainingAmount != 0) {\\n            currentOrder = gn.orders[orderId];\\n\\n            if (currentOrder.amount <= remainingAmount) {\\n                remainingAmount -= currentOrder.amount;\\n                orderId = currentOrder.next;\\n            } else {\\n                partiallyFilledOrder = PartiallyFilledOrder(\\n                    currentOrder.orderId,\\n                    currentOrder.maker,\\n                    remainingAmount,\\n                    _calculateFutureValue(value, remainingAmount)\\n                );\\n                currentOrder = gn.orders[currentOrder.prev];\\n                break;\\n            }\\n        }\\n\\n        if (currentOrder.orderId != 0) {\\n            _dropOrders(self, value, currentOrder.orderId);\\n        }\\n\\n        if (partiallyFilledOrder.amount > 0) {\\n            self.nodes[value].orders[partiallyFilledOrder.orderId].amount -= partiallyFilledOrder\\n                .amount;\\n            self.nodes[value].orderTotalAmount -= partiallyFilledOrder.amount;\\n        }\\n    }\\n\\n    /**\\n     * @dev Insert a new OrderItem as the new Head with `_amount` in the amount field, and orderId.\\n     */\\n    function addHead(\\n        Tree storage self,\\n        uint256 _value,\\n        uint48 _orderId,\\n        address _user,\\n        uint256 _amount\\n    ) internal {\\n        Node storage gn = self.nodes[_value];\\n        uint48 orderId = _createOrder(self, _value, _orderId, _user, _amount);\\n        _link(self, _value, orderId, gn.head);\\n        _setHead(self, _value, orderId);\\n        if (gn.tail == 0) _setTail(self, _value, orderId);\\n    }\\n\\n    /**\\n     * @dev Insert a new OrderItem as the new Tail with `_amount` in the amount field, and orderId.\\n     */\\n    function addTail(\\n        Tree storage self,\\n        uint256 _value,\\n        uint48 _orderId,\\n        address _user,\\n        uint256 _amount\\n    ) internal {\\n        Node storage gn = self.nodes[_value];\\n\\n        if (gn.head == 0) {\\n            addHead(self, _value, _orderId, _user, _amount);\\n        } else {\\n            uint48 orderId = _createOrder(self, _value, _orderId, _user, _amount);\\n            _link(self, _value, gn.tail, orderId);\\n            _setTail(self, _value, orderId);\\n        }\\n    }\\n\\n    /**\\n     * @dev Internal function to create an unlinked Order.\\n     */\\n    function _createOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId,\\n        address user,\\n        uint256 amount\\n    ) internal returns (uint48) {\\n        Node storage gn = self.nodes[value];\\n        require(\\n            gn.orders[orderId].timestamp == 0,\\n            \\\"OrderStatisticsTree(409) - Order id already exist.\\\"\\n        );\\n\\n        gn.orderCounter += 1;\\n        gn.orderTotalAmount += amount;\\n        OrderItem memory order = OrderItem(orderId, 0, 0, user, block.timestamp, amount);\\n        gn.orders[orderId] = order;\\n        return order.orderId;\\n    }\\n\\n    /**\\n     * @dev Remove the OrderItem denoted by `_id` from the list.\\n     */\\n    function _removeOrder(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        Node storage gn = self.nodes[value];\\n\\n        OrderItem memory order = gn.orders[orderId];\\n        amount = order.amount;\\n\\n        if (gn.head == orderId && gn.tail == orderId) {\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        } else if (gn.head == orderId) {\\n            _setHead(self, value, order.next);\\n            gn.orders[order.next].prev = 0;\\n        } else if (gn.tail == orderId) {\\n            _setTail(self, value, order.prev);\\n            gn.orders[order.prev].next = 0;\\n        } else {\\n            _link(self, value, order.prev, order.next);\\n        }\\n        delete gn.orders[order.orderId];\\n        gn.orderCounter -= 1;\\n        gn.orderTotalAmount -= order.amount;\\n    }\\n\\n    /**\\n     * @dev Drop the OrderItems older than or equal `orderId` from the list\\n     */\\n    function _dropOrders(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal returns (uint256 amount) {\\n        require(\\n            isActiveOrderId(self, value, orderId),\\n            \\\"OrderStatisticsTree(410) - Order does not exist.\\\"\\n        );\\n        Node storage gn = self.nodes[value];\\n\\n        OrderItem memory order = gn.orders[orderId];\\n        amount = order.amount;\\n        uint256 cursor = gn.head;\\n        uint256 removedCount = 1;\\n        uint256 removedAmount = gn.orders[cursor].amount;\\n\\n        while (cursor != orderId) {\\n            cursor = gn.orders[cursor].next;\\n            removedCount++;\\n            removedAmount += gn.orders[cursor].amount;\\n        }\\n\\n        if (gn.tail == orderId) {\\n            _setHead(self, value, 0);\\n            _setTail(self, value, 0);\\n        } else {\\n            _setHead(self, value, order.next);\\n            gn.orders[order.next].prev = 0;\\n        }\\n\\n        gn.orderCounter -= removedCount;\\n        gn.orderTotalAmount -= removedAmount;\\n    }\\n\\n    /**\\n     * @dev Internal function to update the Head pointer.\\n     */\\n    function _setHead(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.head = orderId;\\n    }\\n\\n    /**\\n     * @dev Internal function to update the Tail pointer.\\n     */\\n    function _setTail(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 orderId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.tail = orderId;\\n    }\\n\\n    /**\\n     * @dev Internal function to link an Object to another.\\n     */\\n    function _link(\\n        Tree storage self,\\n        uint256 value,\\n        uint48 _prevId,\\n        uint48 _nextId\\n    ) internal {\\n        Node storage gn = self.nodes[value];\\n\\n        gn.orders[_prevId].next = _nextId;\\n        gn.orders[_nextId].prev = _prevId;\\n    }\\n\\n    function _calculateFutureValue(uint256 unitPrice, uint256 amount)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        return (amount * Constants.PRICE_DIGIT).div(unitPrice);\\n    }\\n\\n    function _calculatePresentValue(uint256 unitPrice, uint256 amount)\\n        internal\\n        pure\\n        returns (uint256)\\n    {\\n        return (amount * unitPrice).div(Constants.PRICE_DIGIT);\\n    }\\n}\\n\",\"keccak256\":\"0x82f693fffbd1f1657b73d69598c7856b403fcccd41ac1c3143e8082e5dc9344d\",\"license\":\"MIT\"},\"contracts/protocol/libraries/logics/OrderBookLogic.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {OrderStatisticsTreeLib, PartiallyFilledOrder, OrderItem} from \\\"../OrderStatisticsTreeLib.sol\\\";\\nimport {Constants} from \\\"../Constants.sol\\\";\\nimport {RoundingUint256} from \\\"../math/RoundingUint256.sol\\\";\\nimport {ILendingMarket} from \\\"../../interfaces/ILendingMarket.sol\\\";\\nimport {ProtocolTypes} from \\\"../../types/ProtocolTypes.sol\\\";\\nimport {LendingMarketStorage as Storage, MarketOrder, ItayoseLog} from \\\"../../storages/LendingMarketStorage.sol\\\";\\n\\nlibrary OrderBookLogic {\\n    using OrderStatisticsTreeLib for OrderStatisticsTreeLib.Tree;\\n    using RoundingUint256 for uint256;\\n\\n    function getHighestLendingUnitPrice() public view returns (uint256) {\\n        return Storage.slot().lendOrders[Storage.slot().maturity].last();\\n    }\\n\\n    function getLowestBorrowingUnitPrice() public view returns (uint256) {\\n        uint256 unitPrice = Storage.slot().borrowOrders[Storage.slot().maturity].first();\\n        return unitPrice == 0 ? Constants.PRICE_DIGIT : unitPrice;\\n    }\\n\\n    function hasBorrowOrder(address _user) external view returns (bool) {\\n        return Storage.slot().activeBorrowOrderIds[_user].length != 0;\\n    }\\n\\n    function hasLendOrder(address _user) external view returns (bool) {\\n        return Storage.slot().activeLendOrderIds[_user].length != 0;\\n    }\\n\\n    function getLendOrderBook(uint256 _limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        )\\n    {\\n        unitPrices = new uint256[](_limit);\\n        amounts = new uint256[](_limit);\\n        quantities = new uint256[](_limit);\\n\\n        uint256 unitPrice = Storage.slot().lendOrders[Storage.slot().maturity].last();\\n        unitPrices[0] = unitPrice;\\n        amounts[0] = Storage.slot().lendOrders[Storage.slot().maturity].getNodeTotalAmount(\\n            unitPrice\\n        );\\n        quantities[0] = Storage.slot().lendOrders[Storage.slot().maturity].getNodeCount(unitPrice);\\n\\n        for (uint256 i = 1; i < unitPrices.length; i++) {\\n            if (unitPrice == 0) {\\n                break;\\n            }\\n\\n            unitPrice = Storage.slot().lendOrders[Storage.slot().maturity].prev(unitPrice);\\n            unitPrices[i] = unitPrice;\\n            amounts[i] = Storage.slot().lendOrders[Storage.slot().maturity].getNodeTotalAmount(\\n                unitPrice\\n            );\\n            quantities[i] = Storage.slot().lendOrders[Storage.slot().maturity].getNodeCount(\\n                unitPrice\\n            );\\n        }\\n    }\\n\\n    function getBorrowOrderBook(uint256 _limit)\\n        external\\n        view\\n        returns (\\n            uint256[] memory unitPrices,\\n            uint256[] memory amounts,\\n            uint256[] memory quantities\\n        )\\n    {\\n        unitPrices = new uint256[](_limit);\\n        amounts = new uint256[](_limit);\\n        quantities = new uint256[](_limit);\\n\\n        uint256 unitPrice = Storage.slot().borrowOrders[Storage.slot().maturity].first();\\n        unitPrices[0] = unitPrice;\\n        amounts[0] = Storage.slot().borrowOrders[Storage.slot().maturity].getNodeTotalAmount(\\n            unitPrice\\n        );\\n        quantities[0] = Storage.slot().borrowOrders[Storage.slot().maturity].getNodeCount(\\n            unitPrice\\n        );\\n\\n        for (uint256 i = 1; i < unitPrices.length; i++) {\\n            if (unitPrice == 0) {\\n                break;\\n            }\\n\\n            unitPrice = Storage.slot().borrowOrders[Storage.slot().maturity].next(unitPrice);\\n            unitPrices[i] = unitPrice;\\n            amounts[i] = Storage.slot().borrowOrders[Storage.slot().maturity].getNodeTotalAmount(\\n                unitPrice\\n            );\\n            quantities[i] = Storage.slot().borrowOrders[Storage.slot().maturity].getNodeCount(\\n                unitPrice\\n            );\\n        }\\n    }\\n\\n    function getOrder(uint48 _orderId)\\n        external\\n        view\\n        returns (\\n            ProtocolTypes.Side side,\\n            uint256 unitPrice,\\n            uint256 maturity,\\n            address maker,\\n            uint256 amount,\\n            uint256 timestamp,\\n            bool isPreOrder\\n        )\\n    {\\n        MarketOrder memory marketOrder = Storage.slot().orders[_orderId];\\n\\n        OrderItem memory orderItem;\\n        if (marketOrder.side == ProtocolTypes.Side.LEND) {\\n            orderItem = Storage.slot().lendOrders[marketOrder.maturity].getOrderById(\\n                marketOrder.unitPrice,\\n                _orderId\\n            );\\n        } else {\\n            orderItem = Storage.slot().borrowOrders[marketOrder.maturity].getOrderById(\\n                marketOrder.unitPrice,\\n                _orderId\\n            );\\n        }\\n\\n        if (orderItem.maker != address(0)) {\\n            side = marketOrder.side;\\n            unitPrice = marketOrder.unitPrice;\\n            maturity = marketOrder.maturity;\\n            maker = orderItem.maker;\\n            amount = orderItem.amount;\\n            timestamp = orderItem.timestamp;\\n            isPreOrder = Storage.slot().isPreOrder[_orderId];\\n        }\\n    }\\n\\n    function getTotalAmountFromLendOrders(address _user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        )\\n    {\\n        (uint48[] memory activeOrderIds, uint48[] memory inActiveOrderIds) = getLendOrderIds(_user);\\n        maturity = Storage.slot().userCurrentMaturities[_user];\\n\\n        for (uint256 i = 0; i < activeOrderIds.length; i++) {\\n            MarketOrder memory marketOrder = Storage.slot().orders[activeOrderIds[i]];\\n            // Sum future values in the current maturity.\\n            // If the market is rotated and maturity is updated, it will be 0 by treating it\\n            // as an order canceled in the past market.\\n            OrderItem memory orderItem = Storage\\n                .slot()\\n                .lendOrders[Storage.slot().maturity]\\n                .getOrderById(marketOrder.unitPrice, activeOrderIds[i]);\\n            activeAmount += orderItem.amount;\\n        }\\n\\n        for (uint256 i = 0; i < inActiveOrderIds.length; i++) {\\n            // Sum future values in the maturity of orders.\\n            // It will be the future value when the order is created, even if the market is rotated\\n            // and maturity is updated.\\n            (uint256 presentValue, uint256 futureValue) = _getLendOrderAmounts(inActiveOrderIds[i]);\\n            inactiveAmount += presentValue;\\n            inactiveFutureValue += futureValue;\\n        }\\n    }\\n\\n    function getTotalAmountFromBorrowOrders(address _user)\\n        external\\n        view\\n        returns (\\n            uint256 activeAmount,\\n            uint256 inactiveAmount,\\n            uint256 inactiveFutureValue,\\n            uint256 maturity\\n        )\\n    {\\n        (uint48[] memory activeOrderIds, uint48[] memory inActiveOrderIds) = getBorrowOrderIds(\\n            _user\\n        );\\n        maturity = Storage.slot().userCurrentMaturities[_user];\\n\\n        for (uint256 i = 0; i < activeOrderIds.length; i++) {\\n            MarketOrder memory marketOrder = Storage.slot().orders[activeOrderIds[i]];\\n            // Sum future values in the current maturity.\\n            // If the market is rotated and maturity is updated, it will be 0 by treating it\\n            // as an order canceled in the past market.\\n            OrderItem memory orderItem = Storage\\n                .slot()\\n                .borrowOrders[Storage.slot().maturity]\\n                .getOrderById(marketOrder.unitPrice, activeOrderIds[i]);\\n            activeAmount += orderItem.amount;\\n        }\\n\\n        maturity = Storage.slot().userCurrentMaturities[_user];\\n\\n        for (uint256 i = 0; i < inActiveOrderIds.length; i++) {\\n            // Sum future values in the maturity of orders\\n            // It will be the future value when the order is created, even if the market is rotated\\n            // and maturity is updated.\\n            (uint256 presentValue, uint256 futureValue) = _getBorrowOrderAmounts(\\n                inActiveOrderIds[i]\\n            );\\n            inactiveAmount += presentValue;\\n            inactiveFutureValue += futureValue;\\n        }\\n    }\\n\\n    function getLendOrderIds(address _user)\\n        public\\n        view\\n        returns (uint48[] memory activeOrderIds, uint48[] memory inActiveOrderIds)\\n    {\\n        uint256 activeOrderCount = 0;\\n        uint256 inActiveOrderCount = 0;\\n        bool isPastMaturity = Storage.slot().userCurrentMaturities[_user] !=\\n            Storage.slot().maturity;\\n\\n        activeOrderIds = new uint48[](\\n            isPastMaturity ? 0 : Storage.slot().activeLendOrderIds[_user].length\\n        );\\n        inActiveOrderIds = new uint48[](Storage.slot().activeLendOrderIds[_user].length);\\n\\n        for (uint256 i = 0; i < Storage.slot().activeLendOrderIds[_user].length; i++) {\\n            uint48 orderId = Storage.slot().activeLendOrderIds[_user][i];\\n            MarketOrder memory marketOrder = Storage.slot().orders[orderId];\\n\\n            if (\\n                !Storage\\n                    .slot()\\n                    .lendOrders[Storage.slot().userCurrentMaturities[_user]]\\n                    .isActiveOrderId(marketOrder.unitPrice, orderId)\\n            ) {\\n                inActiveOrderCount += 1;\\n                inActiveOrderIds[i - activeOrderCount] = orderId;\\n                if (!isPastMaturity) {\\n                    assembly {\\n                        mstore(activeOrderIds, sub(mload(activeOrderIds), 1))\\n                    }\\n                }\\n            } else {\\n                if (!isPastMaturity) {\\n                    activeOrderCount += 1;\\n                    activeOrderIds[i - inActiveOrderCount] = orderId;\\n                }\\n                assembly {\\n                    mstore(inActiveOrderIds, sub(mload(inActiveOrderIds), 1))\\n                }\\n            }\\n        }\\n    }\\n\\n    function getBorrowOrderIds(address _user)\\n        public\\n        view\\n        returns (uint48[] memory activeOrderIds, uint48[] memory inActiveOrderIds)\\n    {\\n        uint256 activeOrderCount = 0;\\n        uint256 inActiveOrderCount = 0;\\n        bool isPastMaturity = Storage.slot().userCurrentMaturities[_user] !=\\n            Storage.slot().maturity;\\n\\n        activeOrderIds = new uint48[](\\n            isPastMaturity ? 0 : Storage.slot().activeBorrowOrderIds[_user].length\\n        );\\n        inActiveOrderIds = new uint48[](Storage.slot().activeBorrowOrderIds[_user].length);\\n\\n        for (uint256 i = 0; i < Storage.slot().activeBorrowOrderIds[_user].length; i++) {\\n            uint48 orderId = Storage.slot().activeBorrowOrderIds[_user][i];\\n            MarketOrder memory marketOrder = Storage.slot().orders[orderId];\\n\\n            if (\\n                !Storage\\n                    .slot()\\n                    .borrowOrders[Storage.slot().userCurrentMaturities[_user]]\\n                    .isActiveOrderId(marketOrder.unitPrice, orderId)\\n            ) {\\n                inActiveOrderCount += 1;\\n                inActiveOrderIds[i - activeOrderCount] = orderId;\\n                if (!isPastMaturity) {\\n                    assembly {\\n                        mstore(activeOrderIds, sub(mload(activeOrderIds), 1))\\n                    }\\n                }\\n            } else {\\n                activeOrderCount += 1;\\n                if (!isPastMaturity) {\\n                    activeOrderIds[i - inActiveOrderCount] = orderId;\\n                }\\n                assembly {\\n                    mstore(inActiveOrderIds, sub(mload(inActiveOrderIds), 1))\\n                }\\n            }\\n        }\\n    }\\n\\n    function estimateFilledAmount(ProtocolTypes.Side _side, uint256 _futureValue)\\n        external\\n        view\\n        returns (uint256 amount)\\n    {\\n        if (_side == ProtocolTypes.Side.BORROW) {\\n            return\\n                Storage.slot().lendOrders[Storage.slot().maturity].estimateDroppedAmountFromRight(\\n                    _futureValue\\n                );\\n        } else {\\n            return\\n                Storage.slot().borrowOrders[Storage.slot().maturity].estimateDroppedAmountFromLeft(\\n                    _futureValue\\n                );\\n        }\\n    }\\n\\n    function insertOrder(\\n        ProtocolTypes.Side _side,\\n        address _user,\\n        uint256 _amount,\\n        uint256 _unitPrice\\n    ) external returns (uint48 orderId) {\\n        orderId = _nextOrderId();\\n        Storage.slot().orders[orderId] = MarketOrder(\\n            _side,\\n            _unitPrice,\\n            Storage.slot().maturity,\\n            block.timestamp\\n        );\\n\\n        if (_side == ProtocolTypes.Side.LEND) {\\n            Storage.slot().lendOrders[Storage.slot().maturity].insertOrder(\\n                _unitPrice,\\n                orderId,\\n                _user,\\n                _amount\\n            );\\n            Storage.slot().activeLendOrderIds[_user].push(orderId);\\n        } else if (_side == ProtocolTypes.Side.BORROW) {\\n            Storage.slot().borrowOrders[Storage.slot().maturity].insertOrder(\\n                _unitPrice,\\n                orderId,\\n                _user,\\n                _amount\\n            );\\n            Storage.slot().activeBorrowOrderIds[_user].push(orderId);\\n        }\\n    }\\n\\n    function dropOrders(\\n        ProtocolTypes.Side _side,\\n        uint256 _amount,\\n        uint256 _futureValue,\\n        uint256 _unitPrice\\n    )\\n        external\\n        returns (\\n            uint256 filledUnitPrice,\\n            uint256 filledAmount,\\n            uint256 filledFutureValue,\\n            uint48 partiallyFilledOrderId,\\n            address partiallyFilledMaker,\\n            uint256 partiallyFilledAmount,\\n            uint256 partiallyFilledFutureValue,\\n            uint256 remainingAmount\\n        )\\n    {\\n        PartiallyFilledOrder memory partiallyFilledOrder;\\n\\n        if (_side == ProtocolTypes.Side.BORROW) {\\n            (\\n                filledUnitPrice,\\n                filledAmount,\\n                filledFutureValue,\\n                remainingAmount,\\n                partiallyFilledOrder\\n            ) = Storage.slot().lendOrders[Storage.slot().maturity].dropRight(\\n                _amount,\\n                _unitPrice,\\n                _futureValue\\n            );\\n        } else if (_side == ProtocolTypes.Side.LEND) {\\n            (\\n                filledUnitPrice,\\n                filledAmount,\\n                filledFutureValue,\\n                remainingAmount,\\n                partiallyFilledOrder\\n            ) = Storage.slot().borrowOrders[Storage.slot().maturity].dropLeft(\\n                _amount,\\n                _unitPrice,\\n                _futureValue\\n            );\\n        }\\n\\n        partiallyFilledOrderId = partiallyFilledOrder.orderId;\\n        partiallyFilledMaker = partiallyFilledOrder.maker;\\n        partiallyFilledAmount = partiallyFilledOrder.amount;\\n        partiallyFilledFutureValue = partiallyFilledOrder.futureValue;\\n    }\\n\\n    function cleanLendOrders(address _user)\\n        external\\n        returns (\\n            uint48[] memory orderIds,\\n            uint256 activeOrderCount,\\n            uint256 removedFutureValue,\\n            uint256 removedOrderAmount\\n        )\\n    {\\n        (\\n            uint48[] memory activeLendOrderIds,\\n            uint48[] memory inActiveLendOrderIds\\n        ) = getLendOrderIds(_user);\\n\\n        Storage.slot().activeLendOrderIds[_user] = activeLendOrderIds;\\n        activeOrderCount = activeLendOrderIds.length;\\n        uint256 inactiveOrderCount = inActiveLendOrderIds.length;\\n        orderIds = new uint48[](inactiveOrderCount);\\n\\n        for (uint256 i = 0; i < inactiveOrderCount; i++) {\\n            (uint256 presentValue, uint256 futureValue) = _getLendOrderAmounts(\\n                inActiveLendOrderIds[i]\\n            );\\n\\n            removedOrderAmount += presentValue;\\n            removedFutureValue += futureValue;\\n            orderIds[i] = inActiveLendOrderIds[i];\\n        }\\n    }\\n\\n    function cleanBorrowOrders(address _user)\\n        external\\n        returns (\\n            uint48[] memory orderIds,\\n            uint256 activeOrderCount,\\n            uint256 removedFutureValue,\\n            uint256 removedOrderAmount\\n        )\\n    {\\n        (\\n            uint48[] memory activeBorrowOrderIds,\\n            uint48[] memory inActiveBorrowOrderIds\\n        ) = getBorrowOrderIds(_user);\\n\\n        Storage.slot().activeBorrowOrderIds[_user] = activeBorrowOrderIds;\\n        activeOrderCount = activeBorrowOrderIds.length;\\n        uint256 inactiveOrderCount = inActiveBorrowOrderIds.length;\\n        orderIds = new uint48[](inactiveOrderCount);\\n\\n        for (uint256 i = 0; i < inactiveOrderCount; i++) {\\n            (uint256 presentValue, uint256 futureValue) = _getBorrowOrderAmounts(\\n                inActiveBorrowOrderIds[i]\\n            );\\n\\n            removedOrderAmount += presentValue;\\n            removedFutureValue += futureValue;\\n            orderIds[i] = inActiveBorrowOrderIds[i];\\n        }\\n    }\\n\\n    function removeOrder(address _user, uint48 _orderId)\\n        external\\n        returns (\\n            ProtocolTypes.Side,\\n            uint256,\\n            uint256\\n        )\\n    {\\n        MarketOrder memory marketOrder = Storage.slot().orders[_orderId];\\n        uint256 removedAmount;\\n        if (marketOrder.side == ProtocolTypes.Side.LEND) {\\n            removedAmount = Storage.slot().lendOrders[Storage.slot().maturity].removeOrder(\\n                marketOrder.unitPrice,\\n                _orderId\\n            );\\n            _removeOrderIdFromOrders(Storage.slot().activeLendOrderIds[_user], _orderId);\\n        } else if (marketOrder.side == ProtocolTypes.Side.BORROW) {\\n            removedAmount = Storage.slot().borrowOrders[Storage.slot().maturity].removeOrder(\\n                marketOrder.unitPrice,\\n                _orderId\\n            );\\n            _removeOrderIdFromOrders(Storage.slot().activeBorrowOrderIds[_user], _orderId);\\n        }\\n\\n        return (marketOrder.side, removedAmount, marketOrder.unitPrice);\\n    }\\n\\n    function getOpeningUnitPrice()\\n        external\\n        view\\n        returns (\\n            uint256 openingUnitPrice,\\n            uint256 lastLendUnitPrice,\\n            uint256 lastBorrowUnitPrice,\\n            uint256 totalOffsetAmount\\n        )\\n    {\\n        uint256 lendUnitPrice = getHighestLendingUnitPrice();\\n        uint256 borrowUnitPrice = getLowestBorrowingUnitPrice();\\n        uint256 lendAmount = Storage.slot().lendOrders[Storage.slot().maturity].getNodeTotalAmount(\\n            lendUnitPrice\\n        );\\n        uint256 borrowAmount = Storage\\n            .slot()\\n            .borrowOrders[Storage.slot().maturity]\\n            .getNodeTotalAmount(borrowUnitPrice);\\n\\n        OrderStatisticsTreeLib.Tree storage borrowOrders = Storage.slot().borrowOrders[\\n            Storage.slot().maturity\\n        ];\\n        OrderStatisticsTreeLib.Tree storage lendOrders = Storage.slot().lendOrders[\\n            Storage.slot().maturity\\n        ];\\n\\n        // return mid price when no lending and borrowing orders overwrap\\n        if (borrowUnitPrice > lendUnitPrice) {\\n            openingUnitPrice = (lendUnitPrice + borrowUnitPrice).div(2);\\n            return (openingUnitPrice, 0, 0, 0);\\n        }\\n\\n        while (borrowUnitPrice <= lendUnitPrice && borrowUnitPrice > 0 && lendUnitPrice > 0) {\\n            lastLendUnitPrice = lendUnitPrice;\\n            lastBorrowUnitPrice = borrowUnitPrice;\\n\\n            if (lendAmount > borrowAmount) {\\n                openingUnitPrice = lendUnitPrice;\\n                totalOffsetAmount += borrowAmount;\\n                lendAmount -= borrowAmount;\\n                borrowUnitPrice = borrowOrders.next(borrowUnitPrice);\\n                borrowAmount = borrowOrders.getNodeTotalAmount(borrowUnitPrice);\\n            } else if (lendAmount < borrowAmount) {\\n                openingUnitPrice = borrowUnitPrice;\\n                totalOffsetAmount += lendAmount;\\n                borrowAmount -= lendAmount;\\n                lendUnitPrice = lendOrders.prev(lendUnitPrice);\\n                lendAmount = lendOrders.getNodeTotalAmount(lendUnitPrice);\\n            } else {\\n                openingUnitPrice = (lendUnitPrice + borrowUnitPrice).div(2);\\n                totalOffsetAmount += lendAmount;\\n                lendUnitPrice = lendOrders.prev(lendUnitPrice);\\n                borrowUnitPrice = borrowOrders.next(borrowUnitPrice);\\n                lendAmount = lendOrders.getNodeTotalAmount(lendUnitPrice);\\n                borrowAmount = borrowOrders.getNodeTotalAmount(borrowUnitPrice);\\n            }\\n        }\\n    }\\n\\n    function getOrderExecutionConditions(\\n        ProtocolTypes.Side _side,\\n        uint256 _unitPrice,\\n        uint256 _circuitBreakerLimitRange\\n    )\\n        external\\n        returns (\\n            bool isFilled,\\n            uint256 executedUnitPrice,\\n            uint256 cbThresholdUnitPrice,\\n            bool ignoreRemainingAmount\\n        )\\n    {\\n        require(_circuitBreakerLimitRange < Constants.PCT_DIGIT, \\\"CB limit can not be so high\\\");\\n        cbThresholdUnitPrice = Storage.slot().circuitBreakerThresholdUnitPrices[block.number][\\n            _side\\n        ];\\n        bool isLend = _side == ProtocolTypes.Side.LEND;\\n        bool orderExists;\\n        uint256 bestUnitPrice;\\n\\n        if (isLend) {\\n            bestUnitPrice = Storage.slot().borrowOrders[Storage.slot().maturity].first();\\n            orderExists = bestUnitPrice != 0;\\n\\n            if (orderExists && cbThresholdUnitPrice == 0) {\\n                cbThresholdUnitPrice = _getLendCircuitBreakerThreshold(\\n                    _circuitBreakerLimitRange,\\n                    bestUnitPrice\\n                );\\n                Storage.slot().circuitBreakerThresholdUnitPrices[block.number][\\n                        _side\\n                    ] = cbThresholdUnitPrice;\\n            }\\n        } else {\\n            bestUnitPrice = Storage.slot().lendOrders[Storage.slot().maturity].last();\\n            orderExists = bestUnitPrice != 0;\\n\\n            if (orderExists && cbThresholdUnitPrice == 0) {\\n                cbThresholdUnitPrice = _getBorrowCircuitBreakerThreshold(\\n                    _circuitBreakerLimitRange,\\n                    bestUnitPrice\\n                );\\n\\n                Storage.slot().circuitBreakerThresholdUnitPrices[block.number][\\n                        _side\\n                    ] = cbThresholdUnitPrice;\\n            }\\n        }\\n\\n        if (_unitPrice == 0 && !orderExists) revert(\\\"Order not found\\\");\\n\\n        if (\\n            _unitPrice == 0 ||\\n            (orderExists &&\\n                ((isLend && _unitPrice > cbThresholdUnitPrice) ||\\n                    (!isLend && _unitPrice < cbThresholdUnitPrice)))\\n        ) {\\n            executedUnitPrice = cbThresholdUnitPrice;\\n            ignoreRemainingAmount = true;\\n        } else {\\n            executedUnitPrice = _unitPrice;\\n            ignoreRemainingAmount = false;\\n        }\\n\\n        isFilled = isLend\\n            ? (bestUnitPrice == 0 ? Constants.PRICE_DIGIT : bestUnitPrice) <= executedUnitPrice\\n            : bestUnitPrice >= executedUnitPrice;\\n    }\\n\\n    function _getBorrowCircuitBreakerThreshold(\\n        uint256 _circuitBreakerLimitRange,\\n        uint256 _unitPrice\\n    ) internal pure returns (uint256 cbThresholdUnitPrice) {\\n        // NOTE: Formula of circuit breaker threshold for borrow orders:\\n        // cbThreshold = 100 / (1 + (100 / price - 1) * (1 + range))\\n        uint256 numerator = _unitPrice * Constants.PRICE_DIGIT * Constants.PCT_DIGIT;\\n        uint256 denominator = _unitPrice *\\n            Constants.PCT_DIGIT +\\n            (Constants.PRICE_DIGIT - _unitPrice) *\\n            (Constants.PCT_DIGIT + _circuitBreakerLimitRange);\\n        cbThresholdUnitPrice = numerator.div(denominator);\\n\\n        if (_unitPrice > cbThresholdUnitPrice + Constants.MAXIMUM_CIRCUIT_BREAKER_THRESHOLD) {\\n            cbThresholdUnitPrice = _unitPrice - Constants.MAXIMUM_CIRCUIT_BREAKER_THRESHOLD;\\n        } else if (\\n            _unitPrice < cbThresholdUnitPrice + Constants.MINIMUM_CIRCUIT_BREAKER_THRESHOLD\\n        ) {\\n            cbThresholdUnitPrice = _unitPrice > Constants.MINIMUM_CIRCUIT_BREAKER_THRESHOLD\\n                ? _unitPrice - Constants.MINIMUM_CIRCUIT_BREAKER_THRESHOLD\\n                : 1;\\n        }\\n    }\\n\\n    function _getLendCircuitBreakerThreshold(uint256 _circuitBreakerLimitRange, uint256 _unitPrice)\\n        internal\\n        pure\\n        returns (uint256 cbThresholdUnitPrice)\\n    {\\n        // NOTE: Formula of circuit breaker threshold for lend orders:\\n        // cbThreshold = 100 / (1 + (100 / price - 1) * (1 - range))\\n        uint256 num = _unitPrice * Constants.PRICE_DIGIT * Constants.PCT_DIGIT;\\n        uint256 den = _unitPrice *\\n            Constants.PCT_DIGIT +\\n            (Constants.PRICE_DIGIT - _unitPrice) *\\n            (Constants.PCT_DIGIT - _circuitBreakerLimitRange);\\n        cbThresholdUnitPrice = num.div(den);\\n\\n        if (cbThresholdUnitPrice > _unitPrice + Constants.MAXIMUM_CIRCUIT_BREAKER_THRESHOLD) {\\n            cbThresholdUnitPrice = _unitPrice + Constants.MAXIMUM_CIRCUIT_BREAKER_THRESHOLD;\\n        } else if (\\n            cbThresholdUnitPrice < _unitPrice + Constants.MINIMUM_CIRCUIT_BREAKER_THRESHOLD\\n        ) {\\n            cbThresholdUnitPrice = _unitPrice + Constants.MINIMUM_CIRCUIT_BREAKER_THRESHOLD <=\\n                Constants.PRICE_DIGIT\\n                ? _unitPrice + Constants.MINIMUM_CIRCUIT_BREAKER_THRESHOLD\\n                : Constants.PRICE_DIGIT;\\n        }\\n    }\\n\\n    /**\\n     * @notice Increases and returns id of last order in order book.\\n     * @return The new order id\\n     */\\n    function _nextOrderId() internal returns (uint48) {\\n        Storage.slot().lastOrderId++;\\n        return Storage.slot().lastOrderId;\\n    }\\n\\n    function _removeOrderIdFromOrders(uint48[] storage orders, uint256 orderId) internal {\\n        uint256 lastOrderIndex = orders.length - 1;\\n        for (uint256 i = 0; i <= lastOrderIndex; i++) {\\n            if (orders[i] == orderId) {\\n                if (i != lastOrderIndex) {\\n                    uint48 lastOrderId = orders[lastOrderIndex];\\n                    orders[i] = lastOrderId;\\n                }\\n\\n                orders.pop();\\n                break;\\n            }\\n        }\\n    }\\n\\n    function _getLendOrderAmounts(uint48 _orderId)\\n        internal\\n        view\\n        returns (uint256 presentValue, uint256 futureValue)\\n    {\\n        MarketOrder memory marketOrder = Storage.slot().orders[_orderId];\\n        OrderItem memory orderItem = Storage.slot().lendOrders[marketOrder.maturity].getOrderById(\\n            marketOrder.unitPrice,\\n            _orderId\\n        );\\n        uint256 unitPrice = marketOrder.unitPrice;\\n\\n        if (Storage.slot().isPreOrder[_orderId]) {\\n            ItayoseLog memory itayoseLog = Storage.slot().itayoseLogs[marketOrder.maturity];\\n\\n            unitPrice = itayoseLog.lastLendUnitPrice <= unitPrice\\n                ? itayoseLog.openingUnitPrice\\n                : unitPrice;\\n        }\\n\\n        presentValue = orderItem.amount;\\n        futureValue = (orderItem.amount * Constants.PRICE_DIGIT).div(unitPrice);\\n    }\\n\\n    function _getBorrowOrderAmounts(uint48 _orderId)\\n        internal\\n        view\\n        returns (uint256 presentValue, uint256 futureValue)\\n    {\\n        MarketOrder memory marketOrder = Storage.slot().orders[_orderId];\\n        OrderItem memory orderItem = Storage.slot().borrowOrders[marketOrder.maturity].getOrderById(\\n            marketOrder.unitPrice,\\n            _orderId\\n        );\\n        uint256 unitPrice = marketOrder.unitPrice;\\n\\n        if (Storage.slot().isPreOrder[_orderId]) {\\n            ItayoseLog memory itayoseLog = Storage.slot().itayoseLogs[marketOrder.maturity];\\n\\n            unitPrice = itayoseLog.lastBorrowUnitPrice >= unitPrice\\n                ? itayoseLog.openingUnitPrice\\n                : unitPrice;\\n        }\\n\\n        presentValue = orderItem.amount;\\n        futureValue = (orderItem.amount * Constants.PRICE_DIGIT).div(unitPrice);\\n    }\\n}\\n\",\"keccak256\":\"0x6621aa59763b3dd6b3a6978710ca4c99033ea273a6e96f5ceb6055d87f0e9f57\",\"license\":\"MIT\"},\"contracts/protocol/libraries/math/RoundingUint256.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nlibrary RoundingUint256 {\\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\\n        require(b > 0);\\n\\n        if ((a * 10) / b - (a / b) * 10 < 5) {\\n            return a / b;\\n        } else {\\n            return (a / b) + 1;\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xbc360f39a82f1a9a7454726e3db802407d305b5e525aa8c3236fe49ca6ca534d\",\"license\":\"MIT\"},\"contracts/protocol/storages/LendingMarketStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nimport {ProtocolTypes} from \\\"../types/ProtocolTypes.sol\\\";\\nimport {OrderStatisticsTreeLib} from \\\"../libraries/OrderStatisticsTreeLib.sol\\\";\\n\\nstruct MarketOrder {\\n    ProtocolTypes.Side side;\\n    uint256 unitPrice; // in basis points\\n    uint256 maturity;\\n    uint256 timestamp;\\n}\\n\\nstruct ItayoseLog {\\n    uint256 openingUnitPrice;\\n    uint256 lastLendUnitPrice;\\n    uint256 lastBorrowUnitPrice;\\n}\\n\\nlibrary LendingMarketStorage {\\n    using OrderStatisticsTreeLib for OrderStatisticsTreeLib.Tree;\\n\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.lendingMarket\\\");\\n\\n    struct Storage {\\n        bytes32 ccy;\\n        uint48 lastOrderId;\\n        uint256 openingDate;\\n        uint256 maturity;\\n        // Mapping from maturity to boolean if the market is ready or not\\n        mapping(uint256 => bool) isReady;\\n        // Mapping from user to active lend order ids\\n        mapping(address => uint48[]) activeLendOrderIds;\\n        // Mapping from user to active borrow order ids\\n        mapping(address => uint48[]) activeBorrowOrderIds;\\n        // Mapping from user to current maturity\\n        mapping(address => uint256) userCurrentMaturities;\\n        // Mapping from orderId to order\\n        mapping(uint256 => MarketOrder) orders;\\n        // Mapping from orderId to boolean for pre-order or not\\n        mapping(uint256 => bool) isPreOrder;\\n        // Mapping from maturity to lending orders\\n        mapping(uint256 => OrderStatisticsTreeLib.Tree) lendOrders;\\n        // Mapping from maturity to borrowing orders\\n        mapping(uint256 => OrderStatisticsTreeLib.Tree) borrowOrders;\\n        // Mapping from order side to threshold unit price of circuit breaker per block\\n        mapping(uint256 => mapping(ProtocolTypes.Side => uint256)) circuitBreakerThresholdUnitPrices;\\n        // Mapping from maturity to Itayose log\\n        mapping(uint256 => ItayoseLog) itayoseLogs;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xd4a4b33669770a524107a69a98ecc0e528f021a76388282b778e867eb7c97a5a\",\"license\":\"MIT\"},\"contracts/protocol/types/ProtocolTypes.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\n/**\\n * @dev ProtocolTypes is a base-level contract that holds common Secured Finance protocol types\\n * @author Secured Finance\\n */\\nlibrary ProtocolTypes {\\n    enum Side {\\n        LEND,\\n        BORROW\\n    }\\n}\\n\",\"keccak256\":\"0x7b05f97661e6dfe1142eec9be3dcf86d1eec55ed4fb1dea4a5859f75a0c84c13\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x6156496200003b600b82828239805160001a60731461002e57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe730000000000000000000000000000000000000000301460806040526004361061012b5760003560e01c8063a117eff5116100b7578063e2afb0411161007b578063e2afb0411461037d578063e3d904d814610385578063e7df768c14610398578063fa6127aa146103ab578063fe199197146103be57600080fd5b8063a117eff514610295578063b69d2f5414610300578063bcc012ad14610344578063ceff498f14610357578063d866d3551461036a57600080fd5b80636814ed84116100fe5780636814ed84146101d45780636a2c4274146101f75780636c5db8431461021f5780637ce219aa1461024e5780638152b1731461027457600080fd5b806330318f1c146101305780634bf62d161461016c5780635f8972111461018e578063614152b9146101be575b600080fd5b81801561013c57600080fd5b5061015061014b366004615197565b6103de565b60405165ffffffffffff90911681526020015b60405180910390f35b61017f61017a3660046151d9565b6105e3565b6040516101639392919061522d565b81801561019a57600080fd5b506101ae6101a9366004615270565b610897565b60405161016394939291906152c3565b6101c66109f4565b604051908152602001610163565b6101e76101e2366004615270565b610a3e565b6040519015158152602001610163565b6101ff610a6c565b604080519485526020850193909352918301526060820152608001610163565b81801561022b57600080fd5b5061023f61023a366004615308565b610c77565b60405161016393929190615373565b61026161025c366004615392565b610e15565b60405161016397969594939291906153ad565b610287610282366004615270565b610fc9565b6040516101639291906153f6565b8180156102a157600080fd5b506102b56102b0366004615424565b611325565b6040805198895260208901979097529587019490945265ffffffffffff90921660608601526001600160a01b0316608085015260a084015260c083015260e082015261010001610163565b81801561030c57600080fd5b5061032061031b36600461545d565b61142e565b60408051941515855260208501939093529183015215156060820152608001610163565b610287610352366004615270565b6116cf565b6101e7610365366004615270565b6119de565b61017f6103783660046151d9565b611a0c565b6101c6611c46565b6101ff610393366004615270565b611c58565b6101ff6103a6366004615270565b611e58565b6101c66103b9366004615490565b611ffb565b8180156103ca57600080fd5b506101ae6103d9366004615270565b612096565b60006103e86121db565b905060405180608001604052808660018111156104075761040761533b565b815260200183815260200161041a61223a565b6003015481526020014281525061042f61223a565b65ffffffffffff831660009081526008919091016020526040902081518154829060ff1916600183818111156104675761046761533b565b0217905550602082015160018201556040820151600282015560609091015160039091015560008560018111156104a0576104a061533b565b1415610545576104e5828286866104b561223a565b600a0160006104c261223a565b60030154815260200190815260200160002061225e90949392919063ffffffff16565b6104ed61223a565b6001600160a01b0385166000908152600591820160209081526040822080546001810182559083529120828204018054929091066006026101000a65ffffffffffff81810219909316928416029190911790556105db565b60018560018111156105595761055961533b565b14156105db5761057b8282868661056e61223a565b600b0160006104c261223a565b61058361223a565b6001600160a01b03851660009081526006918201602090815260408220805460018101825590835291206005808304909101805465ffffffffffff808716939094069094026101000a91820292909102199092161790555b949350505050565b60608060608367ffffffffffffffff811115610601576106016154ba565b60405190808252806020026020018201604052801561062a578160200160208202803683370190505b5092508367ffffffffffffffff811115610646576106466154ba565b60405190808252806020026020018201604052801561066f578160200160208202803683370190505b5091508367ffffffffffffffff81111561068b5761068b6154ba565b6040519080825280602002602001820160405280156106b4578160200160208202803683370190505b50905060006106e86106c461223a565b600a0160006106d161223a565b600301548152602001908152602001600020612309565b905080846000815181106106fe576106fe6154d0565b6020026020010181815250506107438161071661223a565b600a01600061072361223a565b60030154815260200190815260200160002061235090919063ffffffff16565b83600081518110610756576107566154d0565b60200260200101818152505061079b8161076e61223a565b600a01600061077b61223a565b60030154815260200190815260200160002061236990919063ffffffff16565b826000815181106107ae576107ae6154d0565b602090810291909101015260015b845181101561088e57816107cf5761088e565b610808826107db61223a565b600a0160006107e861223a565b60030154815260200190815260200160002061238290919063ffffffff16565b91508185828151811061081d5761081d6154d0565b6020026020010181815250506108358261071661223a565b848281518110610847576108476154d0565b60200260200101818152505061085f8261076e61223a565b838281518110610871576108716154d0565b602090810291909101015280610886816154fc565b9150506107bc565b50509193909250565b606060008060008060006108aa87610fc9565b91509150816108b761223a565b6005016000896001600160a01b03166001600160a01b0316815260200190815260200160002090805190602001906108f092919061506e565b50815181519095508067ffffffffffffffff811115610911576109116154ba565b60405190808252806020026020018201604052801561093a578160200160208202803683370190505b50965060005b818110156109e95760008061096d858481518110610960576109606154d0565b602002602001015161247c565b909250905061097c8288615517565b96506109888189615517565b975084838151811061099c5761099c6154d0565b60200260200101518a84815181106109b6576109b66154d0565b602002602001019065ffffffffffff16908165ffffffffffff1681525050505080806109e1906154fc565b915050610940565b505050509193509193565b600080610a26610a0261223a565b600b016000610a0f61223a565b6003015481526020019081526020016000206125ca565b90508015610a345780610a38565b6127105b91505090565b6000610a4861223a565b6001600160a01b039092166000908152600692909201602052506040902054151590565b6000806000806000610a7c611c46565b90506000610a886109f4565b90506000610a988361071661223a565b90506000610ab583610aa861223a565b600b01600061072361223a565b90506000610ac161223a565b600b016000610ace61223a565b60030154815260200190815260200160002090506000610aec61223a565b600a016000610af961223a565b600301548152602001908152602001600020905085851115610b4257610b2a6002610b248789615517565b9061260c565b995060009850889750879650610c7195505050505050565b858511158015610b525750600085115b8015610b5e5750600086115b15610c6a5785985084975082841115610bb7578599508287610b809190615517565b9650610b8c838561552f565b9350610b988286612676565b60008181526001840160205260409020600501549095505b9250610b42565b82841015610c04578499508387610bce9190615517565b9650610bda848461552f565b9250610be68187612382565b60008181526001830160205260409020600501549096509350610b42565b610c136002610b248789615517565b9950610c1f8488615517565b9650610c2b8187612382565b9550610c378286612676565b60008781526001830160205260409020600501549095506000868152600184016020526040902060050154909450610bb0565b5050505050505b90919293565b600080600080610c8561223a565b65ffffffffffff861660009081526008919091016020526040908190208151608081019092528054829060ff166001811115610cc357610cc361533b565b6001811115610cd457610cd461533b565b81526001820154602082015260028201546040820152600390910154606090910152905060008082516001811115610d0e57610d0e61533b565b1415610d8f57610d53826020015187610d2561223a565b600a016000610d3261223a565b6003015481526020019081526020016000206127709092919063ffffffff16565b9050610d8a610d6061223a565b6001600160a01b03891660009081526005919091016020526040902065ffffffffffff8816612790565b610dff565b600182516001811115610da457610da461533b565b1415610dff57610dc8826020015187610dbb61223a565b600b016000610d3261223a565b9050610dff610dd561223a565b6001600160a01b03891660009081526006919091016020526040902065ffffffffffff8816612790565b8151602090920151919450925090509250925092565b600080600080600080600080610e2961223a565b65ffffffffffff8a1660009081526008919091016020526040908190208151608081019092528054829060ff166001811115610e6757610e6761533b565b6001811115610e7857610e7861533b565b815260200160018201548152602001600282015481526020016003820154815250509050610ed46040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a081019190915290565b600082516001811115610ee957610ee961533b565b1415610f2457610f1d82602001518b610f0061223a565b6040808701516000908152600a92909201602052902091906128e6565b9050610f55565b610f5282602001518b610f3561223a565b6040808701516000908152600b92909201602052902091906128e6565b90505b60608101516001600160a01b031615610fbc57816000015198508160200151975081604001519650806060015195508060a00151945080608001519350610f9a61223a565b65ffffffffffff8b166000908152600991909101602052604090205460ff1692505b5050919395979092949650565b6060806000806000610fd961223a565b60030154610fe561223a565b6001600160a01b0388166000908152600791909101602052604090205414159050806110355761101361223a565b6001600160a01b03871660009081526005919091016020526040902054611038565b60005b67ffffffffffffffff811115611050576110506154ba565b604051908082528060200260200182016040528015611079578160200160208202803683370190505b50945061108461223a565b6001600160a01b0387166000908152600591909101602052604090205467ffffffffffffffff8111156110b9576110b96154ba565b6040519080825280602002602001820160405280156110e2578160200160208202803683370190505b50935060005b6110f061223a565b6001600160a01b0388166000908152600591909101602052604090205481101561131c57600061111e61223a565b6001600160a01b03891660009081526005919091016020526040902080548390811061114c5761114c6154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff169050600061118061223a565b65ffffffffffff831660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156111be576111be61533b565b60018111156111cf576111cf61533b565b81526020016001820154815260200160028201548152602001600382015481525050905061125581602001518361120461223a565b600a01600061121161223a565b60070160008f6001600160a01b03166001600160a01b0316815260200190815260200160002054815260200190815260200160002061299d9092919063ffffffff16565b6112b257611264600186615517565b94508187611272888661552f565b81518110611282576112826154d0565b602002602001019065ffffffffffff16908165ffffffffffff1681525050836112ad57600188510388525b611307565b836112ff576112c2600187615517565b955081886112d0878661552f565b815181106112e0576112e06154d0565b602002602001019065ffffffffffff16908165ffffffffffff16815250505b600187510387525b50508080611314906154fc565b9150506110e8565b50505050915091565b600080600080600080600080611339615123565b60018d600181111561134d5761134d61533b565b14156113a1576113908c8b8d61136161223a565b600a01600061136e61223a565b6003015481526020019081526020016000206129bb909392919063ffffffff16565b939c50919a50985092509050611405565b60008d60018111156113b5576113b561533b565b1415611405576113f88c8b8d6113c961223a565b600b0160006113d661223a565b600301548152602001908152602001600020612cf9909392919063ffffffff16565b939c50919a509850925090505b8051602082015160408301516060909301519a9f999e50979c509a509598509496959350505050565b600080600080612710851061148a5760405162461bcd60e51b815260206004820152601b60248201527f4342206c696d69742063616e206e6f7420626520736f2068696768000000000060448201526064015b60405180910390fd5b61149261223a565b600c01600043815260200190815260200160002060008860018111156114ba576114ba61533b565b60018111156114cb576114cb61533b565b815260208101919091526040016000908120549250808860018111156114f3576114f361533b565b14905060008082156115885761150a610a0261223a565b90508060001415915081801561151e575084155b156115835761152d888261303b565b94508461153861223a565b600c01600043815260200190815260200160002060008c60018111156115605761156061533b565b60018111156115715761157161533b565b81526020810191909152604001600020555b61160c565b6115936106c461223a565b9050806000141591508180156115a7575084155b1561160c576115b68882613107565b9450846115c161223a565b600c01600043815260200190815260200160002060008c60018111156115e9576115e961533b565b60018111156115fa576115fa61533b565b81526020810191909152604001600020555b88158015611618575081155b156116575760405162461bcd60e51b815260206004820152600f60248201526e13dc99195c881b9bdd08199bdd5b99608a1b6044820152606401611481565b8815806116865750818015611686575082801561167357508489115b8061168657508215801561168657508489105b15611697578495506001935061169f565b889550600093505b826116ad57858110156116c1565b8581156116ba57816116be565b6127105b11155b965050505093509350935093565b60608060008060006116df61223a565b600301546116eb61223a565b6001600160a01b03881660009081526007919091016020526040902054141590508061173b5761171961223a565b6001600160a01b0387166000908152600691909101602052604090205461173e565b60005b67ffffffffffffffff811115611756576117566154ba565b60405190808252806020026020018201604052801561177f578160200160208202803683370190505b50945061178a61223a565b6001600160a01b0387166000908152600691909101602052604090205467ffffffffffffffff8111156117bf576117bf6154ba565b6040519080825280602002602001820160405280156117e8578160200160208202803683370190505b50935060005b6117f661223a565b6001600160a01b0388166000908152600691909101602052604090205481101561131c57600061182461223a565b6001600160a01b038916600090815260069190910160205260409020805483908110611852576118526154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff169050600061188661223a565b65ffffffffffff831660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156118c4576118c461533b565b60018111156118d5576118d561533b565b81526020016001820154815260200160028201548152602001600382015481525050905061191781602001518361190a61223a565b600b01600061121161223a565b61197457611926600186615517565b94508187611934888661552f565b81518110611944576119446154d0565b602002602001019065ffffffffffff16908165ffffffffffff16815250508361196f57600188510388525b6119c9565b61197f600187615517565b9550836119c1578188611992878661552f565b815181106119a2576119a26154d0565b602002602001019065ffffffffffff16908165ffffffffffff16815250505b600187510387525b505080806119d6906154fc565b9150506117ee565b60006119e861223a565b6001600160a01b039092166000908152600592909201602052506040902054151590565b60608060608367ffffffffffffffff811115611a2a57611a2a6154ba565b604051908082528060200260200182016040528015611a53578160200160208202803683370190505b5092508367ffffffffffffffff811115611a6f57611a6f6154ba565b604051908082528060200260200182016040528015611a98578160200160208202803683370190505b5091508367ffffffffffffffff811115611ab457611ab46154ba565b604051908082528060200260200182016040528015611add578160200160208202803683370190505b5090506000611aed610a0261223a565b90508084600081518110611b0357611b036154d0565b602002602001018181525050611b1b81610aa861223a565b83600081518110611b2e57611b2e6154d0565b602002602001018181525050611b5381611b4661223a565b600b01600061077b61223a565b82600081518110611b6657611b666154d0565b602090810291909101015260015b845181101561088e5781611b875761088e565b611bc082611b9361223a565b600b016000611ba061223a565b60030154815260200190815260200160002061267690919063ffffffff16565b915081858281518110611bd557611bd56154d0565b602002602001018181525050611bed82610aa861223a565b848281518110611bff57611bff6154d0565b602002602001018181525050611c1782611b4661223a565b838281518110611c2957611c296154d0565b602090810291909101015280611c3e816154fc565b915050611b74565b6000611c536106c461223a565b905090565b600080600080600080611c6a876116cf565b91509150611c7661223a565b6001600160a01b0388166000908152600791909101602052604081205493505b8251811015611dc5576000611ca961223a565b6008016000858481518110611cc057611cc06154d0565b602002602001015165ffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900460ff166001811115611d0d57611d0d61533b565b6001811115611d1e57611d1e61533b565b8152602001600182015481526020016002820154815260200160038201548152505090506000611d9c8260200151868581518110611d5e57611d5e6154d0565b6020026020010151611d6e61223a565b600b016000611d7b61223a565b6003015481526020019081526020016000206128e69092919063ffffffff16565b90508060a0015189611dae9190615517565b985050508080611dbd906154fc565b915050611c96565b50611dce61223a565b6001600160a01b0388166000908152600791909101602052604081205493505b8151811015611e4e57600080611e1c848481518110611e0f57611e0f6154d0565b60200260200101516131b4565b9092509050611e2b8289615517565b9750611e378188615517565b965050508080611e46906154fc565b915050611dee565b5050509193509193565b600080600080600080611e6a87610fc9565b91509150611e7661223a565b6001600160a01b0388166000908152600791909101602052604081205493505b8251811015611fa4576000611ea961223a565b6008016000858481518110611ec057611ec06154d0565b602002602001015165ffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900460ff166001811115611f0d57611f0d61533b565b6001811115611f1e57611f1e61533b565b8152602001600182015481526020016002820154815260200160038201548152505090506000611f7b8260200151868581518110611f5e57611f5e6154d0565b6020026020010151611f6e61223a565b600a016000611d7b61223a565b90508060a0015189611f8d9190615517565b985050508080611f9c906154fc565b915050611e96565b5060005b8151811015611e4e57600080611fc9848481518110610960576109606154d0565b9092509050611fd88289615517565b9750611fe48188615517565b965050508080611ff3906154fc565b915050611fa8565b600060018360018111156120115761201161533b565b1415612057576120508261202361223a565b600a01600061203061223a565b6003015481526020019081526020016000206132da90919063ffffffff16565b9050612090565b6120508261206361223a565b600b01600061207061223a565b60030154815260200190815260200160002061338e90919063ffffffff16565b92915050565b606060008060008060006120a9876116cf565b91509150816120b661223a565b6006016000896001600160a01b03166001600160a01b0316815260200190815260200160002090805190602001906120ef92919061506e565b50815181519095508067ffffffffffffffff811115612110576121106154ba565b604051908082528060200260200182016040528015612139578160200160208202803683370190505b50965060005b818110156109e95760008061215f858481518110611e0f57611e0f6154d0565b909250905061216e8288615517565b965061217a8189615517565b975084838151811061218e5761218e6154d0565b60200260200101518a84815181106121a8576121a86154d0565b602002602001019065ffffffffffff16908165ffffffffffff1681525050505080806121d3906154fc565b91505061213f565b60006121e561223a565b600101805465ffffffffffff169060006121fe83615546565b91906101000a81548165ffffffffffff021916908365ffffffffffff1602179055505061222961223a565b6001015465ffffffffffff16919050565b7ffc2836757f9146445fc75bc3c897a210ec004e4ee60fc8627ef5cbf2842b3d0a90565b600081116122a45760405162461bcd60e51b8152602060048201526013602482015272125b9cdd59999a58da595b9d08185b5bdd5b9d606a1b6044820152606401611481565b6127108411156122eb5760405162461bcd60e51b8152602060048201526012602482015271496e73756666696369656e742076616c756560701b6044820152606401611481565b6122f58585613442565b612302858585858561360b565b5050505050565b80548061231857506000919050565b5b60008181526001830160205260409020600201541561234b576000908152600182016020526040902060020154612319565b919050565b6000908152600191909101602052604090206005015490565b6000908152600191909101602052604090206004015490565b6000816123f25760405162461bcd60e51b815260206004820152603860248201527f4f7264657253746174697374696373547265652834303229202d205374617274604482015277696e672076616c75652063616e6e6f74206265207a65726f60401b6064820152608401611481565b60008281526001808501602052604090912001541561242a57600082815260018085016020526040909120015461205090849061368b565b5060008181526001830160205260409020545b801580159061245e5750600081815260018085016020526040909120015482145b1561209057600081815260018401602052604090205490915061243d565b600080600061248961223a565b65ffffffffffff851660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156124c7576124c761533b565b60018111156124d8576124d861533b565b815260200160018201548152602001600282015481526020016003820154815250509050600061250f826020015186610f0061223a565b602083015190915061251f61223a565b65ffffffffffff87166000908152600991909101602052604090205460ff16156125a957600061254d61223a565b600d016000856040015181526020019081526020016000206040518060600160405290816000820154815260200160018201548152602001600282015481525050905081816020015111156125a257816125a5565b80515b9150505b60a082015194506125c081610b246127108861556c565b9350505050915091565b8054806125d957506000919050565b5b60008181526001808401602052604090912001541561234b5760009081526001808301602052604090912001546125da565b600080821161261a57600080fd5b6005612626838561558b565b61263190600a61556c565b8361263d86600a61556c565b612647919061558b565b612651919061552f565b101561266157612050828461558b565b61266b828461558b565b612050906001615517565b6000816126e65760405162461bcd60e51b815260206004820152603860248201527f4f7264657253746174697374696373547265652834303129202d205374617274604482015277696e672076616c75652063616e6e6f74206265207a65726f60401b6064820152608401611481565b60008281526001840160205260409020600201541561271e5760008281526001840160205260409020600201546120509084906136c8565b5060008181526001830160205260409020545b80158015906127525750600081815260018401602052604090206002015482145b15612090576000818152600184016020526040902054909150612731565b600061277d848484613700565b9050612789848461396c565b9392505050565b81546000906127a19060019061552f565b905060005b8181116128e057828482815481106127c0576127c06154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff1665ffffffffffff1614156128ce57818114612887576000848381548110612811576128116154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff1690508085838154811061284e5761284e6154d0565b90600052602060002090600591828204019190066006026101000a81548165ffffffffffff021916908365ffffffffffff160217905550505b83805480612897576128976155ad565b60019003818190600052602060002090600591828204019190066006026101000a81549065ffffffffffff021916905590556128e0565b806128d8816154fc565b9150506127a6565b50505050565b6040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a081019190915250600091825260019283016020908152604080842065ffffffffffff9384168552600601825292839020835160c08101855281548085168252600160301b8104851693820193909352600160601b90920490921692810192909252918201546001600160a01b031660608201526002820154608082015260039091015460a082015290565b60006129aa848484613c29565b80156105db57506105db8484613d72565b6000806000806129c9615123565b60006129d48a612309565b905060008089831015806129e6575089155b612a2d5760405162461bcd60e51b8152602060048201526018602482015277496e73756666696369656e74206c696d69742076616c756560401b6044820152606401611481565b6000805b8c831080612a3d57508c155b8015612a5057508a881080612a5057508a155b8015612a5b57508415155b8015612a6f57508b85101580612a6f57508b155b15612b2857600085815260018f0160205260409020600501549350612a948484615517565b9250849950612aa38585613e2b565b612aad9089615517565b9750612ab9848a615517565b98508c83118015612ac957508c15155b15612aeb57612ad88d8461552f565b9150612ae48583613e2b565b9050612b17565b8a88118015612af957508a15155b15612b1757612b088b8961552f565b9050612b148582613e3d565b91505b612b218e86612382565b9450612a31565b8115612b3b57612b38828a61552f565b98505b8015612b4e57612b4b818961552f565b97505b8215612c41578115612b7857899450612b718e86612b6c858861552f565b613e4f565b9550612b9d565b8015612b9d57899450612b9a8e86612b908885613e3d565b612b6c908861552f565b95505b600085815260018f01602052604081206002810191909155548515612c3f575b8015612c3f5785811015612c2957808f60010160008881526020019081526020016000206000015414612c2557808f600101600088815260200190815260200160002060000181905550858f6001016000838152602001908152602001600020600201819055505b8095505b600090815260018f016020526040902054612bbd565b505b828d1115612c5657612c53838e61552f565b96505b6000612c618f6125ca565b90508a81148015612c8a57508e6001016000828152602001908152602001600020600501546000145b15612c985760008f55612cdf565b8e548b1080612cb257508e548b148015612cb25750838a10155b15612cdf57858f6000018190555060008f6001016000888152602001908152602001600020600001819055505b612ce88f614185565b505050505050945094509450945094565b600080600080612d07615123565b6000612d128a6125ca565b90506000808983111580612d24575089155b612d6b5760405162461bcd60e51b8152602060048201526018602482015277496e73756666696369656e74206c696d69742076616c756560401b6044820152606401611481565b6000805b8c831080612d7b57508c155b8015612d8e57508a881080612d8e57508a155b8015612d9957508415155b8015612dad57508b85111580612dad57508b155b15612e6657600085815260018f0160205260409020600501549350612dd28484615517565b9250849950612de18585613e2b565b612deb9089615517565b9750612df7848a615517565b98508c83118015612e0757508c15155b15612e2957612e168d8461552f565b9150612e228583613e2b565b9050612e55565b8a88118015612e3757508a15155b15612e5557612e468b8961552f565b9050612e528582613e3d565b91505b612e5f8e86612676565b9450612d6f565b8115612e7957612e76828a61552f565b98505b8015612e8c57612e89818961552f565b97505b8215612f94578115612eb157899450612eaa8e86612b6c858861552f565b9550612ecc565b8015612ecc57899450612ec98e86612b908885613e3d565b95505b60008e60010160008781526020019081526020016000206001018190555060008e600101600087815260200190815260200160002060000154905060008614612f92575b8015612f925785811115612f7c57808f60010160008881526020019081526020016000206000015414612f7857808f600101600088815260200190815260200160002060000181905550858f6001016000838152602001908152602001600020600101819055505b8095505b600090815260018f016020526040902054612f10565b505b828d1115612fa957612fa6838e61552f565b96505b6000612fb48f612309565b90508a81148015612fdd57508e6001016000828152602001908152602001600020600501546000145b15612feb5760008f55613032565b8e548b118061300557508e548b1480156130055750838a10155b1561303257858f6000018190555060008f6001016000888152602001908152602001600020600001819055505b612ce88f614254565b60008061271061304b818561556c565b613055919061556c565b905060006130658561271061552f565b6130718561271061552f565b61307b919061556c565b6130876127108661556c565b6130919190615517565b905061309d828261260c565b92506130aa60c885615517565b8311156130c3576130bc60c885615517565b92506130ff565b6130ce600a85615517565b8310156130ff576127106130e3600a86615517565b11156130f1576127106130fc565b6130fc600a85615517565b92505b505092915050565b600080612710613117818561556c565b613121919061556c565b9050600061313185612710615517565b61313d8561271061552f565b613147919061556c565b6131536127108661556c565b61315d9190615517565b9050613169828261260c565b925061317660c884615517565b841115613188576130bc60c88561552f565b613193600a84615517565b8410156130ff57600a84116131a95760016130fc565b6130fc600a8561552f565b60008060006131c161223a565b65ffffffffffff851660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156131ff576131ff61533b565b60018111156132105761321061533b565b8152602001600182015481526020016002820154815260200160038201548152505090506000613247826020015186610f3561223a565b602083015190915061325761223a565b65ffffffffffff87166000908152600991909101602052604090205460ff16156125a957600061328561223a565b600d016000856040015181526020019081526020016000206040518060600160405290816000820154815260200160018201548152602001600282015481525050905081816040015110156125a257816125a5565b6000806132e684612309565b905060008092505b83811080156132fc57508115155b156130ff576000828152600186016020526040812060050154906133208483613e2b565b905061332c8184615517565b92508583111561336e576000613342878561552f565b61334c908361552f565b905061335c82610b24838661556c565b6133669087615517565b95505061337b565b6133788286615517565b94505b6133858785612382565b935050506132ee565b60008061339a846125ca565b905060008092505b83811080156133b057508115155b156130ff576000828152600186016020526040812060050154906133d48483613e2b565b90506133e08184615517565b9250858311156134225760006133f6878561552f565b613400908361552f565b905061341082610b24838661556c565b61341a9087615517565b95505061342f565b61342c8286615517565b94505b6134398785612676565b935050506133a2565b806134b55760405162461bcd60e51b815260206004820152603960248201527f4f7264657253746174697374696373547265652834303529202d2056616c756560448201527f20746f20696e736572742063616e6e6f74206265207a65726f000000000000006064820152608401611481565b81546000905b801561351957809150808310156134e55760009081526001808501602052604090912001546134bb565b808311156135065760009081526001840160205260409020600201546134bb565b808314156135145750505050565b6134bb565b6000838152600185016020526040902084541580613568575060008381526001808701602052604090912001548414801590613568575060008381526001860160205260409020600201548414155b15613596576000600482018190556005820181905561358a90869086906142e3565b6135968585600061431b565b82815560006001808301829055600283019190915560038201805460ff19169091179055826135c757838555613601565b828410156135ea5760008381526001808701602052604090912001849055613601565b600083815260018601602052604090206002018490555b612302858561435b565b600084815260018601602052604090206003810154610100900465ffffffffffff166136435761363e86868686866145c6565b613683565b60006136528787878787614636565b905061367687878460030160079054906101000a900465ffffffffffff16846147d5565b61368187878361431b565b505b505050505050565b60005b6000828152600184016020526040902060020154156136c2576000918252600183016020526040909120600201549061368e565b50919050565b60005b6000828152600180850160205260409091200154156136c25760009182526001808401602052604090922090910154906136cb565b600061370d84848461299d565b6137295760405162461bcd60e51b8152600401611481906155c3565b50600082815260018085016020908152604080842065ffffffffffff80871680875260068301855295839020835160c08101855281548084168252600160301b8104841696820196909652600160601b909504821693850193909352938201546001600160a01b031660608401526002820154608084015260039182015460a0840181905291810154919490936101009092049091161480156137e15750600382015465ffffffffffff858116600160381b90920416145b15613803576137f2868660006142e3565b6137fe8686600061431b565b6138d5565b600382015465ffffffffffff8581166101009092041614156138615761382e868683602001516142e3565b60208082015165ffffffffffff1660009081526006840190915260409020805465ffffffffffff60601b191690556138d5565b600382015465ffffffffffff858116600160381b9092041614156138c15761388e8686836040015161431b565b60408082015165ffffffffffff166000908152600684016020522080546bffffffffffff000000000000191690556138d5565b6138d58686836040015184602001516147d5565b805165ffffffffffff1660009081526006830160205260408120805471ffffffffffffffffffffffffffffffffffff19168155600180820180546001600160a01b03191690556002820183905560039091018290556004840180549192909161393f90849061552f565b909155505060a081015160058301805460009061395d90849061552f565b90915550929695505050505050565b806139df5760405162461bcd60e51b815260206004820152603960248201527f4f7264657253746174697374696373547265652834303729202d2056616c756560448201527f20746f2064656c6574652063616e6e6f74206265207a65726f000000000000006064820152608401611481565b60008181526001830160205260408120600481015490919081906123025760008481526001808701602052604090912001541580613a2e57506000848152600186016020526040902060020154155b15613a3a575082613a82565b5060008381526001850160205260409020600201545b600081815260018087016020526040909120015415613a82576000908152600180860160205260409091200154613a50565b600081815260018087016020526040909120015415613ab65760008181526001808701602052604090912001549150613acd565b600081815260018601602052604090206002015491505b60008181526001860160205260408082205484835291208190558015613b3e576000818152600180880160205260409091200154821415613b235760008181526001808801602052604090912001839055613b42565b60008181526001870160205260409020600201839055613b42565b8286555b600082815260018701602052604090206003015460ff1615858314613bcc57613b6c87848861484a565b60008681526001888101602052604080832080830154878552828520938401819055845281842087905560028082015490840181905584529083208690556003908101549286905201805460ff191660ff90921615159190911790559194915b8015613bdc57613bdc87856148c1565b50506000818152600180870160205260408220828155908101829055600281018290556003810180546cffffffffffffffffffffffffff1916905560048101829055600501555050505050565b600082815260018085016020908152604080842065ffffffffffff808716808752600683018552838720845160c0810186528154808516808352600160301b8204861698830198909852600160601b900490931694830194909452948301546001600160a01b031660608201526002830154608082015260039092015460a08301528593909214613cc05760009350505050612789565b5b604081015165ffffffffffff1615613d535760409081015165ffffffffffff808216600090815260068501602090815290849020845160c08101865281548085168252600160301b8104851693820193909352600160601b9092049092169381019390935260018101546001600160a01b03166060840152600281015460808401526003015460a08301529250613cc1565b5060030154610100900465ffffffffffff908116911614949350505050565b600081613d8157506000612090565b8254821415613d9257506001612090565b815b600081815260018501602052604090205415613e215760008181526001808601602052604080832054808452922001548214801590613de6575060008181526001860160205260409020600201548214155b15613df657600092505050612090565b8454811415613e0a57600192505050612090565b506000908152600184016020526040902054613d94565b5060009392505050565b600061278983610b246127108561556c565b6000612789612710610b24858561556c565b613e57615123565b600083815260018501602052604090206005810154831115613ee15760405162461bcd60e51b815260206004820152603960248201527f4f7264657253746174697374696373547265652834313029202d20416d6f756e60448201527f7420746f2066696c6c20697320696e73756666696369656e74000000000000006064820152608401611481565b60038082015465ffffffffffff61010090910481166000818152600685016020908152604091829020825160c08101845281548087168252600160301b8104871693820193909352600160601b9092049094169181019190915260018301546001600160a01b0316606082015260028301546080820152919092015460a082015284915b65ffffffffffff811615801590613f7b57508215155b156140dd5765ffffffffffff8082166000908152600686016020908152604091829020825160c08101845281548086168252600160301b8104861693820193909352600160601b9092049093169181019190915260018201546001600160a01b031660608201526002820154608082015260039091015460a08201819052909250831061401f5760a0820151614011908461552f565b925081602001519050613f65565b6040518060800160405280836000015165ffffffffffff16815260200183606001516001600160a01b0316815260200184815260200161405f8986613e2b565b905260409283015165ffffffffffff908116600090815260068701602090815290859020855160c08101875281548085168252600160301b8104851693820193909352600160601b9092049092169481019490945260018101546001600160a01b03166060850152600281015460808501526003015460a084015294505b815165ffffffffffff16156140fd576140fb88888460000151614cdb565b505b60408501511561417a57604080860151600089815260018b016020908152838220895165ffffffffffff168352600601905291822060030180549192909161414690849061552f565b9091555050604080860151600089815260018b0160205291822060050180549192909161417490849061552f565b90915550505b505050509392505050565b805460009081526001820160205260409020600201541580156141bc57508054600090815260018083016020526040909120015415155b15614215578054600090815260018083016020526040808320909101548252902060020154156142075780546000908152600180830160205260409091200154614207908290614ec1565b614215818260000154614f99565b8054600090815260018201602052604090206003015460ff161561425157805460009081526001820160205260409020600301805460ff191690555b50565b8054600090815260018083016020526040909120015415801561428b57508054600090815260018201602052604090206002015415155b156142155780546000908152600180830160205260408083206002015483529091200154156142d557805460009081526001820160205260409020600201546142d5908290614f99565b614215818260000154614ec1565b6000918252600190920160205260409020600301805465ffffffffffff9092166101000266ffffffffffff0019909216919091179055565b6000918252600190920160205260409020600301805465ffffffffffff909216600160381b026cffffffffffff0000000000000019909216919091179055565b60005b825482148015906143885750600082815260018401602052604080822054825290206003015460ff165b156145a45760008281526001808501602052604080832054808452818420548452922001548114156144ab5760008181526001850160205260408082205482528082206002015480835291206003015490925060ff1615614431576000818152600180860160205260408083206003808201805460ff1990811690915587865283862082018054821690558254865292852001805490921690921790559082905254925061459e565b6000818152600185016020526040902060020154831415614459578092506144598484614ec1565b50600082815260018085016020526040808320548084528184206003808201805460ff199081169091558254875293862001805490931690931790915591829052546144a6908590614f99565b61459e565b6000818152600180860160205260408083205483528083209091015480835291206003015490925060ff1615614529576000818152600180860160205260408083206003808201805460ff1990811690915587865283862082018054821690558254865292852001805490921690921790559082905254925061459e565b6000818152600180860160205260409091200154831415614551578092506145518484614f99565b50600082815260018085016020526040808320548084528184206003808201805460ff1990811690915582548752938620018054909316909317909155918290525461459e908590614ec1565b5061435e565b505080546000908152600190910160205260409020600301805460ff19169055565b60008481526001860160205260408120906145e48787878787614636565b90506146088787838560030160019054906101000a900465ffffffffffff166147d5565b6146138787836142e3565b6003820154600160381b900465ffffffffffff166136815761368187878361431b565b6000848152600186016020908152604080832065ffffffffffff8716845260068101909252822060020154156146c95760405162461bcd60e51b815260206004820152603260248201527f4f7264657253746174697374696373547265652834303929202d204f726465726044820152711034b21030b63932b0b23c9032bc34b9ba1760711b6064820152608401611481565b60018160040160008282546146de9190615517565b92505081905550828160050160008282546146f99190615517565b90915550506040805160c08101825265ffffffffffff808816808352600060208085018281528587018381526001600160a01b03808d16606089019081524260808a0190815260a08a018e81529787526006909b019094529790932095518654915193518616600160601b0265ffffffffffff60601b19948716600160301b026bffffffffffffffffffffffff199093169682169690961791909117929092169390931784559151600184018054919095166001600160a01b031990911617909355925160028201559051600390910155905095945050505050565b60009283526001939093016020908152604080842065ffffffffffff938416808652600690910190925280842080546bffffffffffff0000000000001916600160301b9490961693840295909517909455908252919020805465ffffffffffff60601b1916600160601b909202919091179055565b600081815260018401602052604080822054848352912081905580614871578284556128e0565b60008181526001808601602052604090912001548214156148a757600081815260018086016020526040909120018390556128e0565b600090815260019390930160205250604090912060020155565b60005b825482148015906148e95750600082815260018401602052604090206003015460ff16155b15614cbc576000828152600180850160205260408083205480845292200154831415614ae55760008181526001850160205260408082206002015480835291206003015490925060ff161561498d576000828152600180860160205260408083206003908101805460ff199081169091558585529190932090920180549092161790556149768482614ec1565b600081815260018501602052604090206002015491505b60008281526001808601602052604080832090910154825290206003015460ff161580156149d85750600082815260018501602052604080822060020154825290206003015460ff16155b15614a0557600082815260018581016020526040909120600301805460ff19169091179055915081614cb6565b600082815260018501602052604080822060020154825290206003015460ff16614a82576000828152600180860160205260408083208083015484529083206003908101805460ff1990811690915593869052018054909216179055614a6b8483614f99565b600081815260018501602052604090206002015491505b600081815260018501602052604080822060039081018054868552838520808401805460ff909316151560ff199384161790558254821690925560029091015484529190922090910180549091169055614adc8482614ec1565b83549250614cb6565b6000818152600180860160205260408083209091015480835291206003015490925060ff1615614b64576000828152600180860160205260408083206003908101805460ff19908116909155858552919093209092018054909216179055614b4d8482614f99565b600081815260018086016020526040909120015491505b600082815260018501602052604080822060020154825290206003015460ff16158015614baf575060008281526001808601602052604080832090910154825290206003015460ff16155b15614bdc57600082815260018581016020526040909120600301805460ff19169091179055915081614cb6565b60008281526001808601602052604080832090910154825290206003015460ff16614c5b57600082815260018086016020526040808320600281015484529083206003908101805460ff1990811690915593869052018054909216179055614c448483614ec1565b600081815260018086016020526040909120015491505b60008181526001808601602052604080832060039081018054878652838620808401805460ff909316151560ff19938416179055825482169092559301548452922090910180549091169055614cb18482614f99565b835492505b506148c4565b506000908152600190910160205260409020600301805460ff19169055565b6000614ce884848461299d565b614d045760405162461bcd60e51b8152600401611481906155c3565b50600082815260018085016020908152604080842065ffffffffffff808716865260068201808552838720845160c08101865281548085168252600160301b8104851682890152600160601b9004841681870152818801546001600160a01b031660608201526002820154608082015260039182015460a08201819052828601546101009004909416808a529290965293909620909201549194909390915b8665ffffffffffff168314614e0757600092835260068501602052604090922054600160301b900465ffffffffffff169181614dde816154fc565b6000858152600688016020526040902060030154909350614e00915082615517565b9050614da3565b600385015465ffffffffffff888116600160381b909204161415614e4257614e31898960006142e3565b614e3d8989600061431b565b614e80565b614e51898986602001516142e3565b60208085015165ffffffffffff1660009081526006870190915260409020805465ffffffffffff60601b191690555b81856004016000828254614e94919061552f565b9250508190555080856005016000828254614eaf919061552f565b90915550959998505050505050505050565b600081815260018084016020526040808320600281018054915482865292852090930154938590529183905590918015614f0957600081815260018601602052604090208490555b6000838152600186016020526040902082905581614f2957828555614f76565b6000828152600180870160205260409091200154841415614f5f5760008281526001808701602052604090912001839055614f76565b600082815260018601602052604090206002018390555b505060008181526001938401602052604080822090940183905591825291902055565b60008181526001808401602052604080832091820180549254838552918420600201549385905283905590918015614fdf57600081815260018601602052604090208490555b6000838152600186016020526040902082905581614fff5782855561504c565b6000828152600186016020526040902060020154841415615035576000828152600186016020526040902060020183905561504c565b600082815260018087016020526040909120018390555b5050600081815260019093016020526040808420600201839055918352912055565b828054828255906000526020600020906004016005900481019282156151135791602002820160005b838211156150df57835183826101000a81548165ffffffffffff021916908365ffffffffffff1602179055509260200192600601602081600501049283019260010302615097565b80156151115782816101000a81549065ffffffffffff02191690556006016020816005010492830192600103026150df565b505b5061511f92915061515c565b5090565b6040518060800160405280600065ffffffffffff16815260200160006001600160a01b0316815260200160008152602001600081525090565b5b8082111561511f576000815560010161515d565b80356002811061234b57600080fd5b80356001600160a01b038116811461234b57600080fd5b600080600080608085870312156151ad57600080fd5b6151b685615171565b93506151c460208601615180565b93969395505050506040820135916060013590565b6000602082840312156151eb57600080fd5b5035919050565b600081518084526020808501945080840160005b8381101561522257815187529582019590820190600101615206565b509495945050505050565b60608152600061524060608301866151f2565b828103602084015261525281866151f2565b9050828103604084015261526681856151f2565b9695505050505050565b60006020828403121561528257600080fd5b61278982615180565b600081518084526020808501945080840160005b8381101561522257815165ffffffffffff168752958201959082019060010161529f565b6080815260006152d6608083018761528b565b6020830195909552506040810192909252606090910152919050565b803565ffffffffffff8116811461234b57600080fd5b6000806040838503121561531b57600080fd5b61532483615180565b9150615332602084016152f2565b90509250929050565b634e487b7160e01b600052602160045260246000fd5b6002811061536f57634e487b7160e01b600052602160045260246000fd5b9052565b606081016153818286615351565b602082019390935260400152919050565b6000602082840312156153a457600080fd5b612789826152f2565b60e081016153bb828a615351565b602082019790975260408101959095526001600160a01b03939093166060850152608084019190915260a0830152151560c090910152919050565b604081526000615409604083018561528b565b828103602084015261541b818561528b565b95945050505050565b6000806000806080858703121561543a57600080fd5b61544385615171565b966020860135965060408601359560600135945092505050565b60008060006060848603121561547257600080fd5b61547b84615171565b95602085013595506040909401359392505050565b600080604083850312156154a357600080fd5b6154ac83615171565b946020939093013593505050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000600019821415615510576155106154e6565b5060010190565b6000821982111561552a5761552a6154e6565b500190565b600082821015615541576155416154e6565b500390565b600065ffffffffffff80831681811415615562576155626154e6565b6001019392505050565b6000816000190483118215151615615586576155866154e6565b500290565b6000826155a857634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052603160045260246000fd5b60208082526030908201527f4f7264657253746174697374696373547265652834313029202d204f7264657260408201526f103237b2b9903737ba1032bc34b9ba1760811b60608201526080019056fea2646970667358221220b6436293655a49891b01414099aa6cac012517d846a92c7ec2b660d762d2cec764736f6c63430008090033",
  "deployedBytecode": "0x730000000000000000000000000000000000000000301460806040526004361061012b5760003560e01c8063a117eff5116100b7578063e2afb0411161007b578063e2afb0411461037d578063e3d904d814610385578063e7df768c14610398578063fa6127aa146103ab578063fe199197146103be57600080fd5b8063a117eff514610295578063b69d2f5414610300578063bcc012ad14610344578063ceff498f14610357578063d866d3551461036a57600080fd5b80636814ed84116100fe5780636814ed84146101d45780636a2c4274146101f75780636c5db8431461021f5780637ce219aa1461024e5780638152b1731461027457600080fd5b806330318f1c146101305780634bf62d161461016c5780635f8972111461018e578063614152b9146101be575b600080fd5b81801561013c57600080fd5b5061015061014b366004615197565b6103de565b60405165ffffffffffff90911681526020015b60405180910390f35b61017f61017a3660046151d9565b6105e3565b6040516101639392919061522d565b81801561019a57600080fd5b506101ae6101a9366004615270565b610897565b60405161016394939291906152c3565b6101c66109f4565b604051908152602001610163565b6101e76101e2366004615270565b610a3e565b6040519015158152602001610163565b6101ff610a6c565b604080519485526020850193909352918301526060820152608001610163565b81801561022b57600080fd5b5061023f61023a366004615308565b610c77565b60405161016393929190615373565b61026161025c366004615392565b610e15565b60405161016397969594939291906153ad565b610287610282366004615270565b610fc9565b6040516101639291906153f6565b8180156102a157600080fd5b506102b56102b0366004615424565b611325565b6040805198895260208901979097529587019490945265ffffffffffff90921660608601526001600160a01b0316608085015260a084015260c083015260e082015261010001610163565b81801561030c57600080fd5b5061032061031b36600461545d565b61142e565b60408051941515855260208501939093529183015215156060820152608001610163565b610287610352366004615270565b6116cf565b6101e7610365366004615270565b6119de565b61017f6103783660046151d9565b611a0c565b6101c6611c46565b6101ff610393366004615270565b611c58565b6101ff6103a6366004615270565b611e58565b6101c66103b9366004615490565b611ffb565b8180156103ca57600080fd5b506101ae6103d9366004615270565b612096565b60006103e86121db565b905060405180608001604052808660018111156104075761040761533b565b815260200183815260200161041a61223a565b6003015481526020014281525061042f61223a565b65ffffffffffff831660009081526008919091016020526040902081518154829060ff1916600183818111156104675761046761533b565b0217905550602082015160018201556040820151600282015560609091015160039091015560008560018111156104a0576104a061533b565b1415610545576104e5828286866104b561223a565b600a0160006104c261223a565b60030154815260200190815260200160002061225e90949392919063ffffffff16565b6104ed61223a565b6001600160a01b0385166000908152600591820160209081526040822080546001810182559083529120828204018054929091066006026101000a65ffffffffffff81810219909316928416029190911790556105db565b60018560018111156105595761055961533b565b14156105db5761057b8282868661056e61223a565b600b0160006104c261223a565b61058361223a565b6001600160a01b03851660009081526006918201602090815260408220805460018101825590835291206005808304909101805465ffffffffffff808716939094069094026101000a91820292909102199092161790555b949350505050565b60608060608367ffffffffffffffff811115610601576106016154ba565b60405190808252806020026020018201604052801561062a578160200160208202803683370190505b5092508367ffffffffffffffff811115610646576106466154ba565b60405190808252806020026020018201604052801561066f578160200160208202803683370190505b5091508367ffffffffffffffff81111561068b5761068b6154ba565b6040519080825280602002602001820160405280156106b4578160200160208202803683370190505b50905060006106e86106c461223a565b600a0160006106d161223a565b600301548152602001908152602001600020612309565b905080846000815181106106fe576106fe6154d0565b6020026020010181815250506107438161071661223a565b600a01600061072361223a565b60030154815260200190815260200160002061235090919063ffffffff16565b83600081518110610756576107566154d0565b60200260200101818152505061079b8161076e61223a565b600a01600061077b61223a565b60030154815260200190815260200160002061236990919063ffffffff16565b826000815181106107ae576107ae6154d0565b602090810291909101015260015b845181101561088e57816107cf5761088e565b610808826107db61223a565b600a0160006107e861223a565b60030154815260200190815260200160002061238290919063ffffffff16565b91508185828151811061081d5761081d6154d0565b6020026020010181815250506108358261071661223a565b848281518110610847576108476154d0565b60200260200101818152505061085f8261076e61223a565b838281518110610871576108716154d0565b602090810291909101015280610886816154fc565b9150506107bc565b50509193909250565b606060008060008060006108aa87610fc9565b91509150816108b761223a565b6005016000896001600160a01b03166001600160a01b0316815260200190815260200160002090805190602001906108f092919061506e565b50815181519095508067ffffffffffffffff811115610911576109116154ba565b60405190808252806020026020018201604052801561093a578160200160208202803683370190505b50965060005b818110156109e95760008061096d858481518110610960576109606154d0565b602002602001015161247c565b909250905061097c8288615517565b96506109888189615517565b975084838151811061099c5761099c6154d0565b60200260200101518a84815181106109b6576109b66154d0565b602002602001019065ffffffffffff16908165ffffffffffff1681525050505080806109e1906154fc565b915050610940565b505050509193509193565b600080610a26610a0261223a565b600b016000610a0f61223a565b6003015481526020019081526020016000206125ca565b90508015610a345780610a38565b6127105b91505090565b6000610a4861223a565b6001600160a01b039092166000908152600692909201602052506040902054151590565b6000806000806000610a7c611c46565b90506000610a886109f4565b90506000610a988361071661223a565b90506000610ab583610aa861223a565b600b01600061072361223a565b90506000610ac161223a565b600b016000610ace61223a565b60030154815260200190815260200160002090506000610aec61223a565b600a016000610af961223a565b600301548152602001908152602001600020905085851115610b4257610b2a6002610b248789615517565b9061260c565b995060009850889750879650610c7195505050505050565b858511158015610b525750600085115b8015610b5e5750600086115b15610c6a5785985084975082841115610bb7578599508287610b809190615517565b9650610b8c838561552f565b9350610b988286612676565b60008181526001840160205260409020600501549095505b9250610b42565b82841015610c04578499508387610bce9190615517565b9650610bda848461552f565b9250610be68187612382565b60008181526001830160205260409020600501549096509350610b42565b610c136002610b248789615517565b9950610c1f8488615517565b9650610c2b8187612382565b9550610c378286612676565b60008781526001830160205260409020600501549095506000868152600184016020526040902060050154909450610bb0565b5050505050505b90919293565b600080600080610c8561223a565b65ffffffffffff861660009081526008919091016020526040908190208151608081019092528054829060ff166001811115610cc357610cc361533b565b6001811115610cd457610cd461533b565b81526001820154602082015260028201546040820152600390910154606090910152905060008082516001811115610d0e57610d0e61533b565b1415610d8f57610d53826020015187610d2561223a565b600a016000610d3261223a565b6003015481526020019081526020016000206127709092919063ffffffff16565b9050610d8a610d6061223a565b6001600160a01b03891660009081526005919091016020526040902065ffffffffffff8816612790565b610dff565b600182516001811115610da457610da461533b565b1415610dff57610dc8826020015187610dbb61223a565b600b016000610d3261223a565b9050610dff610dd561223a565b6001600160a01b03891660009081526006919091016020526040902065ffffffffffff8816612790565b8151602090920151919450925090509250925092565b600080600080600080600080610e2961223a565b65ffffffffffff8a1660009081526008919091016020526040908190208151608081019092528054829060ff166001811115610e6757610e6761533b565b6001811115610e7857610e7861533b565b815260200160018201548152602001600282015481526020016003820154815250509050610ed46040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a081019190915290565b600082516001811115610ee957610ee961533b565b1415610f2457610f1d82602001518b610f0061223a565b6040808701516000908152600a92909201602052902091906128e6565b9050610f55565b610f5282602001518b610f3561223a565b6040808701516000908152600b92909201602052902091906128e6565b90505b60608101516001600160a01b031615610fbc57816000015198508160200151975081604001519650806060015195508060a00151945080608001519350610f9a61223a565b65ffffffffffff8b166000908152600991909101602052604090205460ff1692505b5050919395979092949650565b6060806000806000610fd961223a565b60030154610fe561223a565b6001600160a01b0388166000908152600791909101602052604090205414159050806110355761101361223a565b6001600160a01b03871660009081526005919091016020526040902054611038565b60005b67ffffffffffffffff811115611050576110506154ba565b604051908082528060200260200182016040528015611079578160200160208202803683370190505b50945061108461223a565b6001600160a01b0387166000908152600591909101602052604090205467ffffffffffffffff8111156110b9576110b96154ba565b6040519080825280602002602001820160405280156110e2578160200160208202803683370190505b50935060005b6110f061223a565b6001600160a01b0388166000908152600591909101602052604090205481101561131c57600061111e61223a565b6001600160a01b03891660009081526005919091016020526040902080548390811061114c5761114c6154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff169050600061118061223a565b65ffffffffffff831660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156111be576111be61533b565b60018111156111cf576111cf61533b565b81526020016001820154815260200160028201548152602001600382015481525050905061125581602001518361120461223a565b600a01600061121161223a565b60070160008f6001600160a01b03166001600160a01b0316815260200190815260200160002054815260200190815260200160002061299d9092919063ffffffff16565b6112b257611264600186615517565b94508187611272888661552f565b81518110611282576112826154d0565b602002602001019065ffffffffffff16908165ffffffffffff1681525050836112ad57600188510388525b611307565b836112ff576112c2600187615517565b955081886112d0878661552f565b815181106112e0576112e06154d0565b602002602001019065ffffffffffff16908165ffffffffffff16815250505b600187510387525b50508080611314906154fc565b9150506110e8565b50505050915091565b600080600080600080600080611339615123565b60018d600181111561134d5761134d61533b565b14156113a1576113908c8b8d61136161223a565b600a01600061136e61223a565b6003015481526020019081526020016000206129bb909392919063ffffffff16565b939c50919a50985092509050611405565b60008d60018111156113b5576113b561533b565b1415611405576113f88c8b8d6113c961223a565b600b0160006113d661223a565b600301548152602001908152602001600020612cf9909392919063ffffffff16565b939c50919a509850925090505b8051602082015160408301516060909301519a9f999e50979c509a509598509496959350505050565b600080600080612710851061148a5760405162461bcd60e51b815260206004820152601b60248201527f4342206c696d69742063616e206e6f7420626520736f2068696768000000000060448201526064015b60405180910390fd5b61149261223a565b600c01600043815260200190815260200160002060008860018111156114ba576114ba61533b565b60018111156114cb576114cb61533b565b815260208101919091526040016000908120549250808860018111156114f3576114f361533b565b14905060008082156115885761150a610a0261223a565b90508060001415915081801561151e575084155b156115835761152d888261303b565b94508461153861223a565b600c01600043815260200190815260200160002060008c60018111156115605761156061533b565b60018111156115715761157161533b565b81526020810191909152604001600020555b61160c565b6115936106c461223a565b9050806000141591508180156115a7575084155b1561160c576115b68882613107565b9450846115c161223a565b600c01600043815260200190815260200160002060008c60018111156115e9576115e961533b565b60018111156115fa576115fa61533b565b81526020810191909152604001600020555b88158015611618575081155b156116575760405162461bcd60e51b815260206004820152600f60248201526e13dc99195c881b9bdd08199bdd5b99608a1b6044820152606401611481565b8815806116865750818015611686575082801561167357508489115b8061168657508215801561168657508489105b15611697578495506001935061169f565b889550600093505b826116ad57858110156116c1565b8581156116ba57816116be565b6127105b11155b965050505093509350935093565b60608060008060006116df61223a565b600301546116eb61223a565b6001600160a01b03881660009081526007919091016020526040902054141590508061173b5761171961223a565b6001600160a01b0387166000908152600691909101602052604090205461173e565b60005b67ffffffffffffffff811115611756576117566154ba565b60405190808252806020026020018201604052801561177f578160200160208202803683370190505b50945061178a61223a565b6001600160a01b0387166000908152600691909101602052604090205467ffffffffffffffff8111156117bf576117bf6154ba565b6040519080825280602002602001820160405280156117e8578160200160208202803683370190505b50935060005b6117f661223a565b6001600160a01b0388166000908152600691909101602052604090205481101561131c57600061182461223a565b6001600160a01b038916600090815260069190910160205260409020805483908110611852576118526154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff169050600061188661223a565b65ffffffffffff831660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156118c4576118c461533b565b60018111156118d5576118d561533b565b81526020016001820154815260200160028201548152602001600382015481525050905061191781602001518361190a61223a565b600b01600061121161223a565b61197457611926600186615517565b94508187611934888661552f565b81518110611944576119446154d0565b602002602001019065ffffffffffff16908165ffffffffffff16815250508361196f57600188510388525b6119c9565b61197f600187615517565b9550836119c1578188611992878661552f565b815181106119a2576119a26154d0565b602002602001019065ffffffffffff16908165ffffffffffff16815250505b600187510387525b505080806119d6906154fc565b9150506117ee565b60006119e861223a565b6001600160a01b039092166000908152600592909201602052506040902054151590565b60608060608367ffffffffffffffff811115611a2a57611a2a6154ba565b604051908082528060200260200182016040528015611a53578160200160208202803683370190505b5092508367ffffffffffffffff811115611a6f57611a6f6154ba565b604051908082528060200260200182016040528015611a98578160200160208202803683370190505b5091508367ffffffffffffffff811115611ab457611ab46154ba565b604051908082528060200260200182016040528015611add578160200160208202803683370190505b5090506000611aed610a0261223a565b90508084600081518110611b0357611b036154d0565b602002602001018181525050611b1b81610aa861223a565b83600081518110611b2e57611b2e6154d0565b602002602001018181525050611b5381611b4661223a565b600b01600061077b61223a565b82600081518110611b6657611b666154d0565b602090810291909101015260015b845181101561088e5781611b875761088e565b611bc082611b9361223a565b600b016000611ba061223a565b60030154815260200190815260200160002061267690919063ffffffff16565b915081858281518110611bd557611bd56154d0565b602002602001018181525050611bed82610aa861223a565b848281518110611bff57611bff6154d0565b602002602001018181525050611c1782611b4661223a565b838281518110611c2957611c296154d0565b602090810291909101015280611c3e816154fc565b915050611b74565b6000611c536106c461223a565b905090565b600080600080600080611c6a876116cf565b91509150611c7661223a565b6001600160a01b0388166000908152600791909101602052604081205493505b8251811015611dc5576000611ca961223a565b6008016000858481518110611cc057611cc06154d0565b602002602001015165ffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900460ff166001811115611d0d57611d0d61533b565b6001811115611d1e57611d1e61533b565b8152602001600182015481526020016002820154815260200160038201548152505090506000611d9c8260200151868581518110611d5e57611d5e6154d0565b6020026020010151611d6e61223a565b600b016000611d7b61223a565b6003015481526020019081526020016000206128e69092919063ffffffff16565b90508060a0015189611dae9190615517565b985050508080611dbd906154fc565b915050611c96565b50611dce61223a565b6001600160a01b0388166000908152600791909101602052604081205493505b8151811015611e4e57600080611e1c848481518110611e0f57611e0f6154d0565b60200260200101516131b4565b9092509050611e2b8289615517565b9750611e378188615517565b965050508080611e46906154fc565b915050611dee565b5050509193509193565b600080600080600080611e6a87610fc9565b91509150611e7661223a565b6001600160a01b0388166000908152600791909101602052604081205493505b8251811015611fa4576000611ea961223a565b6008016000858481518110611ec057611ec06154d0565b602002602001015165ffffffffffff1681526020019081526020016000206040518060800160405290816000820160009054906101000a900460ff166001811115611f0d57611f0d61533b565b6001811115611f1e57611f1e61533b565b8152602001600182015481526020016002820154815260200160038201548152505090506000611f7b8260200151868581518110611f5e57611f5e6154d0565b6020026020010151611f6e61223a565b600a016000611d7b61223a565b90508060a0015189611f8d9190615517565b985050508080611f9c906154fc565b915050611e96565b5060005b8151811015611e4e57600080611fc9848481518110610960576109606154d0565b9092509050611fd88289615517565b9750611fe48188615517565b965050508080611ff3906154fc565b915050611fa8565b600060018360018111156120115761201161533b565b1415612057576120508261202361223a565b600a01600061203061223a565b6003015481526020019081526020016000206132da90919063ffffffff16565b9050612090565b6120508261206361223a565b600b01600061207061223a565b60030154815260200190815260200160002061338e90919063ffffffff16565b92915050565b606060008060008060006120a9876116cf565b91509150816120b661223a565b6006016000896001600160a01b03166001600160a01b0316815260200190815260200160002090805190602001906120ef92919061506e565b50815181519095508067ffffffffffffffff811115612110576121106154ba565b604051908082528060200260200182016040528015612139578160200160208202803683370190505b50965060005b818110156109e95760008061215f858481518110611e0f57611e0f6154d0565b909250905061216e8288615517565b965061217a8189615517565b975084838151811061218e5761218e6154d0565b60200260200101518a84815181106121a8576121a86154d0565b602002602001019065ffffffffffff16908165ffffffffffff1681525050505080806121d3906154fc565b91505061213f565b60006121e561223a565b600101805465ffffffffffff169060006121fe83615546565b91906101000a81548165ffffffffffff021916908365ffffffffffff1602179055505061222961223a565b6001015465ffffffffffff16919050565b7ffc2836757f9146445fc75bc3c897a210ec004e4ee60fc8627ef5cbf2842b3d0a90565b600081116122a45760405162461bcd60e51b8152602060048201526013602482015272125b9cdd59999a58da595b9d08185b5bdd5b9d606a1b6044820152606401611481565b6127108411156122eb5760405162461bcd60e51b8152602060048201526012602482015271496e73756666696369656e742076616c756560701b6044820152606401611481565b6122f58585613442565b612302858585858561360b565b5050505050565b80548061231857506000919050565b5b60008181526001830160205260409020600201541561234b576000908152600182016020526040902060020154612319565b919050565b6000908152600191909101602052604090206005015490565b6000908152600191909101602052604090206004015490565b6000816123f25760405162461bcd60e51b815260206004820152603860248201527f4f7264657253746174697374696373547265652834303229202d205374617274604482015277696e672076616c75652063616e6e6f74206265207a65726f60401b6064820152608401611481565b60008281526001808501602052604090912001541561242a57600082815260018085016020526040909120015461205090849061368b565b5060008181526001830160205260409020545b801580159061245e5750600081815260018085016020526040909120015482145b1561209057600081815260018401602052604090205490915061243d565b600080600061248961223a565b65ffffffffffff851660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156124c7576124c761533b565b60018111156124d8576124d861533b565b815260200160018201548152602001600282015481526020016003820154815250509050600061250f826020015186610f0061223a565b602083015190915061251f61223a565b65ffffffffffff87166000908152600991909101602052604090205460ff16156125a957600061254d61223a565b600d016000856040015181526020019081526020016000206040518060600160405290816000820154815260200160018201548152602001600282015481525050905081816020015111156125a257816125a5565b80515b9150505b60a082015194506125c081610b246127108861556c565b9350505050915091565b8054806125d957506000919050565b5b60008181526001808401602052604090912001541561234b5760009081526001808301602052604090912001546125da565b600080821161261a57600080fd5b6005612626838561558b565b61263190600a61556c565b8361263d86600a61556c565b612647919061558b565b612651919061552f565b101561266157612050828461558b565b61266b828461558b565b612050906001615517565b6000816126e65760405162461bcd60e51b815260206004820152603860248201527f4f7264657253746174697374696373547265652834303129202d205374617274604482015277696e672076616c75652063616e6e6f74206265207a65726f60401b6064820152608401611481565b60008281526001840160205260409020600201541561271e5760008281526001840160205260409020600201546120509084906136c8565b5060008181526001830160205260409020545b80158015906127525750600081815260018401602052604090206002015482145b15612090576000818152600184016020526040902054909150612731565b600061277d848484613700565b9050612789848461396c565b9392505050565b81546000906127a19060019061552f565b905060005b8181116128e057828482815481106127c0576127c06154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff1665ffffffffffff1614156128ce57818114612887576000848381548110612811576128116154d0565b90600052602060002090600591828204019190066006029054906101000a900465ffffffffffff1690508085838154811061284e5761284e6154d0565b90600052602060002090600591828204019190066006026101000a81548165ffffffffffff021916908365ffffffffffff160217905550505b83805480612897576128976155ad565b60019003818190600052602060002090600591828204019190066006026101000a81549065ffffffffffff021916905590556128e0565b806128d8816154fc565b9150506127a6565b50505050565b6040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a081019190915250600091825260019283016020908152604080842065ffffffffffff9384168552600601825292839020835160c08101855281548085168252600160301b8104851693820193909352600160601b90920490921692810192909252918201546001600160a01b031660608201526002820154608082015260039091015460a082015290565b60006129aa848484613c29565b80156105db57506105db8484613d72565b6000806000806129c9615123565b60006129d48a612309565b905060008089831015806129e6575089155b612a2d5760405162461bcd60e51b8152602060048201526018602482015277496e73756666696369656e74206c696d69742076616c756560401b6044820152606401611481565b6000805b8c831080612a3d57508c155b8015612a5057508a881080612a5057508a155b8015612a5b57508415155b8015612a6f57508b85101580612a6f57508b155b15612b2857600085815260018f0160205260409020600501549350612a948484615517565b9250849950612aa38585613e2b565b612aad9089615517565b9750612ab9848a615517565b98508c83118015612ac957508c15155b15612aeb57612ad88d8461552f565b9150612ae48583613e2b565b9050612b17565b8a88118015612af957508a15155b15612b1757612b088b8961552f565b9050612b148582613e3d565b91505b612b218e86612382565b9450612a31565b8115612b3b57612b38828a61552f565b98505b8015612b4e57612b4b818961552f565b97505b8215612c41578115612b7857899450612b718e86612b6c858861552f565b613e4f565b9550612b9d565b8015612b9d57899450612b9a8e86612b908885613e3d565b612b6c908861552f565b95505b600085815260018f01602052604081206002810191909155548515612c3f575b8015612c3f5785811015612c2957808f60010160008881526020019081526020016000206000015414612c2557808f600101600088815260200190815260200160002060000181905550858f6001016000838152602001908152602001600020600201819055505b8095505b600090815260018f016020526040902054612bbd565b505b828d1115612c5657612c53838e61552f565b96505b6000612c618f6125ca565b90508a81148015612c8a57508e6001016000828152602001908152602001600020600501546000145b15612c985760008f55612cdf565b8e548b1080612cb257508e548b148015612cb25750838a10155b15612cdf57858f6000018190555060008f6001016000888152602001908152602001600020600001819055505b612ce88f614185565b505050505050945094509450945094565b600080600080612d07615123565b6000612d128a6125ca565b90506000808983111580612d24575089155b612d6b5760405162461bcd60e51b8152602060048201526018602482015277496e73756666696369656e74206c696d69742076616c756560401b6044820152606401611481565b6000805b8c831080612d7b57508c155b8015612d8e57508a881080612d8e57508a155b8015612d9957508415155b8015612dad57508b85111580612dad57508b155b15612e6657600085815260018f0160205260409020600501549350612dd28484615517565b9250849950612de18585613e2b565b612deb9089615517565b9750612df7848a615517565b98508c83118015612e0757508c15155b15612e2957612e168d8461552f565b9150612e228583613e2b565b9050612e55565b8a88118015612e3757508a15155b15612e5557612e468b8961552f565b9050612e528582613e3d565b91505b612e5f8e86612676565b9450612d6f565b8115612e7957612e76828a61552f565b98505b8015612e8c57612e89818961552f565b97505b8215612f94578115612eb157899450612eaa8e86612b6c858861552f565b9550612ecc565b8015612ecc57899450612ec98e86612b908885613e3d565b95505b60008e60010160008781526020019081526020016000206001018190555060008e600101600087815260200190815260200160002060000154905060008614612f92575b8015612f925785811115612f7c57808f60010160008881526020019081526020016000206000015414612f7857808f600101600088815260200190815260200160002060000181905550858f6001016000838152602001908152602001600020600101819055505b8095505b600090815260018f016020526040902054612f10565b505b828d1115612fa957612fa6838e61552f565b96505b6000612fb48f612309565b90508a81148015612fdd57508e6001016000828152602001908152602001600020600501546000145b15612feb5760008f55613032565b8e548b118061300557508e548b1480156130055750838a10155b1561303257858f6000018190555060008f6001016000888152602001908152602001600020600001819055505b612ce88f614254565b60008061271061304b818561556c565b613055919061556c565b905060006130658561271061552f565b6130718561271061552f565b61307b919061556c565b6130876127108661556c565b6130919190615517565b905061309d828261260c565b92506130aa60c885615517565b8311156130c3576130bc60c885615517565b92506130ff565b6130ce600a85615517565b8310156130ff576127106130e3600a86615517565b11156130f1576127106130fc565b6130fc600a85615517565b92505b505092915050565b600080612710613117818561556c565b613121919061556c565b9050600061313185612710615517565b61313d8561271061552f565b613147919061556c565b6131536127108661556c565b61315d9190615517565b9050613169828261260c565b925061317660c884615517565b841115613188576130bc60c88561552f565b613193600a84615517565b8410156130ff57600a84116131a95760016130fc565b6130fc600a8561552f565b60008060006131c161223a565b65ffffffffffff851660009081526008919091016020526040908190208151608081019092528054829060ff1660018111156131ff576131ff61533b565b60018111156132105761321061533b565b8152602001600182015481526020016002820154815260200160038201548152505090506000613247826020015186610f3561223a565b602083015190915061325761223a565b65ffffffffffff87166000908152600991909101602052604090205460ff16156125a957600061328561223a565b600d016000856040015181526020019081526020016000206040518060600160405290816000820154815260200160018201548152602001600282015481525050905081816040015110156125a257816125a5565b6000806132e684612309565b905060008092505b83811080156132fc57508115155b156130ff576000828152600186016020526040812060050154906133208483613e2b565b905061332c8184615517565b92508583111561336e576000613342878561552f565b61334c908361552f565b905061335c82610b24838661556c565b6133669087615517565b95505061337b565b6133788286615517565b94505b6133858785612382565b935050506132ee565b60008061339a846125ca565b905060008092505b83811080156133b057508115155b156130ff576000828152600186016020526040812060050154906133d48483613e2b565b90506133e08184615517565b9250858311156134225760006133f6878561552f565b613400908361552f565b905061341082610b24838661556c565b61341a9087615517565b95505061342f565b61342c8286615517565b94505b6134398785612676565b935050506133a2565b806134b55760405162461bcd60e51b815260206004820152603960248201527f4f7264657253746174697374696373547265652834303529202d2056616c756560448201527f20746f20696e736572742063616e6e6f74206265207a65726f000000000000006064820152608401611481565b81546000905b801561351957809150808310156134e55760009081526001808501602052604090912001546134bb565b808311156135065760009081526001840160205260409020600201546134bb565b808314156135145750505050565b6134bb565b6000838152600185016020526040902084541580613568575060008381526001808701602052604090912001548414801590613568575060008381526001860160205260409020600201548414155b15613596576000600482018190556005820181905561358a90869086906142e3565b6135968585600061431b565b82815560006001808301829055600283019190915560038201805460ff19169091179055826135c757838555613601565b828410156135ea5760008381526001808701602052604090912001849055613601565b600083815260018601602052604090206002018490555b612302858561435b565b600084815260018601602052604090206003810154610100900465ffffffffffff166136435761363e86868686866145c6565b613683565b60006136528787878787614636565b905061367687878460030160079054906101000a900465ffffffffffff16846147d5565b61368187878361431b565b505b505050505050565b60005b6000828152600184016020526040902060020154156136c2576000918252600183016020526040909120600201549061368e565b50919050565b60005b6000828152600180850160205260409091200154156136c25760009182526001808401602052604090922090910154906136cb565b600061370d84848461299d565b6137295760405162461bcd60e51b8152600401611481906155c3565b50600082815260018085016020908152604080842065ffffffffffff80871680875260068301855295839020835160c08101855281548084168252600160301b8104841696820196909652600160601b909504821693850193909352938201546001600160a01b031660608401526002820154608084015260039182015460a0840181905291810154919490936101009092049091161480156137e15750600382015465ffffffffffff858116600160381b90920416145b15613803576137f2868660006142e3565b6137fe8686600061431b565b6138d5565b600382015465ffffffffffff8581166101009092041614156138615761382e868683602001516142e3565b60208082015165ffffffffffff1660009081526006840190915260409020805465ffffffffffff60601b191690556138d5565b600382015465ffffffffffff858116600160381b9092041614156138c15761388e8686836040015161431b565b60408082015165ffffffffffff166000908152600684016020522080546bffffffffffff000000000000191690556138d5565b6138d58686836040015184602001516147d5565b805165ffffffffffff1660009081526006830160205260408120805471ffffffffffffffffffffffffffffffffffff19168155600180820180546001600160a01b03191690556002820183905560039091018290556004840180549192909161393f90849061552f565b909155505060a081015160058301805460009061395d90849061552f565b90915550929695505050505050565b806139df5760405162461bcd60e51b815260206004820152603960248201527f4f7264657253746174697374696373547265652834303729202d2056616c756560448201527f20746f2064656c6574652063616e6e6f74206265207a65726f000000000000006064820152608401611481565b60008181526001830160205260408120600481015490919081906123025760008481526001808701602052604090912001541580613a2e57506000848152600186016020526040902060020154155b15613a3a575082613a82565b5060008381526001850160205260409020600201545b600081815260018087016020526040909120015415613a82576000908152600180860160205260409091200154613a50565b600081815260018087016020526040909120015415613ab65760008181526001808701602052604090912001549150613acd565b600081815260018601602052604090206002015491505b60008181526001860160205260408082205484835291208190558015613b3e576000818152600180880160205260409091200154821415613b235760008181526001808801602052604090912001839055613b42565b60008181526001870160205260409020600201839055613b42565b8286555b600082815260018701602052604090206003015460ff1615858314613bcc57613b6c87848861484a565b60008681526001888101602052604080832080830154878552828520938401819055845281842087905560028082015490840181905584529083208690556003908101549286905201805460ff191660ff90921615159190911790559194915b8015613bdc57613bdc87856148c1565b50506000818152600180870160205260408220828155908101829055600281018290556003810180546cffffffffffffffffffffffffff1916905560048101829055600501555050505050565b600082815260018085016020908152604080842065ffffffffffff808716808752600683018552838720845160c0810186528154808516808352600160301b8204861698830198909852600160601b900490931694830194909452948301546001600160a01b031660608201526002830154608082015260039092015460a08301528593909214613cc05760009350505050612789565b5b604081015165ffffffffffff1615613d535760409081015165ffffffffffff808216600090815260068501602090815290849020845160c08101865281548085168252600160301b8104851693820193909352600160601b9092049092169381019390935260018101546001600160a01b03166060840152600281015460808401526003015460a08301529250613cc1565b5060030154610100900465ffffffffffff908116911614949350505050565b600081613d8157506000612090565b8254821415613d9257506001612090565b815b600081815260018501602052604090205415613e215760008181526001808601602052604080832054808452922001548214801590613de6575060008181526001860160205260409020600201548214155b15613df657600092505050612090565b8454811415613e0a57600192505050612090565b506000908152600184016020526040902054613d94565b5060009392505050565b600061278983610b246127108561556c565b6000612789612710610b24858561556c565b613e57615123565b600083815260018501602052604090206005810154831115613ee15760405162461bcd60e51b815260206004820152603960248201527f4f7264657253746174697374696373547265652834313029202d20416d6f756e60448201527f7420746f2066696c6c20697320696e73756666696369656e74000000000000006064820152608401611481565b60038082015465ffffffffffff61010090910481166000818152600685016020908152604091829020825160c08101845281548087168252600160301b8104871693820193909352600160601b9092049094169181019190915260018301546001600160a01b0316606082015260028301546080820152919092015460a082015284915b65ffffffffffff811615801590613f7b57508215155b156140dd5765ffffffffffff8082166000908152600686016020908152604091829020825160c08101845281548086168252600160301b8104861693820193909352600160601b9092049093169181019190915260018201546001600160a01b031660608201526002820154608082015260039091015460a08201819052909250831061401f5760a0820151614011908461552f565b925081602001519050613f65565b6040518060800160405280836000015165ffffffffffff16815260200183606001516001600160a01b0316815260200184815260200161405f8986613e2b565b905260409283015165ffffffffffff908116600090815260068701602090815290859020855160c08101875281548085168252600160301b8104851693820193909352600160601b9092049092169481019490945260018101546001600160a01b03166060850152600281015460808501526003015460a084015294505b815165ffffffffffff16156140fd576140fb88888460000151614cdb565b505b60408501511561417a57604080860151600089815260018b016020908152838220895165ffffffffffff168352600601905291822060030180549192909161414690849061552f565b9091555050604080860151600089815260018b0160205291822060050180549192909161417490849061552f565b90915550505b505050509392505050565b805460009081526001820160205260409020600201541580156141bc57508054600090815260018083016020526040909120015415155b15614215578054600090815260018083016020526040808320909101548252902060020154156142075780546000908152600180830160205260409091200154614207908290614ec1565b614215818260000154614f99565b8054600090815260018201602052604090206003015460ff161561425157805460009081526001820160205260409020600301805460ff191690555b50565b8054600090815260018083016020526040909120015415801561428b57508054600090815260018201602052604090206002015415155b156142155780546000908152600180830160205260408083206002015483529091200154156142d557805460009081526001820160205260409020600201546142d5908290614f99565b614215818260000154614ec1565b6000918252600190920160205260409020600301805465ffffffffffff9092166101000266ffffffffffff0019909216919091179055565b6000918252600190920160205260409020600301805465ffffffffffff909216600160381b026cffffffffffff0000000000000019909216919091179055565b60005b825482148015906143885750600082815260018401602052604080822054825290206003015460ff165b156145a45760008281526001808501602052604080832054808452818420548452922001548114156144ab5760008181526001850160205260408082205482528082206002015480835291206003015490925060ff1615614431576000818152600180860160205260408083206003808201805460ff1990811690915587865283862082018054821690558254865292852001805490921690921790559082905254925061459e565b6000818152600185016020526040902060020154831415614459578092506144598484614ec1565b50600082815260018085016020526040808320548084528184206003808201805460ff199081169091558254875293862001805490931690931790915591829052546144a6908590614f99565b61459e565b6000818152600180860160205260408083205483528083209091015480835291206003015490925060ff1615614529576000818152600180860160205260408083206003808201805460ff1990811690915587865283862082018054821690558254865292852001805490921690921790559082905254925061459e565b6000818152600180860160205260409091200154831415614551578092506145518484614f99565b50600082815260018085016020526040808320548084528184206003808201805460ff1990811690915582548752938620018054909316909317909155918290525461459e908590614ec1565b5061435e565b505080546000908152600190910160205260409020600301805460ff19169055565b60008481526001860160205260408120906145e48787878787614636565b90506146088787838560030160019054906101000a900465ffffffffffff166147d5565b6146138787836142e3565b6003820154600160381b900465ffffffffffff166136815761368187878361431b565b6000848152600186016020908152604080832065ffffffffffff8716845260068101909252822060020154156146c95760405162461bcd60e51b815260206004820152603260248201527f4f7264657253746174697374696373547265652834303929202d204f726465726044820152711034b21030b63932b0b23c9032bc34b9ba1760711b6064820152608401611481565b60018160040160008282546146de9190615517565b92505081905550828160050160008282546146f99190615517565b90915550506040805160c08101825265ffffffffffff808816808352600060208085018281528587018381526001600160a01b03808d16606089019081524260808a0190815260a08a018e81529787526006909b019094529790932095518654915193518616600160601b0265ffffffffffff60601b19948716600160301b026bffffffffffffffffffffffff199093169682169690961791909117929092169390931784559151600184018054919095166001600160a01b031990911617909355925160028201559051600390910155905095945050505050565b60009283526001939093016020908152604080842065ffffffffffff938416808652600690910190925280842080546bffffffffffff0000000000001916600160301b9490961693840295909517909455908252919020805465ffffffffffff60601b1916600160601b909202919091179055565b600081815260018401602052604080822054848352912081905580614871578284556128e0565b60008181526001808601602052604090912001548214156148a757600081815260018086016020526040909120018390556128e0565b600090815260019390930160205250604090912060020155565b60005b825482148015906148e95750600082815260018401602052604090206003015460ff16155b15614cbc576000828152600180850160205260408083205480845292200154831415614ae55760008181526001850160205260408082206002015480835291206003015490925060ff161561498d576000828152600180860160205260408083206003908101805460ff199081169091558585529190932090920180549092161790556149768482614ec1565b600081815260018501602052604090206002015491505b60008281526001808601602052604080832090910154825290206003015460ff161580156149d85750600082815260018501602052604080822060020154825290206003015460ff16155b15614a0557600082815260018581016020526040909120600301805460ff19169091179055915081614cb6565b600082815260018501602052604080822060020154825290206003015460ff16614a82576000828152600180860160205260408083208083015484529083206003908101805460ff1990811690915593869052018054909216179055614a6b8483614f99565b600081815260018501602052604090206002015491505b600081815260018501602052604080822060039081018054868552838520808401805460ff909316151560ff199384161790558254821690925560029091015484529190922090910180549091169055614adc8482614ec1565b83549250614cb6565b6000818152600180860160205260408083209091015480835291206003015490925060ff1615614b64576000828152600180860160205260408083206003908101805460ff19908116909155858552919093209092018054909216179055614b4d8482614f99565b600081815260018086016020526040909120015491505b600082815260018501602052604080822060020154825290206003015460ff16158015614baf575060008281526001808601602052604080832090910154825290206003015460ff16155b15614bdc57600082815260018581016020526040909120600301805460ff19169091179055915081614cb6565b60008281526001808601602052604080832090910154825290206003015460ff16614c5b57600082815260018086016020526040808320600281015484529083206003908101805460ff1990811690915593869052018054909216179055614c448483614ec1565b600081815260018086016020526040909120015491505b60008181526001808601602052604080832060039081018054878652838620808401805460ff909316151560ff19938416179055825482169092559301548452922090910180549091169055614cb18482614f99565b835492505b506148c4565b506000908152600190910160205260409020600301805460ff19169055565b6000614ce884848461299d565b614d045760405162461bcd60e51b8152600401611481906155c3565b50600082815260018085016020908152604080842065ffffffffffff808716865260068201808552838720845160c08101865281548085168252600160301b8104851682890152600160601b9004841681870152818801546001600160a01b031660608201526002820154608082015260039182015460a08201819052828601546101009004909416808a529290965293909620909201549194909390915b8665ffffffffffff168314614e0757600092835260068501602052604090922054600160301b900465ffffffffffff169181614dde816154fc565b6000858152600688016020526040902060030154909350614e00915082615517565b9050614da3565b600385015465ffffffffffff888116600160381b909204161415614e4257614e31898960006142e3565b614e3d8989600061431b565b614e80565b614e51898986602001516142e3565b60208085015165ffffffffffff1660009081526006870190915260409020805465ffffffffffff60601b191690555b81856004016000828254614e94919061552f565b9250508190555080856005016000828254614eaf919061552f565b90915550959998505050505050505050565b600081815260018084016020526040808320600281018054915482865292852090930154938590529183905590918015614f0957600081815260018601602052604090208490555b6000838152600186016020526040902082905581614f2957828555614f76565b6000828152600180870160205260409091200154841415614f5f5760008281526001808701602052604090912001839055614f76565b600082815260018601602052604090206002018390555b505060008181526001938401602052604080822090940183905591825291902055565b60008181526001808401602052604080832091820180549254838552918420600201549385905283905590918015614fdf57600081815260018601602052604090208490555b6000838152600186016020526040902082905581614fff5782855561504c565b6000828152600186016020526040902060020154841415615035576000828152600186016020526040902060020183905561504c565b600082815260018087016020526040909120018390555b5050600081815260019093016020526040808420600201839055918352912055565b828054828255906000526020600020906004016005900481019282156151135791602002820160005b838211156150df57835183826101000a81548165ffffffffffff021916908365ffffffffffff1602179055509260200192600601602081600501049283019260010302615097565b80156151115782816101000a81549065ffffffffffff02191690556006016020816005010492830192600103026150df565b505b5061511f92915061515c565b5090565b6040518060800160405280600065ffffffffffff16815260200160006001600160a01b0316815260200160008152602001600081525090565b5b8082111561511f576000815560010161515d565b80356002811061234b57600080fd5b80356001600160a01b038116811461234b57600080fd5b600080600080608085870312156151ad57600080fd5b6151b685615171565b93506151c460208601615180565b93969395505050506040820135916060013590565b6000602082840312156151eb57600080fd5b5035919050565b600081518084526020808501945080840160005b8381101561522257815187529582019590820190600101615206565b509495945050505050565b60608152600061524060608301866151f2565b828103602084015261525281866151f2565b9050828103604084015261526681856151f2565b9695505050505050565b60006020828403121561528257600080fd5b61278982615180565b600081518084526020808501945080840160005b8381101561522257815165ffffffffffff168752958201959082019060010161529f565b6080815260006152d6608083018761528b565b6020830195909552506040810192909252606090910152919050565b803565ffffffffffff8116811461234b57600080fd5b6000806040838503121561531b57600080fd5b61532483615180565b9150615332602084016152f2565b90509250929050565b634e487b7160e01b600052602160045260246000fd5b6002811061536f57634e487b7160e01b600052602160045260246000fd5b9052565b606081016153818286615351565b602082019390935260400152919050565b6000602082840312156153a457600080fd5b612789826152f2565b60e081016153bb828a615351565b602082019790975260408101959095526001600160a01b03939093166060850152608084019190915260a0830152151560c090910152919050565b604081526000615409604083018561528b565b828103602084015261541b818561528b565b95945050505050565b6000806000806080858703121561543a57600080fd5b61544385615171565b966020860135965060408601359560600135945092505050565b60008060006060848603121561547257600080fd5b61547b84615171565b95602085013595506040909401359392505050565b600080604083850312156154a357600080fd5b6154ac83615171565b946020939093013593505050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000600019821415615510576155106154e6565b5060010190565b6000821982111561552a5761552a6154e6565b500190565b600082821015615541576155416154e6565b500390565b600065ffffffffffff80831681811415615562576155626154e6565b6001019392505050565b6000816000190483118215151615615586576155866154e6565b500290565b6000826155a857634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052603160045260246000fd5b60208082526030908201527f4f7264657253746174697374696373547265652834313029202d204f7264657260408201526f103237b2b9903737ba1032bc34b9ba1760811b60608201526080019056fea2646970667358221220b6436293655a49891b01414099aa6cac012517d846a92c7ec2b660d762d2cec764736f6c63430008090033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}
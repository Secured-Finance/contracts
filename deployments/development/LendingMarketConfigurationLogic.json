{
  "address": "0xE5c1593B67193ee0e911Cb740e3D9f3BC07dD110",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "ccy",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "previousRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "rate",
          "type": "uint256"
        }
      ],
      "name": "CircuitBreakerLimitRangeUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "previousPeriod",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "period",
          "type": "uint256"
        }
      ],
      "name": "ObservationPeriodUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "ccy",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "previousRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "rate",
          "type": "uint256"
        }
      ],
      "name": "OrderFeeRateUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_maturity",
          "type": "uint256"
        }
      ],
      "name": "calculateOrderFeeAmount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "orderFeeAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        }
      ],
      "name": "getCircuitBreakerLimitRange",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getObservationPeriod",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_ccy",
          "type": "bytes32"
        }
      ],
      "name": "getOrderFeeRate",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x702a5a7b8e15d47e00a9b10add5d414224ba4dbe15b155ba60dac61c150a68ee",
  "receipt": {
    "to": null,
    "from": "0xDBA767F3DFF3835BEf5dE1eDEe91A9901402AB21",
    "contractAddress": "0xE5c1593B67193ee0e911Cb740e3D9f3BC07dD110",
    "transactionIndex": 22,
    "gasUsed": "405556",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x6a552cbe92c72023415c1184d143ab5e4cf4c7be863dac06ffb84345f1460e12",
    "transactionHash": "0x702a5a7b8e15d47e00a9b10add5d414224ba4dbe15b155ba60dac61c150a68ee",
    "logs": [],
    "blockNumber": 3835564,
    "cumulativeGasUsed": "3646714",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "ee0701f0e1353791145c76210180d73b",
  "metadata": "{\"compiler\":{\"version\":\"0.8.9+commit.e5eed63a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ccy\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"previousRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate\",\"type\":\"uint256\"}],\"name\":\"CircuitBreakerLimitRangeUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"previousPeriod\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"period\",\"type\":\"uint256\"}],\"name\":\"ObservationPeriodUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ccy\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"previousRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate\",\"type\":\"uint256\"}],\"name\":\"OrderFeeRateUpdated\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_maturity\",\"type\":\"uint256\"}],\"name\":\"calculateOrderFeeAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"orderFeeAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"}],\"name\":\"getCircuitBreakerLimitRange\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getObservationPeriod\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_ccy\",\"type\":\"bytes32\"}],\"name\":\"getOrderFeeRate\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/protocol/libraries/logics/LendingMarketConfigurationLogic.sol\":\"LendingMarketConfigurationLogic\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/protocol/libraries/Constants.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nlibrary Constants {\\n    /// @dev Used for price digits in the basis (10000 -> 1)\\n    uint256 public constant PRICE_DIGIT = 10000;\\n\\n    /// @dev Used for percentage digits in the basis (10000 -> 100%)\\n    uint256 public constant PCT_DIGIT = 10000;\\n\\n    /// @dev Used for seconds in year (60 * 60 * 24 * 365)\\n    uint256 internal constant SECONDS_IN_YEAR = 31536000;\\n\\n    /// @dev Used for maximum order count per currency\\n    uint256 internal constant MAXIMUM_ORDER_COUNT = 20;\\n\\n    /// @dev Used for minimum threshold for circuit breaker unit price threshold\\n    uint256 public constant MINIMUM_CIRCUIT_BREAKER_THRESHOLD = 10;\\n\\n    /// @dev Used for maximum threshold for circuit breaker unit price threshold\\n    uint256 public constant MAXIMUM_CIRCUIT_BREAKER_THRESHOLD = 200;\\n}\\n\",\"keccak256\":\"0x723b180b046e8fbe471400aa11a092e7611556a1467b0eccd6c19c26c7576459\",\"license\":\"MIT\"},\"contracts/protocol/libraries/logics/LendingMarketConfigurationLogic.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\n// libraries\\nimport {Constants} from \\\"../../libraries/Constants.sol\\\";\\nimport {RoundingUint256} from \\\"../../libraries/math/RoundingUint256.sol\\\";\\n// storages\\nimport {LendingMarketConfigurationStorage as Storage} from \\\"../../storages/LendingMarketConfigurationStorage.sol\\\";\\n\\nlibrary LendingMarketConfigurationLogic {\\n    using RoundingUint256 for uint256;\\n\\n    event OrderFeeRateUpdated(bytes32 ccy, uint256 previousRate, uint256 rate);\\n    event CircuitBreakerLimitRangeUpdated(bytes32 ccy, uint256 previousRate, uint256 rate);\\n    event ObservationPeriodUpdated(uint256 previousPeriod, uint256 period);\\n\\n    function getCircuitBreakerLimitRange(bytes32 _ccy) public view returns (uint256) {\\n        return Storage.slot().circuitBreakerLimitRanges[_ccy];\\n    }\\n\\n    function getOrderFeeRate(bytes32 _ccy) public view returns (uint256) {\\n        return Storage.slot().orderFeeRates[_ccy];\\n    }\\n\\n    function getObservationPeriod() public view returns (uint256) {\\n        return Storage.slot().observationPeriod;\\n    }\\n\\n    function calculateOrderFeeAmount(\\n        bytes32 _ccy,\\n        uint256 _amount,\\n        uint256 _maturity\\n    ) external view returns (uint256 orderFeeAmount) {\\n        require(block.timestamp < _maturity, \\\"Invalid maturity\\\");\\n        uint256 currentMaturity = _maturity - block.timestamp;\\n\\n        // NOTE: The formula is:\\n        // actualRate = feeRate * (currentMaturity / SECONDS_IN_YEAR)\\n        // orderFeeAmount = amount * actualRate\\n        orderFeeAmount = (Storage.slot().orderFeeRates[_ccy] * currentMaturity * _amount).div(\\n            Constants.SECONDS_IN_YEAR * Constants.PCT_DIGIT\\n        );\\n    }\\n\\n    function updateOrderFeeRate(bytes32 _ccy, uint256 _orderFeeRate) external {\\n        require(_orderFeeRate <= Constants.PCT_DIGIT, \\\"Invalid order fee rate\\\");\\n        uint256 previousRate = Storage.slot().orderFeeRates[_ccy];\\n\\n        if (_orderFeeRate != previousRate) {\\n            Storage.slot().orderFeeRates[_ccy] = _orderFeeRate;\\n\\n            emit OrderFeeRateUpdated(_ccy, previousRate, _orderFeeRate);\\n        }\\n    }\\n\\n    function updateCircuitBreakerLimitRange(bytes32 _ccy, uint256 _limitRange) external {\\n        require(_limitRange <= Constants.PCT_DIGIT, \\\"Invalid circuit breaker limit range\\\");\\n        uint256 previousRange = Storage.slot().circuitBreakerLimitRanges[_ccy];\\n\\n        if (_limitRange != previousRange) {\\n            Storage.slot().circuitBreakerLimitRanges[_ccy] = _limitRange;\\n\\n            emit CircuitBreakerLimitRangeUpdated(_ccy, previousRange, _limitRange);\\n        }\\n    }\\n\\n    function updateObservationPeriod(uint256 _observationPeriod) external {\\n        uint256 previousPeriod = Storage.slot().observationPeriod;\\n\\n        if (_observationPeriod != previousPeriod) {\\n            Storage.slot().observationPeriod = _observationPeriod;\\n\\n            emit ObservationPeriodUpdated(previousPeriod, _observationPeriod);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x9b66a24e9cadc8bf82b4f68cbdbac2683bd9b30026d5ec3eddf79d6e877055c4\",\"license\":\"MIT\"},\"contracts/protocol/libraries/math/RoundingUint256.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nlibrary RoundingUint256 {\\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\\n        require(b > 0);\\n\\n        if ((a * 10) / b - (a / b) * 10 < 5) {\\n            return a / b;\\n        } else {\\n            return (a / b) + 1;\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xbc360f39a82f1a9a7454726e3db802407d305b5e525aa8c3236fe49ca6ca534d\",\"license\":\"MIT\"},\"contracts/protocol/storages/LendingMarketConfigurationStorage.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.9;\\n\\nlibrary LendingMarketConfigurationStorage {\\n    bytes32 internal constant STORAGE_SLOT = keccak256(\\\"sf.storage.lendingMarketConfiguration\\\");\\n\\n    struct Storage {\\n        // Mapping from currency to order fee rate received by protocol (in basis point)\\n        mapping(bytes32 => uint256) orderFeeRates;\\n        // Mapping from currency to rate limit range of yield for the circuit breaker\\n        mapping(bytes32 => uint256) circuitBreakerLimitRanges;\\n        // The period to calculate the volume-weighted average price of transactions to use as auto-roll fee rate.\\n        uint256 observationPeriod;\\n    }\\n\\n    function slot() internal pure returns (Storage storage r) {\\n        bytes32 _slot = STORAGE_SLOT;\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            r.slot := _slot\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x9ad4f75bdbd12085d5c87b86004b00fbbf417dbf8e4c7f802e1531a5200ae800\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x61065e61003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100875760003560e01c80637b588aaa116100655780637b588aaa1461012c5780638ba14e381461014c5780638c197d8d1461015f578063f1eaebae1461017f57600080fd5b806303e5fb591461008c5780634e78fecc146100cb5780635ca65d571461010a575b600080fd5b6100b961009a36600461051b565b6000908152600080516020610609833981519152602052604090205490565b60405190815260200160405180910390f35b6100b96100d936600461051b565b60009081527ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d318602052604090205490565b81801561011657600080fd5b5061012a610125366004610534565b6101a6565b005b81801561013857600080fd5b5061012a610147366004610534565b610280565b6100b961015a366004610556565b610382565b81801561016b57600080fd5b5061012a61017a36600461051b565b610429565b7ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d319546100b9565b6127108111156101f65760405162461bcd60e51b8152602060048201526016602482015275496e76616c6964206f7264657220666565207261746560501b60448201526064015b60405180910390fd5b6000828152600080516020610609833981519152602052604090205481811461027b576000838152600080516020610609833981519152602090815260409182902084905581518581529081018390529081018390527fad24e9bff76148b1b779fc330ea225198d2b44136c7a8e5fbec46c99c7775632906060015b60405180910390a15b505050565b6127108111156102de5760405162461bcd60e51b815260206004820152602360248201527f496e76616c6964206369726375697420627265616b6572206c696d69742072616044820152626e676560e81b60648201526084016101ed565b60008281527ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d318602052604090205481811461027b5760008381527ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d318602090815260409182902084905581518581529081018390529081018390527fee52d515b96986517a19b501c0a50b03f4edace46ba0484faaea7590969adcf690606001610272565b60008142106103c65760405162461bcd60e51b815260206004820152601060248201526f496e76616c6964206d6174757269747960801b60448201526064016101ed565b60006103d24284610598565b90506104206103e76127106301e133806105af565b6000878152600080516020610609833981519152602052604090205486906104109085906105af565b61041a91906105af565b906104a4565b95945050505050565b7ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d319548181146104a057816000805160206106098339815191526002015560408051828152602081018490527fb310034e792eb345456b77ee9b3ade0d30b9866d547921c8f4d5e9273c941a90910160405180910390a15b5050565b60008082116104b257600080fd5b60056104be83856105ce565b6104c990600a6105af565b836104d586600a6105af565b6104df91906105ce565b6104e99190610598565b1015610500576104f982846105ce565b9050610515565b61050a82846105ce565b6104f99060016105f0565b92915050565b60006020828403121561052d57600080fd5b5035919050565b6000806040838503121561054757600080fd5b50508035926020909101359150565b60008060006060848603121561056b57600080fd5b505081359360208301359350604090920135919050565b634e487b7160e01b600052601160045260246000fd5b6000828210156105aa576105aa610582565b500390565b60008160001904831182151516156105c9576105c9610582565b500290565b6000826105eb57634e487b7160e01b600052601260045260246000fd5b500490565b6000821982111561060357610603610582565b50019056fefd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d317a264697066735822122045ece05903a3ec6c2920baf15d9ec17debe2c5a96a411b103ad9a565af75696f64736f6c63430008090033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600436106100875760003560e01c80637b588aaa116100655780637b588aaa1461012c5780638ba14e381461014c5780638c197d8d1461015f578063f1eaebae1461017f57600080fd5b806303e5fb591461008c5780634e78fecc146100cb5780635ca65d571461010a575b600080fd5b6100b961009a36600461051b565b6000908152600080516020610609833981519152602052604090205490565b60405190815260200160405180910390f35b6100b96100d936600461051b565b60009081527ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d318602052604090205490565b81801561011657600080fd5b5061012a610125366004610534565b6101a6565b005b81801561013857600080fd5b5061012a610147366004610534565b610280565b6100b961015a366004610556565b610382565b81801561016b57600080fd5b5061012a61017a36600461051b565b610429565b7ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d319546100b9565b6127108111156101f65760405162461bcd60e51b8152602060048201526016602482015275496e76616c6964206f7264657220666565207261746560501b60448201526064015b60405180910390fd5b6000828152600080516020610609833981519152602052604090205481811461027b576000838152600080516020610609833981519152602090815260409182902084905581518581529081018390529081018390527fad24e9bff76148b1b779fc330ea225198d2b44136c7a8e5fbec46c99c7775632906060015b60405180910390a15b505050565b6127108111156102de5760405162461bcd60e51b815260206004820152602360248201527f496e76616c6964206369726375697420627265616b6572206c696d69742072616044820152626e676560e81b60648201526084016101ed565b60008281527ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d318602052604090205481811461027b5760008381527ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d318602090815260409182902084905581518581529081018390529081018390527fee52d515b96986517a19b501c0a50b03f4edace46ba0484faaea7590969adcf690606001610272565b60008142106103c65760405162461bcd60e51b815260206004820152601060248201526f496e76616c6964206d6174757269747960801b60448201526064016101ed565b60006103d24284610598565b90506104206103e76127106301e133806105af565b6000878152600080516020610609833981519152602052604090205486906104109085906105af565b61041a91906105af565b906104a4565b95945050505050565b7ffd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d319548181146104a057816000805160206106098339815191526002015560408051828152602081018490527fb310034e792eb345456b77ee9b3ade0d30b9866d547921c8f4d5e9273c941a90910160405180910390a15b5050565b60008082116104b257600080fd5b60056104be83856105ce565b6104c990600a6105af565b836104d586600a6105af565b6104df91906105ce565b6104e99190610598565b1015610500576104f982846105ce565b9050610515565b61050a82846105ce565b6104f99060016105f0565b92915050565b60006020828403121561052d57600080fd5b5035919050565b6000806040838503121561054757600080fd5b50508035926020909101359150565b60008060006060848603121561056b57600080fd5b505081359360208301359350604090920135919050565b634e487b7160e01b600052601160045260246000fd5b6000828210156105aa576105aa610582565b500390565b60008160001904831182151516156105c9576105c9610582565b500290565b6000826105eb57634e487b7160e01b600052601260045260246000fd5b500490565b6000821982111561060357610603610582565b50019056fefd57fda692f2d6ebd63634bcff565f4a5bd9da5175c220bd0ae0da0b8f69d317a264697066735822122045ece05903a3ec6c2920baf15d9ec17debe2c5a96a411b103ad9a565af75696f64736f6c63430008090033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}